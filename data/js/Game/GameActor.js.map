{"version":3,"sources":["src/Game/GameActor.js"],"names":[],"mappings":"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","file":"src/Game/GameActor.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  let internal = Sprite.Namespace();\n\n  /*\n    角色类，包括涉及到hero和npc\n    属性：\n      this.sprite 精灵\n  */\n  Game.register(\"Actor\", class Actor extends Sprite.Event {\n    constructor (actorData) {\n      super();\n\n      internal(this).data = actorData;\n\n      this.makeInfoBox();\n\n      if (this.data.image instanceof Array) {\n        this.init(this.data.image);\n      } else if (typeof this.data.image == \"string\") {\n        Sprite.Loader\n          .create()\n          .add(\"/actor/\" + this.data.image)\n          .start()\n          .on(\"complete\", (event) => {\n            this.init(event.data);\n          });\n      } else {\n        console.error(this.id, this.data, this.data.image, this);\n        throw new Error(\"Invalid Actor Image\");\n      }\n    }\n\n    init (images) {\n\n      images.forEach(function (image) {\n        if (\n          !Number.isInteger(image.width) || !Number.isInteger(image.height) ||\n          image.width <= 0 || image.width >= 4096 ||\n          image.height <= 0 || image.height >= 4096\n        ) {\n          console.error(image, images);\n          throw new Error(\"Game.Actor.init got invalid image\");\n        }\n      });\n\n      let sprite = new Sprite.Sheet({\n        images: images, // images is Array\n        width: this.data.tilewidth,\n        height: this.data.tileheight,\n        animations: this.data.animations\n      });\n\n      if (Number.isInteger(this.data.centerX) && Number.isInteger(this.data.centerY)) {\n        sprite.centerX = this.data.centerX;\n        sprite.centerY = this.data.centerY;\n      } else {\n        console.log(this.data);\n        throw new Error(\"Game.Actor invalid centerX/centerY\");\n      }\n\n      sprite.play(\"facedown\");\n      internal(this).sprite = sprite;\n\n      sprite.on(\"change\", () => {\n        internal(this).infoBox.x = sprite.x;\n        internal(this).infoBox.y = sprite.y - sprite.centerY - 20\n      });\n\n      let completeCount = -1;\n      let Complete = () => {\n        completeCount++;\n        if (completeCount >= 0) {\n          this.calculate();\n          this.refreshBar();\n          this.emit(\"complete\", true);\n        }\n      };\n\n      if (this.data.skills) {\n        this.data.skills.forEach((skillId) => {\n          completeCount--;\n          Game.Skill.load(skillId, () => {\n            Complete();\n          });\n        });\n      }\n\n      if (this.data.equipment) {\n        for (let key in this.data.equipment) {\n          let itemId = this.data.equipment[key];\n          if (itemId) {\n            completeCount--;\n            Game.Item.load(itemId, () => {\n              Complete();\n            });\n          }\n        }\n      }\n\n      if (this.data.items) {\n        for (let itemId in this.data.items) {\n          completeCount--;\n          Game.Item.load(itemId, () => {\n            Complete();\n          });\n        }\n      }\n\n      if (this.data.contact && this.data.trade) {\n        for (let itemId in this.data.trade) {\n          completeCount--;\n          Game.Item.load(itemId, () => {\n            Complete();\n          });\n        }\n      }\n\n      Complete();\n    }\n\n    get data () {\n      return internal(this).data;\n    }\n\n    set data (value) {\n      throw new Error(\"Game.Actor.data readonly\");\n    }\n\n    get id () {\n      return internal(this).data.id;\n    }\n\n    set id (value) {\n      throw new Error(\"Game.Actor.id readonly\")\n    }\n\n    get sprite () {\n      return internal(this).sprite;\n    }\n\n    set sprite (value) {\n      throw new Error(\"Game.Actor.sprite readonly\");\n    }\n\n    makeInfoBox () {\n      // 名字\n      let text = new Sprite.Text({\n        text: this.data.name,\n        maxWidth: 200,\n        color: \"white\",\n        fontSize: 12\n      });\n      text.centerY = Math.floor(text.height / 2);\n      text.centerX = Math.floor(text.width / 2);\n      text.x = 0;\n      text.y = 0;\n\n      // 一个上面四个精神条、血条的聚合，统一管理放入这个Container\n      internal(this).infoBox = new Sprite.Container();\n\n      if (this.data.type == \"npc\") {\n        text.y += 10;\n        internal(this).infoBox.appendChild(text);\n      } else if (this.data.type == \"hero\") {\n        // do nothing\n      } else {\n        // 血条外面的黑框\n        let hpbarBox = new Sprite.Shape();\n        hpbarBox.centerX = 15;\n        hpbarBox.centerY = 2;\n        hpbarBox.x = 0;\n        hpbarBox.y = 9;\n\n        // 魔法条外面的黑框\n        let mpbarBox = new Sprite.Shape();\n        mpbarBox.centerX = 15;\n        mpbarBox.centerY = 2;\n        mpbarBox.x = 0;\n        mpbarBox.y = 12;\n\n        hpbarBox.rect({\n          x: 0,\n          y: 0,\n          width: 30,\n          height: 3,\n          \"fill-opacity\": 0\n        });\n\n        mpbarBox.rect({\n          x: 0,\n          y: 0,\n          width: 30,\n          height: 3,\n          \"fill-opacity\": 0\n        });\n\n        // 生命条\n        internal(this).hpbar = new Sprite.Shape();\n        internal(this).hpbar.centerX = 15;\n        internal(this).hpbar.centerY = 2;\n        internal(this).hpbar.x = 0;\n        internal(this).hpbar.y = 9;\n\n        // 精力条\n        internal(this).mpbar = new Sprite.Shape();\n        internal(this).mpbar.centerX = 15;\n        internal(this).mpbar.centerY = 2;\n        internal(this).mpbar.x = 0;\n        internal(this).mpbar.y = 12;\n\n        internal(this).infoBox.appendChild(\n          text,\n          hpbarBox,\n          mpbarBox,\n          internal(this).hpbar,\n          internal(this).mpbar\n        );\n      }\n    }\n\n    calculate () {\n      if (this.data.$str && this.data.$dex && this.data.$con && this.data.$int && this.data.$cha) {\n\n        this.data.str = this.data.$str;\n        this.data.dex = this.data.$dex;\n        this.data.con = this.data.$con;\n        this.data.int = this.data.$int;\n        this.data.cha = this.data.$cha;\n\n        // 然后可以针对基本属性计算buff\n\n        this.data.$hp = this.data.con * 10;\n        this.data.$sp = this.data.int * 5;\n        this.data.$atk = this.data.str * 1;\n        this.data.$matk = this.data.int * 0.5;\n        this.data.$def = 0;\n        this.data.$mdef = 0;\n\n        this.data.critical = this.data.dex * 0.005;\n        this.data.dodge = this.data.dex * 0.005;\n\n        // 计算完了战斗相关数值\n        this.data.hp = this.data.$hp;\n        this.data.sp = this.data.$sp;\n        this.data.atk = this.data.$atk;\n        this.data.def = this.data.$def;\n        this.data.matk = this.data.$matk;\n        this.data.mdef = this.data.$mdef;\n\n        // 最后可以对战斗相关数值计算buff\n\n        if (this.data.buff && this.data.nerf) {\n          this.data.buff.forEach((element) => {\n\n          });\n          this.data.nerf.forEach((element) => {\n\n          });\n        }\n      }\n    }\n\n    get x () {\n      return this.data.x;\n    }\n\n    set x (value) {\n      this.data.x = value;\n      this.sprite.x = value * 32 + 16;\n    }\n\n    get y () {\n      return this.data.y;\n    }\n\n    set y (value) {\n      this.data.y = value;\n      this.sprite.y = value * 32 + 16;\n    }\n\n    get visible () {\n      return this.sprite.visible;\n    }\n\n    set visible (value) {\n      this.sprite.visible = value;\n      internal(this).infoBox.visible = value;\n    }\n\n    get alpha () {\n      return this.sprite.alpha;\n    }\n\n    set alpha (value) {\n      if (typeof value == \"number\" && !isNaN(value) && value >= 0 && value <= 1) {\n        internal(this).sprite.alpha = value;\n        internal(this).infoBox.alpha = value;\n      } else {\n        console.error(value, this);\n        throw new Error(\"Game.Actor.alpha got invalid value\");\n      }\n    }\n\n    get position () {\n      return {\n        x: this.x,\n        y: this.y\n      };\n    }\n\n    set position (value) {\n      throw new Error(\"Game.Actor.position readonly\");\n    }\n\n    get direction () {\n      return this.sprite.currentAnimation.match(/up|left|down|right/)[0];\n    }\n\n    set direction (value) {\n      throw new Error(\"Game.Actor.direction readonly\");\n    }\n\n    get facePosition () {\n      let p = this.position;\n      switch (this.direction) {\n        case \"up\":\n          p.y -= 1;\n          break;\n        case \"down\":\n          p.y += 1;\n          break;\n        case \"left\":\n          p.x -= 1;\n          break;\n        case \"right\":\n          p.x += 1;\n          break;\n      }\n      return p;\n    }\n\n    set facePosition (value) {\n      throw new Error(\"Game.Actor.facePosition readonly\");\n    }\n\n    clone  (callback) {\n      let actor = new Game.Actor(this.data);\n      actor.x = this.x;\n      actor.y = this.y;\n      actor.visible = this.visible;\n      actor.alpha = this.alpha;\n      actorObj.on(\"complete\", function () {\n        if (typeof callback == \"function\") {\n          callback(actor);\n        }\n      });\n    }\n\n    refreshBar () {\n      if (Game.hero && this == Game.hero) {\n        Game.windows.interface.status(\n          this.data.hp / this.data.$hp, // 生命百分比\n          this.data.sp / this.data.$sp // 精神力百分比\n        );\n      }\n\n      if (internal(this).hpbar && internal(this).mpbar) {\n        let hpcolor = \"green\";\n        if ((this.data.hp / this.data.$hp) < 0.25)\n          hpcolor = \"red\";\n        else if ((this.data.hp / this.data.$hp) < 0.5)\n          hpcolor = \"yellow\";\n\n        internal(this).hpbar.clear().rect({\n          x: 1,\n          y: 1,\n          width: Math.floor((this.data.hp / this.data.$hp) * 28),\n          height: 2,\n          fill: hpcolor,\n          \"stroke-width\": 0\n        });\n\n        internal(this).mpbar.clear().rect({\n          x: 1,\n          y: 1,\n          width: Math.floor((this.data.sp / this.data.$sp) * 28),\n          height: 2,\n          fill: \"blue\",\n          \"stroke-width\": 0\n        });\n      }\n    }\n\n    heroUse () {\n      if (this.data.contact) {\n\n        let options = {};\n\n        if (this.data.contact) {\n          Sprite.each(this.data.contact, (talk, key) => {\n            let h = Game.hero;\n            let d = Game.hero.data;\n            let result = null;\n            try {\n              result = eval(talk.condition)\n            } catch (e) {\n              console.error(talk.condition);\n              console.error(e);\n              throw new Error(\"talk.condition eval error\");\n            }\n            if (result) {\n              options[key] = key;\n            }\n          });\n        }\n\n        if (this.data.trade) {\n          options[\"买入\"] = \"buy\";\n          options[\"卖出\"] = \"sell\";\n        }\n\n        Game.choice(options, (choice) => {\n          switch (choice) {\n            case \"buy\":\n              Game.windows.buy.open(this.data.trade);\n              break;\n            case \"sell\":\n              Game.windows.sell.open(this.data.trade);\n              break;\n            default:\n              if (this.data.contact[choice]) {\n                Game.dialogue(this.data.contact[choice].content, this.data.name);\n              }\n          }\n        });\n      }\n    }\n\n    distance () {\n      let x = null, y = null;\n      if (arguments.length == 2 && typeof arguments[0] == \"number\" && typeof arguments[1] == \"number\") {\n        x = arguments[0];\n        y = arguments[1];\n      } else if (arguments.length == 1 && typeof arguments[0].x == \"number\" && typeof arguments[0].y == \"number\") {\n        x = arguments[0].x;\n        y = arguments[0].y;\n      } else {\n        console.error(arguments);\n        throw new Error(\"Game.Actor.distance Invalid arguments\");\n      }\n      let d = 0;\n      d += Math.pow(this.x - x, 2);\n      d += Math.pow(this.y - y, 2);\n      d = Math.sqrt(d);\n      return d;\n    }\n\n    decreaseHP (power) {\n      this.data.hp -= power;\n      this.refreshBar();\n      this.dead();\n    }\n\n    decreaseSP (sp) {\n      this.data.sp -= sp;\n      this.refreshBar();\n    }\n\n    dead () {\n      if (this.data.hp <= 0) {\n        if (this.data.type == \"hero\") {\n\n        } else {\n          let bag = null;\n          for (let b of Game.area.bags) {\n            if (b.hitTest(this.x, this.y)) {\n              bag = b;\n            }\n          }\n          if (!bag) {\n            bag = Game.items.bag.clone();\n            bag.on(\"complete\", () => {\n              bag.x = this.x;\n              bag.y = this.y;\n              bag.draw();\n              Game.area.bags.add(bag);\n            });\n          }\n\n          bag.inner = {\n            \"gold\": 1\n          };\n\n          this.remove();\n          Game.area.actors.delete(this);\n        }\n      }\n    }\n\n    /** 闪一闪人物，例如被击中时的效果 */\n    flash () {\n      this.sprite.alpha = 0.5;\n      setTimeout(() => {\n        this.sprite.alpha = 1;\n      }, 200);\n    }\n\n    /** 受到attacker的skill技能的伤害 */\n    damage (attacker, skill) {\n\n      this.emit(\"damaged\");\n\n      if (this == Game.hero) {\n        // 如果英雄受到了伤害\n        let touchActor = [];\n        for (let actor of Game.area.actors) {\n          // 找到所有邻接英雄的怪物\n          if (actor != this && actor.data.type == \"monster\" && actor.distance(this) < 1.01) {\n            touchActor.push(actor);\n          }\n        }\n        if (touchActor.length) {\n          let faceAttacker = false;\n          let facePosition = this.facePosition;\n          touchActor.forEach(function (actor) {\n            if (actor.hitTest(facePosition.x, facePosition.y)) {\n              faceAttacker = true;\n            }\n          });\n          // 如果英雄现在没面对任何一个邻接的怪物，面向它\n          if (faceAttacker == false) {\n            this.goto(touchActor[0].x, touchActor[0].y);\n          }\n        }\n      }\n\n      let power = skill.power;\n      let type = skill.type;\n\n      let color = \"white\";\n      if (this.data.type == \"hero\") {\n        color = \"red\";\n      }\n\n      if (type == \"normal\") {\n        power += attacker.data.atk;\n        power -= this.data.def\n        power = Math.max(0, power);\n      } else { // type == magic\n        power += attacker.data.matk;\n        power - this.data.mdef\n        power = Math.max(0, power);\n      }\n\n      let text = null;\n\n      if (Math.random() < this.data.dodge) { // 闪避了\n        text = new Sprite.Text({\n          text: \"miss\",\n          color: color,\n          fontSize: 16\n        });\n      } else if (Math.random() < attacker.data.critical) { // 重击了\n        power *= 2;\n        text = new Sprite.Text({\n          text: \"-\" + power,\n          color: color,\n          fontSize: 32\n        });\n        this.flash();\n        this.decreaseHP(power);\n      } else { // 普通击中\n        text = new Sprite.Text({\n          text: \"-\" + power,\n          color: color,\n          fontSize: 16\n        });\n        this.flash();\n        this.decreaseHP(power);\n      }\n\n      text.centerX = Math.floor(text.width / 2);\n      text.centerY = Math.floor(text.height);\n      text.x = this.sprite.x;\n      text.y = this.sprite.y;\n\n      text.x += Sprite.rand(-10, 10);\n\n      Game.layers.actorLayer.appendChild(text);\n\n      let speed = Sprite.rand(1, 3);\n\n      Sprite.Ticker.whiles(100, (last) => {\n        text.y -= speed;\n        if (last) {\n          Game.layers.actorLayer.removeChild(text);\n        }\n      });\n\n    }\n\n    /** 播放一个动画 */\n    play (animation, priority) {\n      // 新动画默认优先级为0\n      if (typeof priority != \"number\") {\n        priority = 0;\n      }\n\n      // 无动画或者停止状态，现有优先级为-1（最低级）\n      if (typeof this.animationPriority == \"undefined\" || this.sprite.paused == true) {\n        this.animationPriority = -1;\n      }\n\n      if (\n        this.data.animations.hasOwnProperty(animation) &&\n        priority >= this.animationPriority &&\n        animation != this.sprite.currentAnimation\n      ) {\n        this.animationPriority = priority;\n        this.sprite.play(animation);\n      }\n    }\n\n    /** 停止 */\n    stop () {\n      if (!this.sprite.currentAnimation) return;\n\n      if ((this.sprite.paused && !this.sprite.currentAnimation.match(/face/))\n        || this.sprite.currentAnimation.match(/walk|run/)) {\n        switch (this.direction) {\n          case \"up\":\n            this.sprite.play(\"faceup\");\n            break;\n          case \"down\":\n            this.sprite.play(\"facedown\");\n            break;\n          case \"left\":\n            this.sprite.play(\"faceleft\");\n            break;\n          case \"right\":\n            this.sprite.play(\"faceright\");\n            break;\n        }\n      }\n    }\n\n    /** 向指定direction方向释放一个技能 */\n    fire (id, direction) {\n      // 同一时间只能施展一个skill\n      if (this.attacking)\n        return 0;\n\n      let skill = Game.skills[id];\n      if (!skill)\n        return 0;\n\n      // 只有当这个skill的cooldown结\n      let now = new Date().getTime();\n      if ( typeof this.lastAttack == \"number\"\n        && typeof this.lastAttackCooldown == \"number\"\n        && (now - this.lastAttack) < this.lastAttackCooldown)\n        return 0;\n\n      if (skill.data.cost > this.data.sp) {\n        return 0;\n      }\n\n      if (!direction) {\n        direction = this.direction;\n      }\n\n      if (skill.can(this)) {\n\n        this.lastAttack = now;\n        this.lastAttackCooldown = skill.data.cooldown;\n        this.attacking = true;\n\n        this.data.sp -= skill.data.cost;\n        this.refreshBar();\n\n        skill.fire(this, direction, (hitted) => {\n          this.attacking = false;\n          if (hitted.length > 0) {\n            hitted[0].damage(this, skill);\n          }\n        });\n\n        return skill.data.cooldown;\n      } else {\n        return 0;\n      }\n    }\n\n    /** 行走到指定地点 */\n    goto (x, y, state, callback) {\n\n      state = state || \"run\";\n      callback = typeof callback == \"function\" ? callback : function () {};\n\n      if (this.going) {\n        this.goingNext = () => {\n          this.goto(x, y, state, callback);\n        };\n        return \"wait\";\n      }\n\n      let destBlocked = this.checkCollision(x, y);\n\n      if (destBlocked) {\n        if (this.x == x) {\n          if (this.y - y == -1) {\n            this.stop();\n            this.face(\"down\");\n            return callback();\n          } else if (this.y - y == 1) {\n            this.stop();\n            this.face(\"up\");\n            return callback();\n          }\n        } else if (this.y == y) {\n          if (this.x - x == -1) {\n            this.stop();\n            this.face(\"right\");\n            return callback();\n          } else if (this.x - x == 1) {\n            this.stop();\n            this.face(\"left\");\n            return callback();\n          }\n        }\n      }\n\n      let map = [];\n      let height = Game.area.map.blockedMap.length;\n      let width = Game.area.map.blockedMap[0].length;\n\n      map.length = height;\n      for (let i = 0; i < height; i++) {\n        map[i] = [];\n        map[i].length = width;\n      }\n\n      for (let i = 0; i < height; i++) {\n        for (let j = 0; j < width; j++) {\n          if (this.checkCollision(j, i)) {\n            map[i][j] = 0;\n          } else {\n            map[i][j] = 1;\n          }\n        }\n      }\n\n      let destPosition = {\n        x: x,\n        y: y\n      };\n      let after = null;\n      let path = null;\n\n      if (destBlocked == false) {\n        path = Game.Astar.path(map,\n          width,\n          height,\n          {x: this.x, y: this.y}, // 角色现在位置\n          destPosition); // 目的地\n      }\n\n      // 可能因为指定x,y被阻挡，尝试寻路到指定x,y的四个邻接地点\n      if (!path) {\n        let otherChoice = [];\n        if (this.checkCollision(x, y-1) == false) {\n          otherChoice.push({x: x, y: y-1, after: \"down\"});\n        }\n        if (this.checkCollision(x, y+1) == false) {\n          otherChoice.push({x: x, y: y+1, after: \"up\"});\n        }\n        if (this.checkCollision(x-1, y) == false) {\n          otherChoice.push({x: x-1, y: y, after: \"right\"});\n        }\n        if (this.checkCollision(x+1, y) == false) {\n          otherChoice.push({x: x+1, y: y, after: \"left\"});\n        }\n\n        if (otherChoice.length > 0) {\n          for (let element of otherChoice) {\n            // 计算地址距离\n            element.distance = this.distance(element.x, element.y);\n          }\n\n          // 找到四个邻接地址中最近的\n          if (otherChoice.length > 1) {\n            otherChoice.sort((a, b) => {\n              return a.distance - b.distance;\n            });\n          }\n\n          for (let element of otherChoice) {\n            path = Game.Astar.path(\n              map, width, height,\n              {x: this.x, y: this.y},\n              {x: element.x, y: element.y}\n            );\n            if (path) {\n              // 如果找到路径，则不再继续找（这种找法并没找到最优，最优应该是四个path都测试寻找最短）\n              after = element.after;\n              break;\n            }\n          }\n        }\n\n      }\n\n      if (path && path.length && path.length > 1) {\n        this.going = true;\n        let index = 1;\n        let Walk = () => {\n          if (this.goingNext) {\n            let c = this.goingNext;\n            this.goingNext = null;\n            this.going = false;\n            c();\n          } else if (index < path.length) {\n            let current = {x: this.x, y: this.y};\n            let dest = path[index];\n            let direction = null;\n            if (dest.x == current.x) {\n              if (dest.y > current.y) {\n                direction = \"down\";\n              } else if (dest.y < current.y) {\n                direction = \"up\";\n              }\n            } else if (dest.y == current.y) {\n              if (dest.x > current.x) {\n                direction = \"right\"\n              } else if (dest.x < current.x) {\n                direction = \"left\";\n              }\n            }\n\n            if (direction) {\n              let currentDirection = this.direction;\n              if (direction != currentDirection) {\n                this.face(direction);\n              }\n              let goResult = this.go(state, direction, () => Walk());\n              if (goResult != true) {\n                this.going = false;\n              }\n              index++;\n            }\n          } else { // 正常结束\n            if (after) {\n              this.stop();\n              this.face(after);\n            }\n            this.going = false;\n            callback();\n          }\n        }\n        Walk();\n      } else {\n        // 实在没找到路\n        // console.log(\"noway\");\n      }\n    }\n\n    face (direction) {\n      let animation = \"face\" + direction;\n      if (this.animation != animation) {\n        this.sprite.play(animation);\n        this.emit(\"change\");\n      }\n    }\n\n    // 参数t中记录了某个方格的方位xy，测试这个方格是否和玩家有冲突\n    // 返回true为有碰撞，返回false为无碰撞\n    checkCollision (x, y) {\n      // 地图边缘碰撞\n      if (x < 0 || y < 0 || x >= Game.area.map.data.width || y >= Game.area.map.data.height) {\n        return true;\n      }\n      // 地图碰撞\n      if (Game.area.map.hitTest(x, y)) {\n        return true;\n      }\n\n      // 角色碰撞\n      if (Game.area.actors) {\n        for (let actor of Game.area.actors) {\n          if (actor != this && actor.hitTest(x, y)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n\n    hitTest (x, y) {\n      if (this.data.hitArea && this.data.hitArea instanceof Array) {\n        for (let p of this.data.hitArea) {\n          if (x == this.x + p[0] && y == this.y + p[1]) {\n            return true;\n          }\n        }\n        return false;\n      } else {\n        console.error(this.data);\n        throw new Error(\"Game.Actor.hitTest invalid data\");\n      }\n    }\n\n    go (state, direction, callback = null) {\n\n      // 如果正在战斗动画，则不走\n      if (this.sprite.paused == false && this.sprite.currentAnimation.match(/skillcast|thrust|slash|shoot/)) {\n        return false;\n      }\n\n      if (this.walking) {\n        return false;\n      }\n\n      if (this.attacking) {\n        return false;\n      }\n\n      if (this.direction != direction) {\n        this.walking = true;\n        this.face(direction);\n        // wait 4 ticks\n        Sprite.Ticker.after(4, () => {\n          this.walking = false;\n        });\n        return false;\n      }\n\n      let newX = this.x;\n      let newY = this.y;\n\n      let oldPositionKey = `${newX},${newY}`;\n\n      switch (direction) {\n        case \"up\":\n          newY -= 1;\n          break;\n        case \"down\":\n          newY += 1;\n          break;\n        case \"left\":\n          newX -= 1;\n          break;\n        case \"right\":\n          newX += 1;\n          break;\n      }\n\n      let newPositionKey = `${newX},${newY}`;\n\n      if (this.checkCollision(newX, newY) == false) {\n        // 没碰撞，开始行走\n        this.walking = true;\n\n        // 把角色位置设置为新位置，为了占领这个位置，这样其他角色就会碰撞\n        // 但是不能用this.x = newX这样设置，因为this.x的设置会同时设置this.sprite.x\n        this.data.x = newX;\n        this.data.y = newY;\n\n        let speed = 2;\n        if (state == \"run\") {\n          speed = 4;\n        }\n        let times = 32 / speed;\n        let count = 0;\n        let id = null;\n\n        Sprite.Ticker.whiles(times, (last) => {\n          switch (direction) {\n            case \"up\":\n              this.sprite.y -= speed;\n              break;\n            case \"down\":\n              this.sprite.y += speed;\n              break;\n            case \"left\":\n              this.sprite.x -= speed;\n              break;\n            case \"right\":\n              this.sprite.x += speed;\n              break;\n          }\n\n          if (last) {\n            this.x = newX;\n            this.y = newY;\n            this.walking = false;\n            this.emit(\"change\");\n\n            if (typeof callback == \"function\") {\n              Sprite.Ticker.after(2,function () {\n                callback();\n              });\n            }\n\n          }\n        });\n\n        // 播放行走动画\n        this.play(state + direction, 1);\n        return true;\n      }\n\n      this.play(\"face\" + direction, 0);\n\n      return false;\n    }\n\n    /** 在Game.actorLayer上删除人物 */\n    remove () {\n      Game.layers.actorLayer.removeChild(this.sprite);\n      Game.layers.actorLayer.removeChild(internal(this).infoBox);\n    }\n\n    /** 在Game.actorLayer上显示人物 */\n    draw () {\n      if (Number.isInteger(this.x) && Number.isInteger(this.y)) {\n        this.x = this.data.x;\n        this.y = this.data.y;\n\n        internal(this).infoBox.x = this.sprite.x;\n        internal(this).infoBox.y = this.sprite.y - this.sprite.centerY - 20;\n\n        Game.layers.actorLayer.appendChild(this.sprite);\n        Game.layers.actorLayer.appendChild(internal(this).infoBox);\n      } else {\n        console.error(this.data.x, this.data.y, this.data);\n        throw new Error(\"Game.Actor.draw invalid data.x/data.y\");\n      }\n    }\n\n    /** 镜头集中 */\n    focus () {\n      internal(this).infoBox.x = this.sprite.x;\n      internal(this).infoBox.y = this.sprite.y - this.sprite.centerY - 20;\n\n      Game.stage.centerX = Math.round(this.sprite.x - Game.config.width / 2);\n      Game.stage.centerY = Math.round(this.sprite.y - Game.config.height / 2);\n    }\n\n  }); // Game.Actor\n\n})();\n"]}