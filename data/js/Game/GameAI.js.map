{"version":3,"sources":["src/Game/GameAI.js"],"names":[],"mappings":"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","file":"src/Game/GameAI.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function (Game) {\n  \"use strict\";\n\n  Game.AI = class AI {\n\n    static actor () {\n      if (Game.area && Game.area.actors) {\n        Sprite.each(Game.area.actors, function (actor) {\n\n          if (actor.data.type == \"hero\") {\n            var barChanged = false;\n\n            if (actor.data.hp < actor.data.$hp) {\n              actor.data.hp++;\n              barChanged = true;\n            }\n\n            if (actor.data.sp < actor.data.$sp) {\n              actor.data.sp++;\n              barChanged = true;\n            }\n\n            if (barChanged) {\n              actor.refreshBar();\n            }\n          } else if (actor.data.type == \"monster\") {\n\n            var barChanged = false;\n\n            if (actor.data.hp < actor.data.$hp) {\n              actor.data.hp++;\n              barChanged = true;\n            }\n\n            if (actor.data.sp < actor.data.$sp) {\n              actor.data.sp++;\n              barChanged = true;\n            }\n\n            if (barChanged) {\n              actor.refreshBar();\n            }\n\n            if (Game.hero && Game.hero.distance(actor) <= 32) {\n              if (actor.y == Game.hero.y) { // left or right\n                if (actor.x < Game.hero.x) { // left\n                  actor.fire(\"sword01\", \"right\");\n                } else { // right\n                  actor.fire(\"sword01\", \"left\");\n                }\n              } else { // up or down\n                if (actor.y < Game.hero.y) { // up\n                  actor.fire(\"sword01\", \"down\");\n                } else { // down\n                  actor.fire(\"sword01\", \"up\");\n                }\n              }\n            } else if (Game.hero && Game.hero.distance(actor) < 200) {\n              actor.goto(Game.hero.x, Game.hero.y, \"walk\", true);\n            } else if (actor.data.mode == \"patrol\") {\n              if (Math.random() < 0.8) {\n                return;\n              }\n              var x = actor.x;\n              var y = actor.y;\n              actor.goto(x + Sprite.rand(-50, 50), y + Sprite.rand(-50, 50), 4);\n            }\n          }\n        });\n      }\n    }\n\n    static start () {\n      setInterval(function () {\n        Game.AI.actor();\n      }, 500);\n    }\n\n  };\n})(Game);\n"]}