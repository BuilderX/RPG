{"version":3,"sources":["src/Game/GameActorHero.js"],"names":[],"mappings":"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","file":"src/Game/GameActorHero.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  let internal = Sprite.Namespace();\n\n  /**\n    英雄类\n    属性：\n      this.sprite 精灵\n  */\n  Game.assign(\"ActorHero\", class GameActorHero extends Game.Actor {\n    constructor (actorData) {\n      super(actorData);\n      let privates = internal(this);\n      privates.ai = null;\n      privates.beAttacking = new Set();\n\n      this.on(\"kill\", (event) => {\n        let actor = event.data;\n\n        if (this.beAttacking.has(actor)) {\n          this.beAttacking.delete(actor);\n        }\n\n        if (actor.data.exp) {\n          this.data.exp += actor.data.exp;\n        } else {\n          this.data.exp += 1;\n        }\n\n        for (let quest of this.data.currentQuest) {\n          if (quest.target && quest.target.kill) {\n            for (let k of quest.target.kill) {\n              if (actor.id == k.id && k.current < k.need) {\n                k.current++;\n              }\n            }\n          }\n        }\n\n      });\n\n      this.on(\"change\", () => {\n        this.autoHide();\n        this.onto();\n        this.touch();\n      });\n\n      setInterval(() => {\n        if (Game.paused == false) {\n          this.autoHide();\n          this.onto();\n          this.touch();\n        }\n      }, 500);\n    }\n\n    popup (text) {\n      Game.popup(this.sprite, text, 0, -50);\n    }\n\n    get beAttacking () {\n      return internal(this).beAttacking;\n    }\n\n    set beAttacking (value) {\n      throw new Error(\"Game.hero.beAttacking readonly\");\n    }\n\n    hasItem (id, count) {\n      if (Number.isFinite(count) == false || count <= 0) {\n        count = 1;\n      }\n      for (let key in this.data.items) {\n        if (key == id) {\n          if (this.data.items[key] >= count) {\n            return true;\n          } else {\n            return false;\n          }\n        }\n      }\n      return false;\n    }\n\n    hasQuest (id) {\n      for (let quest of this.data.currentQuest) {\n        if (id == quest.id) {\n          return true;\n        }\n      }\n      for (let quest of this.data.completeQuest) {\n        if (id == quest.id) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    damage (attacker, skill) {\n      super.damage(attacker, skill);\n\n      // 如果英雄受到了伤害\n      let touchActor = [];\n      for (let actor of Game.area.actors) {\n        // 找到所有邻接英雄的怪物\n        if (actor != this && actor.data.type == \"monster\" && actor.distance(this) == 1) {\n          touchActor.push(actor);\n        }\n      }\n      if (touchActor.length) {\n        let faceAttacker = false;\n        let facePosition = this.facePosition;\n        touchActor.forEach(function (actor) {\n          if (actor.hitTest(facePosition.x, facePosition.y)) {\n            faceAttacker = true;\n          }\n        });\n        // 如果英雄现在没面对任何一个邻接的怪物，面向它\n        if (faceAttacker == false) {\n          this.goto(touchActor[0].x, touchActor[0].y);\n        }\n      }\n    }\n\n    erase () {\n      let privates = internal(this);\n      super.erase();\n\n      if (privates.ai) {\n        Sprite.Ticker.off(\"tick\", privates.ai);\n        privates.ai = null;\n      }\n    }\n\n    refreshBar () {\n      super.refreshBar();\n      Game.windows.interface.status(\n        this.data.hp / this.data.$hp, // 生命百分比\n        this.data.sp / this.data.$sp // 精神力百分比\n      );\n    }\n\n    draw () {\n      let privates = internal(this);\n      super.draw();\n\n      privates.ai = Sprite.Ticker.on(\"tick\", (event) => {\n\n        let tickCount = event.data;\n\n        // 每秒16个tick\n        if (tickCount % 16 == 0) {\n          let barChanged = false;\n\n          if (this.data.hp < this.data.$hp && this.beAttacking.size <= 0) {\n            this.data.hp++;\n            barChanged = true;\n          }\n\n          if (this.data.sp < this.data.$sp) {\n            this.data.sp++;\n            barChanged = true;\n          }\n\n          if (barChanged) {\n            this.refreshBar();\n            if (Game.windows.status.atop) {\n              Game.windows.status.update();\n            }\n          }\n        }\n\n      });\n\n\n    }\n\n    autoHide () {\n      if (!Game.area) return;\n\n      let heroHide = Game.area.map.hitAutoHide(Game.hero.x, Game.hero.y);\n\n      for (let layer of Game.layers.mapHideLayer.children) {\n\n      // console.log(heroHide, layer.name);\n        if (layer.name == heroHide) {\n          layer.visible = false;\n        } else {\n          layer.visible = true;\n        }\n      }\n\n      // 检查需要隐藏的角色，例如建筑物里的npc\n      for (let actor of Game.area.actors) {\n        if (actor != Game.hero) {\n          let actorHide = Game.area.map.hitAutoHide(actor.x, actor.y);\n          if (actorHide && actorHide == heroHide) {\n            actor.visible = true;\n          } else {\n            if (actorHide) {\n              actor.visible = false;\n            } else {\n              actor.visible = true;\n            }\n          }\n\n          // 当npc紧挨着玩家所在格子的时候，自动面向玩家\n          if (actor.distance(Game.hero) == 1) {\n            let actorFace = actor.facePosition;\n            if (actorFace.x != Game.hero.x || actorFace.y != Game.hero.y) {\n              if (actor.y == Game.hero.y) { // 同一水平\n                if (actor.x < Game.hero.x) { // npc 在玩家左边\n                  actor.face(\"right\");\n                } else if (actor.x > Game.hero.x) { // npc在玩家右边\n                  actor.face(\"left\");\n                }\n              } else if (actor.x == Game.hero.x) { // 同一垂直\n                if (actor.y < Game.hero.y) {\n                  actor.face(\"down\");\n                } else if (actor.y > Game.hero.y) {\n                  actor.face(\"up\");\n                }\n              }\n            }\n          }\n\n\n\n        }\n      }\n\n      // 检查需要隐藏的小包包，例如建筑物中地下玩家扔下的物品\n      for (let bag of Game.area.bags) {\n        let bagHide = Game.area.map.hitAutoHide(bag.x, bag.y);\n        if (bagHide && bagHide == heroHide) {\n          bag.visible = true;\n        } else {\n          if (bagHide) {\n            bag.visible = false;\n          } else {\n            bag.visible = true;\n          }\n        }\n      }\n\n      // 检查需要隐藏的小包包，例如建筑物中地下玩家扔下的物品\n      for (let item of Game.area.items) {\n        let itemHide = Game.area.map.hitAutoHide(item.x, item.y);\n        if (itemHide && itemHide == heroHide) {\n          item.visible = true;\n        } else {\n          if (itemHide) {\n            item.visible = false;\n          } else {\n            item.visible = true;\n          }\n        }\n      }\n\n    }\n\n    gotoArea (dest, x, y) {\n      Game.pause();\n      Game.windows.loading.begin();\n      Game.windows.loading.update(\"20%\");\n      setTimeout(function () {\n\n        Game.clearStage();\n        Game.windows.loading.update(\"50%\");\n\n        setTimeout(function () {\n\n          Game.loadArea(dest).then(function (area) {\n\n            Game.area = area;\n            Game.windows.loading.update(\"80%\");\n\n            setTimeout(function () {\n\n              Game.hero.data.area = dest;\n              Game.hero.draw();\n              Game.hero.x = x;\n              Game.hero.y = y;\n              area.actors.add(Game.hero);\n\n              area.map.draw();\n              Game.windows.loading.update(\"100%\");\n\n              setTimeout(function () {\n\n                Game.hero.x = x;\n                Game.hero.y = y;\n                Game.hero.data.time += 60; // 加一小时\n                Game.windows.loading.end();\n                Game.windows.interface.datetime();\n                Game.windows.interface.refresh();\n                Game.windows.interface.show();\n                Game.start();\n              }, 20);\n            }, 20);\n          });\n\n        }, 20);\n      }, 20);\n    }\n\n    onto () {\n      if (!Game.area) return;\n      if (!Game.area.onto) return;\n\n      let heroPosition = Game.hero.position;\n      let onto = null;\n\n      let FindUnderHero = function (element) {\n        if (onto != null || element == Game.hero) {\n          return;\n        }\n        if (element.hitTest && element.hitTest(heroPosition.x, heroPosition.y)) {\n          onto = element;\n        } else if (element.x == heroPosition.x && element.y == heroPosition.y) {\n          onto = element;\n        }\n      }\n      // 找最近可“事件”人物 Game.area.actors\n      Sprite.each(Game.area.onto, FindUnderHero);\n      if (onto) {\n        if (onto.execute) {\n          onto.execute();\n        }\n      } // touch\n    }\n\n    touch () {\n      if (!Game.area) return;\n\n      let heroPosition = Game.hero.position;\n      let heroFace = Game.hero.facePosition;\n      let touch = null;\n\n      let FindUnderHero = function (element) {\n        if (touch != null || element == Game.hero) {\n          return;\n        }\n        if (element.heroUse) {\n          if (element.hitTest && element.hitTest(heroPosition.x, heroPosition.y)) {\n            touch = element;\n          } else if (element.x == heroPosition.x && element.y == heroPosition.y) {\n            touch = element;\n          }\n        }\n      }\n\n      let FindFaceHero = function (element) {\n        if (touch != null || element == Game.hero) {\n          return;\n        }\n        if (element.heroUse) {\n          if (element.hitTest && element.hitTest(heroFace.x, heroFace.y)) {\n            touch = element;\n          } else if (element.x == heroFace.x && element.y == heroFace.y) {\n            touch = element;\n          }\n        }\n      }\n\n      // 找最近可“事件”人物 Game.area.actors\n      Sprite.each(Game.area.actors, FindUnderHero);\n      // 找最近尸体 Game.area.bags\n      Sprite.each(Game.area.bags, FindUnderHero);\n      // 找最近物品 Game.area.items\n      Sprite.each(Game.area.items, FindUnderHero);\n      // 最近的提示物（例如牌子）\n      Game.area.touch.forEach(FindUnderHero);\n\n      // 找最近可“事件”人物 Game.area.actors\n      Sprite.each(Game.area.actors, FindFaceHero);\n      // 找最近尸体 Game.area.bags\n      Sprite.each(Game.area.bags, FindFaceHero);\n      // 找最近尸体 Game.area.items\n      Sprite.each(Game.area.items, FindFaceHero);\n      // 最近的提示物（例如牌子）\n      Game.area.touch.forEach(FindFaceHero);\n      // 水源\n      if (!touch && Game.area.map.hitWater(heroFace.x, heroFace.y)) {\n        touch = {\n          type: \"water\",\n          heroUse: function () {\n            Game.popup(Game.hero.sprite, \"This is water\", 0, -50);\n          }\n        };\n      }\n\n      if (!touch) {\n        Game.hintObject = null;\n        Game.windows.interface.hideUse();\n      } else {\n        Game.hintObject = touch;\n        Game.windows.interface.showUse();\n      }\n    }\n\n\n  });\n\n\n})();\n"]}