{"version":3,"sources":["src/Game/GameWindowInterface.js"],"names":[],"mappings":"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","file":"src/Game/GameWindowInterface.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  var win = Game.windows.interface = new Game.Window(\"interfaceWindow\");\n\n  win.html(`\n    <div id=\"interfaceWindowBar\"></div>\n\n    <div style=\"position: absolute; bottom: 10px; left: 20px; width: 100px; height: 60px;\">\n      <div style=\"width: 100px; height: 20px; margin: 5px 0; border: 1px solid gray; background-color: white;\">\n        <div id=\"interfaceWindowHP\" style=\"width: 100%; height: 100%; background-color: green;\"></div>\n      </div>\n      <div style=\"width: 100px; height: 20px; margin: 5px 0; border: 1px solid gray; background-color: white;\">\n        <div id=\"interfaceWindowSP\" style=\"width: 100%; height: 100%; background-color: blue;\"></div>\n      </div>\n    </div>\n\n    <span id=\"interfaceWindowMap\"></span>\n    <span id=\"interfaceWindowDatetime\"></span>\n\n    <button id=\"interfaceWindowUse\" class=\"interfaceWindowButton\"></button>\n    <button id=\"interfaceWindowMenu\" class=\"interfaceWindowButton\"></button>\n  `);\n\n  win.css(`\n\n    #interfaceWindowBar {\n      text-align: center;\n      position: absolute;\n      bottom: 10px;\n      width: 100%;\n      height: 60px;\n    }\n\n    #interfaceWindow {\n      pointer-events: none;\n    }\n\n    button.interfaceWindowButton {\n      margin-left: 3px;\n      margin-right: 3px;\n      width: 60px;\n      height: 60px;\n      border: 4px solid gray;\n      border-radius: 10px;\n      background-color: rgba(100, 100, 100, 0.5);\n      display: inline-block;\n      pointer-events: auto;\n      background-repeat: no-repeat;\n      background-size: cover;\n    }\n\n    button.interfaceWindowButton:hover {\n      opacity: 0.5;\n    }\n\n    button.interfaceWindowButton > img {\n      width: 100%;\n      height: 100%;\n    }\n\n    span#interfaceWindowMap {\n      position: absolute:\n      top: 0px;\n      background-color: rgba(100, 100, 100, 0.7);\n      display: inline-block;\n    }\n\n    span#interfaceWindowDatetime {\n      position: absolute:\n      top: 200px;\n      left: 0;\n      background-color: rgba(100, 100, 100, 0.7);\n      display: inline-block;\n    }\n\n    button#interfaceWindowUse {\n      position: absolute;\n      top: 5px;\n      right: 85px;\n      visibility: hidden;\n      background-image: url(\"image/hint.png\");\n    }\n\n    button#interfaceWindowMenu {\n      position: absolute;\n      top: 5px;\n      right: 5px;\n      background-image: url(\"image/setting.png\");\n    }\n\n    button.interfaceWindowButton:disabled {\n      cursor: default;\n      pointer-events: none;\n      background-color: gray;\n      opacity: 0.5;\n    }\n  `);\n\n  win.use = document.querySelector(\"button#interfaceWindowUse\");\n\n  var interfaceWindowBar = document.querySelector(\"div#interfaceWindowBar\");\n\n  var interfaceWindowMap = document.querySelector(\"span#interfaceWindowMap\");\n  var interfaceWindowMenu = document.querySelector(\"button#interfaceWindowMenu\");\n\n  Sprite.Input.whenUp([\"esc\"], function (key) {\n    if (Game.windows.interface.atop) {\n      setTimeout(function () {\n        interfaceWindowMenu.click();\n      }, 20);\n    }\n  });\n\n  // 设置技能栏\n  for (let i = 0; i < 8; i++) {\n    (function (index) {\n      var button = document.createElement(\"button\");\n      button.id = `interfaceWindowButton-${index}`;\n      button.classList.add(\"interfaceWindowButton\");\n      interfaceWindowBar.appendChild(button);\n\n      var text = document.createElement(\"label\");\n      text.id = `interfaceWindowButtonText-${index}`;\n      text.style.position = \"absolute\";\n      text.style.backgroundColor = \"white\";\n      text.style.marginLeft = \"-26px\";\n      text.style.marginTop = \"12px\";\n      button.appendChild(text);\n\n      button.addEventListener(\"click\", function (event) {\n        var element = Game.hero.data.bar[index];\n        if (element) {\n          if (element.type == \"skill\")\n            Game.hero.fire(element.id);\n          else if (element.type == \"item\") {\n            var itemId = element.id;\n            var item = Game.items[itemId];\n            item.use(Game.hero);\n            Game.hero.data.items[itemId]--;\n            if (Game.hero.data.items[itemId] <= 0) {\n              delete Game.hero.data.items[itemId];\n              Game.hero.data.bar[index] = null;\n            }\n            Game.windows.interface.execute(\"refresh\");\n          }\n        }\n      });\n    })(i);\n  }\n\n  function SkillFire (num) {\n    var element = Game.hero.data.bar[num];\n    if (element) {\n      if (element.type == \"skill\") {\n        var cooldown = Game.hero.fire(element.id);\n        var button = document.querySelector(`#interfaceWindowButton-${num}`);\n        button.disabled = true;\n        setTimeout(function () {\n          button.disabled = false;\n        }, cooldown);\n        //button.style.disabled = \"true\";\n      } else if (element.type == \"item\") {\n\n      }\n    }\n  }\n\n  Sprite.Input.whenUp([\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\"], function (key) {\n    var num = parseInt(key);\n    // 只有在interface窗口是only存在的时候才使用快捷键\n    if (Number.isInteger(num) && Game.windows.interface.atop) {\n      SkillFire(num - 1);\n    }\n  });\n\n  Sprite.Input.whenUp([\"e\", \"E\"], function (key) {\n    if (Game.windows.interface.showing) {\n      if (Game.hintObject) {\n        win.use.click();\n      }\n    }\n  });\n\n  win.use.addEventListener(\"click\", function (event) {\n    if (Game.hintObject) {\n      if (Game.hintObject.type && Game.hintObject.type == \"door\") {\n\n        Game.windows.loading.execute(\"begin\");\n\n        setTimeout(function () {\n          var destx = Game.hintObject.destx;\n          var desty = Game.hintObject.desty;\n          Game.clearStage();\n          Game.pause();\n          var newArea = Game.hintObject.dest;\n\n          Game.loadArea(newArea, function (area) {\n\n            Game.area = area;\n            area.map.draw(Game.layers.mapLayer);\n\n            Game.hero.data.area = newArea;\n            Game.hero.draw(Game.layers.actorLayer);\n            area.actors.add(Game.hero);\n            Game.hero.x = destx;\n            Game.hero.y = desty;\n            Game.windows.interface.show();\n            Game.start();\n\n            Game.windows.loading.execute(\"end\");\n          });\n        }, 100);\n\n      } else if (Game.hintObject.type && Game.hintObject.type == \"chest\") {\n      } else if (Game.hintObject.type && Game.hintObject.type == \"hint\") {\n        Game.popup(Game.hintObject, Game.hintObject.message)\n      } else if (Game.hintObject instanceof Game.Actor) {\n        Game.hintObject.contact();\n      }\n      else if (Game.hintObject instanceof Game.Item) {\n        Game.hintObject.pickup();\n      }\n    }\n  });\n\n  win.register(\"status\", function (hp, sp) {\n    var interfaceWindowHP = document.querySelector(\"#interfaceWindowHP\");\n    var interfaceWindowSP = document.querySelector(\"#interfaceWindowSP\");\n    interfaceWindowHP.style.width = `${hp*100}%`;\n    interfaceWindowSP.style.width = `${sp*100}%`;\n    if (hp >= 0.5) {\n      interfaceWindowHP.style.backgroundColor = \"green\";\n    } else if (hp >= 0.25) {\n      interfaceWindowHP.style.backgroundColor = \"yellow\";\n    } else {\n      interfaceWindowHP.style.backgroundColor = \"red\";\n    }\n  });\n\n  win.register(\"datetime\", function () {\n    if (Game.hero && Game.hero.data && Number.isInteger(Game.hero.data.time)) {\n      var YEARMIN = 60*24*30*12;\n      var MONTHMIN = 60*24*30;\n      var DAYMIN = 60*24;\n      var HOURMIN = 60;\n      var datetime = document.querySelector(\"span#interfaceWindowDatetime\");\n      var time = Game.hero.data.time;\n      var year = Math.floor(time/YEARMIN);\n      time = time % YEARMIN;\n      var month = Math.floor(time/MONTHMIN);\n      time = time % MONTHMIN;\n      var day = Math.floor(time/DAYMIN);\n      time = time % DAYMIN;\n      var hour = Math.floor(time/HOURMIN);\n      time = time % HOURMIN;\n      var minute = time;\n      year++;\n      month++;\n      day++;\n      hour = hour.toString();\n      while (hour.length < 2) hour = \"0\"+hour;\n      minute = minute.toString();\n      while (minute.length < 2) minute = \"0\"+minute;\n      datetime.textContent = `帝国历${year}年${month}月${day}日 ${hour}:${minute}`;\n\n      if (Game.area && Game.area.map && Game.area.map.data.type == \"outdoor\") {\n        if (hour >= 20 || hour < 4) { // 20:00 to 4:00\n          Game.stage.filter(\"brightness\", -0.15);\n        } else if (hour >= 4 && hour < 6) {\n          Game.stage.filter(\"brightness\", -0.1);\n        } else if (hour >= 6 && hour < 8) {\n          Game.stage.filter(\"brightness\", -0.05);\n        } else if (hour >= 8 && hour < 10) {\n          Game.stage.filter(\"brightness\", 0.0);\n        } else if (hour >= 10 && hour < 12) {\n          Game.stage.filter(\"brightness\", 0.05);\n        } else if (hour >= 12 && hour < 14) {\n          Game.stage.filter(\"brightness\", 0.0);\n        } else if (hour >= 14 && hour < 16) {\n          Game.stage.filter(\"brightness\", 0.0);\n        } else if (hour >= 16 && hour < 18) {\n          Game.stage.filter(\"brightness\", -0.05);\n        } else if (hour >= 18 && hour < 20) {\n          Game.stage.filter(\"brightness\", -0.1);\n        }\n      }\n\n    }\n  });\n\n  setInterval(function () {\n    if (Game.hero) {\n      Game.hero.data.time++;\n      Game.windows.interface.execute(\"datetime\");\n    }\n  }, 1000);\n\n  win.register(\"refresh\", function () {\n    for (let i = 0; i < 8; i++) {\n      var element = Game.hero.data.bar[i];\n      var button = document.querySelector(`#interfaceWindowButton-${i}`);\n      var text = document.querySelector(`#interfaceWindowButtonText-${i}`);\n\n      if (element) {\n        var id = element.id;\n        var type = element.type;\n        if (type == \"skill\") {\n          var skill = Game.skills[id];\n          button.style.backgroundImage = `url(\"${skill.icon.src}\")`;\n          text.textContent = skill.data.cost;\n        } else if (type == \"item\") {\n          var item = Game.items[id];\n          button.style.backgroundImage = `url(\"${item.icon.src}\")`;\n          text.textContent = Game.hero.data.items[id];\n        }\n      } else {\n        // empty bar element\n        text.textContent = \"\";\n        button.style.backgroundImage = \"\";\n      }\n    }\n\n    interfaceWindowMap.textContent = Game.area.map.data.name;\n  });\n\n  win.on(\"beforeShow\", function () {\n    Game.windows.interface.execute(\"refresh\");\n  });\n\n  interfaceWindowMenu.addEventListener(\"click\", function (event) {\n    Game.windows.sysmenu.show();\n  });\n\n}());\n"]}