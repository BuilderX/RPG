{"version":3,"sources":["src/Game/Game.js"],"names":[],"mappings":"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","file":"src/Game/Game.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  // root级别api入口\n  var Game = window.Game = {\n    items: {\n      // 保存items的Game.Item对象缓存\n    },\n    skills: {\n      // 保存skills的Game.Skill对象缓存\n    },\n    layers: {\n      // 保存Stage中的Layer的对象\n    },\n    config: { // 保存所有设置（默认设置）\n      walk: 4, // 角色行走速度\n      run: 8, // 角色跑动速度\n      width: 800, // 渲染窗口的原始大小\n      height: 450,\n      scale: false, // 如果不拉伸，那么无论浏览器窗口多大，都是原始大小；拉伸则按比例填满窗口\n      fps: 35, // 锁定fps到指定数值，如果设置为<=0，则不限制\n    }\n  };\n\n\n  Game.clearStage = function () {\n    for (var i = 0; i < Game.stage.children.length; i++) {\n      Game.stage.children[i].clear();\n    }\n  };\n\n  Game.init = function () {\n\n    Game.stage = new Sprite.Stage(Game.config.width, Game.config.height);\n    document.body.appendChild(Game.stage.canvas);\n    Game.stage.canvas.style.position = \"fixed\";\n\n    Game.layers.mapLayer = new Sprite.Container();\n    Game.layers.mapLayer.name = \"mapLayer\";\n\n    Game.layers.itemLayer = new Sprite.Container();\n    Game.layers.itemLayer.name = \"itemLayer\";\n\n    Game.layers.actorLayer = new Sprite.Container();\n    Game.layers.actorLayer.name = \"actorLayer\";\n\n    Game.layers.infoLayer = new Sprite.Container();\n    Game.layers.infoLayer.name = \"inforLayer\";\n\n    //Game.layers.heroLayer = new Sprite.Container();\n    //Game.layers.heroLayer.name = \"heroLayer\";\n\n    Game.layers.skillLayer = new Sprite.Container();\n    Game.layers.skillLayer.name = \"skillLayer\";\n\n    Game.layers.dialogueLayer = new Sprite.Container();\n    Game.layers.dialogueLayer.name = \"dialogueLayer\";\n\n    Game.stage.appendChild(\n      Game.layers.mapLayer,\n      Game.layers.itemLayer,\n      Game.layers.actorLayer,\n      Game.layers.infoLayer,\n      Game.layers.skillLayer,\n      Game.layers.dialogueLayer\n    );\n\n    Game.stage.on(\"drawStart\", function () {\n      if (Game.hero) {\n        Game.layers.actorLayer.children.sort(function (a, b) {\n          if (a.y < b.y) return -1;\n          if (a.y > b.y) return 1;\n          return 0;\n        });\n      }\n    });\n\n    Sprite.Ticker.on(\"tick\", function () {\n      Game.stage.update();\n    });\n\n    var fps = 0;\n    var start = new Date().getTime();\n    Game.stage.on(\"drawEnd\", function () {\n      fps++;\n    });\n    setInterval(function () {\n      var now = new Date().getTime();\n      var f = fps / ((now - start)/1000);\n      fps = 0;\n      start = now;\n      document.getElementById(\"fps\").innerHTML = f.toFixed(2);\n    }, 1000);\n\n\n    Game.Window.resize();\n\n    console.log(\"RPG Game Flying!\");\n  };\n\n\n\n})();\n"]}