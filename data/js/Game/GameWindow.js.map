{"version":3,"sources":["src/Game/GameWindow.js"],"names":[],"mappings":"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","file":"src/Game/GameWindow.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  let internal = Sprite.Namespace();\n\n  let windows = {};\n  Game.windows = windows;\n\n  let zIndex = 227;\n\n  Game.assign(\"Window\", class GameWindow {\n    static create (id) {\n      let win = new GameWindowObject(id)\n      windows[id] = win;\n      return win;\n    }\n\n    static clear () {\n      let nodes = document.getElementsByClassName(\"game-window\");\n      for (let i = 0; i < nodes.length; i++) {\n        nodes[i].style.display = \"none\";\n      }\n    }\n\n    // 当窗口大小改变时改变游戏窗口大小\n    static resize () {\n      let width = window.innerWidth;\n      let height = window.innerHeight;\n      let scale = 1;\n      let leftMargin = 0;\n      let topMargin = 0;\n\n      if (Game.config.scale == false) {\n        // 不拉伸游戏窗口，按原始大小计算窗口居中\n        leftMargin = Math.floor((width - Game.config.width) / 2);\n        topMargin = Math.floor((height - Game.config.height) / 2);\n      } else {\n        // 拉伸游戏窗口，首先计算游戏原始大小比例\n        let ratio = Game.config.width / Game.config.height;\n        // width first\n        let w = width;\n        let h = w / ratio;\n        // then height\n        if (h > height) {\n          h = height;\n          w = h * ratio;\n        }\n\n        w = Math.floor(w);\n        h = Math.floor(h);\n        leftMargin = Math.floor((width - w) / 2);\n        topMargin = Math.floor((height - h) / 2);\n\n        scale = Math.min(\n          w / Game.config.width,\n          h / Game.config.height\n        );\n\n        scale = scale.toFixed(3);\n      }\n\n      // html窗口拉伸（css中控制了原始大小）\n      let elements = document.getElementsByClassName(\"game-window\");\n      for (let i = 0; i < elements.length; i++) {\n        elements[i].style.transformOrigin = \"0 0 0\";\n        elements[i].style.transform = `scale(${scale}, ${scale})`;\n        elements[i].style.left = `${leftMargin}px`;\n        elements[i].style.top = `${topMargin}px`;\n      }\n\n      if (Game.hero) {\n        Game.hero.focus();\n      }\n\n    }\n  });\n\n  Game.Window.resize();\n  window.addEventListener(\"resize\", function () {\n    Game.Window.resize();\n  });\n\n  class GameWindowObject extends Sprite.Event {\n    /**\n     * @constructor\n     */\n    constructor (id) {\n      super();\n\n      let pp = internal(this);\n      pp.id = id;\n      pp.css = document.createElement(\"style\");\n      pp.html = document.createElement(\"div\");\n      pp.index = -1;\n\n      pp.html.id = id + \"Window\";\n      pp.html.classList.add(\"game-window\");\n      pp.html.style.display = \"none\";\n      document.body.appendChild(pp.html);\n      document.body.appendChild(pp.css)\n\n      pp.html.addEventListener(\"mousedown\", (event) => {\n        let x = event.clientX;\n        let y = event.clientY;\n\n        let left = null;\n        let top = null;\n        let scale = null;\n\n        if (pp.html.style.left) {\n          let t = pp.html.style.left.match(/(\\d+)px/);\n          if (t) {\n            left = parseInt(t[1]);\n          }\n        }\n\n        if (pp.html.style.top) {\n          let t = pp.html.style.top.match(/(\\d+)px/);\n          if (t) {\n            top = parseInt(t[1]);\n          }\n        }\n\n        if (pp.html.style.transform) {\n          let t = pp.html.style.transform.match(/scale\\(([\\d\\.]+), ([\\d\\.]+)\\)/);\n          if (t) {\n            scale = parseFloat(t[1]);\n          }\n        }\n\n        if (typeof left == \"number\" && typeof top == \"number\" && typeof scale == \"number\") {\n          x -= left;\n          y -= top;\n          x /= scale;\n          y /= scale;\n          this.emit(\"mousedown\", false, {\n            x: x,\n            y: y\n          });\n        }\n      });\n    }\n\n    whenPress (keys, callback) {\n      Sprite.Input.whenPress(keys, (key) => {\n        if (this.atop) {\n          callback(key);\n        }\n      });\n      return this;\n    }\n\n    whenUp (keys, callback) {\n      Sprite.Input.whenUp(keys, (key) => {\n        if (this.atop) {\n          callback(key);\n        }\n      });\n      return this;\n    }\n\n    whenDown (keys, callback) {\n      Sprite.Input.whenDown(keys, (key) => {\n        if (this.atop) {\n          callback(key);\n        }\n      });\n      return this;\n    }\n\n    assign (name, object) {\n      Object.defineProperty(this, name, {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: object\n      });\n\n      return this;\n    }\n\n    show () {\n      if (this.showing == false && internal(this).html) {\n        this.emit(\"beforeShow\");\n\n        for (let key in windows) {\n          if (windows[key].atop) {\n            windows[key].emit(\"deactive\");\n          }\n        }\n\n        internal(this).index = zIndex;\n        internal(this).html.style.zIndex = internal(this).index;\n        internal(this).html.style.display = \"block\";\n        zIndex++;\n        this.emit(\"afterShow\");\n        this.emit(\"active\");\n      }\n      return this;\n    }\n\n    hide () {\n      if (internal(this).html) {\n        this.emit(\"beforeHide\");\n        internal(this).index = -1;\n        internal(this).html.style.zIndex = this._index;\n        internal(this).html.style.display = \"none\";\n        this.emit(\"afterHide\");\n        this.emit(\"deactive\");\n\n        for (let key in windows) {\n          if (windows[key].atop) {\n            windows[key].emit(\"active\");\n          }\n        }\n      }\n      return this;\n    }\n\n    get index () {\n      return internal(this).index;\n    }\n\n    set index (value) {\n      console.error(this);\n      throw new Error(\"Game.Window.index readonly\");\n    }\n\n    get showing () {\n      if (internal(this).html && internal(this).html.style.display != \"none\") {\n        return true;\n      }\n      return false;\n    }\n\n    set showing (value) {\n      throw new Error(\"Game.Window.showing readonly\");\n    }\n\n    get atop () {\n      for (let key in windows) {\n        if (windows[key].showing && windows[key].index > this.index) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    set atop (value) {\n      throw new Error(\"Game.Window.atop readonly\");\n    }\n\n    get html () {\n      return internal(this).html.innerHTML;\n    }\n\n    set html (value) {\n      internal(this).html.innerHTML = value;\n    }\n\n    get css () {\n      return internal(this).css.innerHTML;\n    }\n\n    set css (value) {\n      internal(this).css.innerHTML = value;\n    }\n\n    clear () {\n      internal(this).html.innerHTML = \"\";\n      return this;\n    }\n\n    appendChild (domElement) {\n      internal(this).html.appendChild(domElement);\n      return this;\n    }\n\n    removeChild (domElement) {\n      internal(this).html.removeChild(domElement);\n      return this;\n    }\n\n  };\n\n})();\n"]}