{"version":3,"sources":["../../../src/Game/GameWindowSell.js"],"names":[],"mappings":"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","file":"GameWindowSell.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  let win = Game.windows.sell = Game.Window.create(\"sellWindow\");\n\n  win.html = `\n  <div class=\"window-box\">\n    <div id=\"sellWindowItemBar\">\n\n      <button id=\"sellWindowClose\" class=\"brownButton\">关闭</button>\n      <button id=\"sellWindowBuy\" class=\"brownButton\">买入</button>\n\n      <button id=\"sellWindowAll\" class=\"brownButton\">全部</button>\n      <button id=\"sellWindowWeapon\" class=\"brownButton\">武器</button>\n      <button id=\"sellWindowArmor\" class=\"brownButton\">护甲</button>\n      <button id=\"sellWindowPotion\" class=\"brownButton\">药水</button>\n      <button id=\"sellWindowMaterial\" class=\"brownButton\">材料</button>\n      <button id=\"sellWindowBook\" class=\"brownButton\">书籍</button>\n      <button id=\"sellWindowMisc\" class=\"brownButton\">其他</button>\n    </div>\n\n    <span id=\"sellWindowGold\"></span>\n\n    <div style=\"overflow: auto; height: 300px;\">\n      <table border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\n        <thead>\n          <tr>\n            <td style=\"width: 40px;\"></td>\n            <td style=\"width: 120px;\"></td>\n            <td style=\"width: 30px;\"></td>\n            <td style=\"width: 30px;\"></td>\n            <td></td>\n            <td style=\"width: 60px;\"></td>\n          </tr>\n        </thead>\n        <tbody id=\"sellWindowTable\"></tbody>\n      </table>\n    </div>\n  </div>\n  `;\n\n  win.css = `\n    #sellWindowItemBar > button {\n      width: 60px;\n      height: 40px;\n      font-size: 16px;\n      margin-left: 5px;\n      margin-right: 5px;\n      margin-top: 0px;\n      margin-bottom: 5px;\n    }\n\n    #sellWindowClose {\n      float: right;\n    }\n\n    #sellWindowStatus {\n      float: right;\n    }\n\n    .sellWindow table {\n      width: 100%;\n    }\n\n    .sellWindow table img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .sellWindow table button {\n      width: 60px;\n      height: 40px;\n      font-size: 16px;\n    }\n\n    #sellWindowGold {\n      position: absolute;\n      right: 100px;\n      bottom: 30px;\n      font-size: 20px;\n      color: black;\n    }\n  `;\n\n  let sellWindowClose = win.querySelector(\"button#sellWindowClose\");\n  let sellWindowBuy = win.querySelector(\"button#sellWindowBuy\");\n\n  let sellWindowAll = win.querySelector(\"button#sellWindowAll\");\n  let sellWindowWeapon = win.querySelector(\"button#sellWindowWeapon\");\n  let sellWindowArmor = win.querySelector(\"button#sellWindowArmor\");\n  let sellWindowPotion = win.querySelector(\"button#sellWindowPotion\");\n  let sellWindowMaterial = win.querySelector(\"button#sellWindowMaterial\");\n  let sellWindowBook = win.querySelector(\"button#sellWindowBook\");\n  let sellWindowMisc = win.querySelector(\"button#sellWindowMisc\");\n\n  let sellWindowGold = win.querySelector(\"span#sellWindowGold\");\n  let sellWindowTable = win.querySelector(\"#sellWindowTable\");\n\n  let lastItems = null;\n  let lastFilter = null;\n  let lastSelect = -1;\n\n  sellWindowClose.addEventListener(\"click\", function () {\n    win.hide();\n  });\n\n  sellWindowBuy.addEventListener(\"click\", function () {\n    win.hide();\n    Game.windows.buy.open(lastItems);\n  });\n\n  win.whenUp([\"tab\"], function () {\n    setTimeout(function () {\n      win.hide();\n      Game.windows.buy.open(lastItems);\n    }, 20);\n  });\n\n  sellWindowAll.addEventListener(\"click\", function (event) {\n    win.open(lastItems, null);\n  });\n\n  sellWindowWeapon.addEventListener(\"click\", function (event) {\n    win.open(lastItems, \"sword|spear|bow\");\n  });\n\n  sellWindowArmor.addEventListener(\"click\", function (event) {\n    win.open(lastItems, \"head|body|feet\");\n  });\n\n  sellWindowPotion.addEventListener(\"click\", function (event) {\n    win.open(lastItems, \"potion\");\n  });\n\n  sellWindowMaterial.addEventListener(\"click\", function (event) {\n    win.open(lastItems, \"material\");\n  });\n\n  sellWindowBook.addEventListener(\"click\", function (event) {\n    win.open(lastItems, \"book|scroll|letter\");\n  });\n\n  sellWindowMisc.addEventListener(\"click\", function (event) {\n    win.open(lastItems, \"misc\");\n  });\n\n  win.assign(\"open\", function (items, filter, select) {\n\n    if (typeof select == \"undefined\") {\n      select = -1;\n    }\n\n    lastItems = items;\n    lastFilter = filter;\n    lastSelect = select;\n\n    sellWindowGold.textContent = Game.hero.data.gold + \"G\";\n\n    let defaultColor = \"white\";\n    let activeColor = \"yellow\";\n\n    sellWindowAll.style.color = defaultColor;\n    sellWindowWeapon.style.color = defaultColor;\n    sellWindowArmor.style.color = defaultColor;\n    sellWindowPotion.style.color = defaultColor;\n    sellWindowMaterial.style.color = defaultColor;\n    sellWindowBook.style.color = defaultColor;\n    sellWindowMisc.style.color = defaultColor;\n\n    if (filter == null) {\n      sellWindowAll.style.color = activeColor;\n    } else if (filter.match(/sword/)) {\n      sellWindowWeapon.style.color = activeColor;\n    } else if (filter.match(/head/)) {\n      sellWindowArmor.style.color = activeColor;\n    } else if (filter.match(/potion/)) {\n      sellWindowPotion.style.color = activeColor;\n    } else if (filter.match(/material/)) {\n      sellWindowMaterial.style.color = activeColor;\n    } else if (filter.match(/book/)) {\n      sellWindowBook.style.color = activeColor;\n    } else if (filter.match(/misc/)) {\n      sellWindowMisc.style.color = activeColor;\n    }\n\n    let index = 0;\n    let table = \"\";\n    Sprite.each(Game.hero.data.items, function (itemCount, itemId) {\n      let item = Game.items[itemId];\n\n      if (filter && filter.indexOf(item.data.type) == -1)\n        return;\n\n      let line = \"\";\n\n      if (select == index) {\n        line += `<tr style=\"background-color: green;\">\\n`;\n      } else {\n        line += `<tr>\\n`;\n      }\n\n\n      if (item.icon) {\n        line += `  <td><img alt=\"\" src=\"${item.icon.src}\"></td>\\n`;\n      } else {\n        line += `  <td> </td>\\n`;\n      }\n      line += `  <td>${item.data.name}</td>\\n`;\n      line += `  <td style=\"text-align: center;\">${Math.ceil(item.data.value * 0.8)}G</td>\\n`;\n      line += `  <td style=\"text-align: center;\">${itemCount}</td>\\n`;\n      line += `  <td>${item.data.description}</td>\\n`;\n      line += `  <td><button data-id=\"${itemId}\" class=\"brownButton\">卖出</button></td>\\n`;\n\n      line += \"</tr>\\n\";\n      table += line;\n      index++;\n    });\n\n    sellWindowTable.innerHTML = table;\n    win.show();\n  });\n\n  win.whenUp([\"enter\"], function () {\n    let buttons = sellWindowTable.querySelectorAll(\"button\");\n    if (lastSelect >= 0 && lastSelect < buttons.length) {\n      buttons[lastSelect].click();\n    }\n  });\n\n  win.whenUp([\"up\", \"down\"], function (key) {\n    let count = sellWindowTable.querySelectorAll(\"button\").length;\n    if (count <= 0) return;\n\n    if (lastSelect == -1) {\n      if (key == \"down\") {\n        win.open(lastItems, lastFilter, 0);\n      } else if (key == \"up\") {\n        win.open(lastItems, lastFilter, count - 1);\n      }\n    } else {\n      if (key == \"down\") {\n        let select = lastSelect + 1;\n        if (select >= count) {\n          select = 0;\n        }\n        win.open(lastItems, lastFilter, select);\n      } else if (key == \"up\") {\n        let select = lastSelect - 1;\n        if (select < 0) {\n          select = count - 1;\n        }\n        win.open(lastItems, lastFilter, select);\n      }\n    }\n  });\n\n  win.whenUp([\"esc\"], function () {\n    setTimeout(function () {\n      win.hide();\n    }, 20);\n  });\n\n  win.whenUp([\"left\", \"right\"], function (key) {\n    if (key == \"right\") {\n      let filter = lastFilter;\n      if (filter == null) {\n        filter = \"sword\";\n      } else if (filter.match(/sword/)) {\n        filter = \"head\";\n      } else if (filter.match(/head/)) {\n        filter = \"potion\";\n      } else if (filter.match(/potion/)) {\n        filter = \"material\";\n      } else if (filter.match(/material/)) {\n        filter = \"book\";\n      } else if (filter.match(/book/)) {\n        filter = \"misc\";\n      } else if (filter.match(/misc/)) {\n        filter = null;\n      }\n      win.open(lastItems, filter);\n    } else if (key == \"left\") {\n      let filter = lastFilter;\n      if (filter == null) {\n        filter = \"misc\";\n      } else if (filter.match(/sword/)) {\n        filter = null;\n      } else if (filter.match(/head/)) {\n        filter = \"sword\";\n      } else if (filter.match(/potion/)) {\n        filter = \"head\";\n      } else if (filter.match(/material/)) {\n        filter = \"potion\";\n      } else if (filter.match(/book/)) {\n        filter = \"material\";\n      } else if (filter.match(/misc/)) {\n        filter = \"book\";\n      }\n      win.open(lastItems, filter);\n    }\n  });\n\n  sellWindowTable.addEventListener(\"click\", function (event) {\n    let itemId = event.target.getAttribute(\"data-id\");\n    if (itemId && Game.hero.data.items.hasOwnProperty(itemId)) {\n      let item = Game.items[itemId];\n      let itemCount = Game.hero.data.items[itemId];\n\n      if (lastItems.hasOwnProperty(itemId)) {\n        lastItems[itemId]++;\n      } else {\n        lastItems[itemId] = 1;\n      }\n\n      if (itemCount == 1) {\n        Game.hero.data.bar.forEach(function (element, index, array) {\n          if (element && element.id == itemId) {\n            array[index] = null;\n          }\n        });\n        Sprite.each(Game.hero.data.equipment, function (element, key) {\n          if (element == itemId) {\n            Game.hero.data.equipment[key] = null;\n          }\n        });\n        delete Game.hero.data.items[itemId];\n      } else {\n        Game.hero.data.items[itemId]--;\n      }\n\n      Game.hero.data.gold += Math.ceil(item.data.value * 0.8);\n      Game.windows.interface.refresh();\n      win.open(lastItems, lastFilter);\n    }\n  });\n\n\n})();\n"]}