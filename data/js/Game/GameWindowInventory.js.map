{"version":3,"sources":["src/Game/GameWindowInventory.js"],"names":[],"mappings":"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","file":"src/Game/GameWindowInventory.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  var win = Game.windows.inventory = new Game.Window(\"inventoryWindow\");\n\n  win.html(`\n    <div class=\"window-box\">\n      <div id=\"inventoryWindowItemBar\">\n\n        <button id=\"inventoryWindowClose\">关闭</button>\n        <button id=\"inventoryWindowStatus\">状态</button>\n\n        <button id=\"inventoryWindowAll\">全部</button>\n        <button id=\"inventoryWindowWeapon\">武器</button>\n        <button id=\"inventoryWindowArmor\">护甲</button>\n        <button id=\"inventoryWindowPotion\">药水</button>\n        <button id=\"inventoryWindowMaterial\">材料</button>\n        <button id=\"inventoryWindowBook\">书籍</button>\n        <button id=\"inventoryWindowMisc\">其他</button>\n      </div>\n\n      <span id=\"inventoryWindowGold\"></span>\n\n      <table border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\n        <thead>\n          <tr>\n            <td style=\"width: 40px;\"></td>\n            <td style=\"width: 120px;\"></td>\n            <td style=\"width: 30px;\"></td>\n            <td></td>\n            <td style=\"width: 60px;\"></td>\n          </tr>\n        </thead>\n        <tbody id=\"inventoryWindowTable\"></tbody>\n      </table>\n    </div>\n  `);\n\n  win.css(`\n    #inventoryWindowItemBar > button {\n      width: 60px;\n      height: 40px;\n      font-size: 16px;\n      margin-left: 5px;\n      margin-right: 5px;\n      margin-top: 0px;\n      margin-bottom: 5px;\n    }\n\n    #inventoryWindowClose {\n      float: right;\n    }\n\n    #inventoryWindowStatus {\n      float: right;\n    }\n\n    #inventoryWindow table {\n      width: 100%;\n    }\n\n    #inventoryWindow table img {\n      width: 100%;\n      height: 100%;\n    }\n\n    #inventoryWindow table button {\n      width: 60px;\n      height: 40px;\n      font-size: 16px;\n    }\n\n    #inventoryWindowGold {\n      position: absolute;\n      right: 30px;\n      bottom: 5px;\n      font-size: 20px;\n      color: gold;\n    }\n  `);\n\n  var inventoryWindowClose = document.querySelector(\"button#inventoryWindowClose\");\n  var inventoryWindowStatus = document.querySelector(\"button#inventoryWindowStatus\");\n\n  var inventoryWindowAll = document.querySelector(\"button#inventoryWindowAll\");\n  var inventoryWindowWeapon = document.querySelector(\"button#inventoryWindowWeapon\");\n  var inventoryWindowArmor = document.querySelector(\"button#inventoryWindowArmor\");\n  var inventoryWindowPotion = document.querySelector(\"button#inventoryWindowPotion\");\n  var inventoryWindowMaterial = document.querySelector(\"button#inventoryWindowMaterial\");\n  var inventoryWindowBook = document.querySelector(\"button#inventoryWindowBook\");\n  var inventoryWindowMisc = document.querySelector(\"button#inventoryWindowMisc\");\n\n  var inventoryWindowGold = document.querySelector(\"span#inventoryWindowGold\");\n\n  inventoryWindowClose.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.hide();\n  });\n\n  Sprite.Input.whenUp([\"esc\"], function (key) {\n    if (Game.windows.inventory.showing()) {\n      inventoryWindowClose.click();\n    }\n  });\n\n  inventoryWindowStatus.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.hide();\n    Game.windows.status.execute(\"open\");\n  });\n\n  inventoryWindowAll.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.execute(\"open\", null);\n  });\n\n  inventoryWindowWeapon.addEventListener(\"click\", function (event) {\n      Game.windows.inventory.execute(\"open\", \"sword|spear|bow\");\n  });\n\n  inventoryWindowArmor.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.execute(\"open\", \"head|body|feet\");\n  });\n\n  inventoryWindowPotion.addEventListener(\"click\", function (event) {\n      Game.windows.inventory.execute(\"open\", \"potion\");\n  });\n\n  inventoryWindowMaterial.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.execute(\"open\", \"material\");\n  });\n\n  inventoryWindowBook.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.execute(\"open\", \"book|scroll|letter\");\n  });\n\n  inventoryWindowMisc.addEventListener(\"click\", function (event) {\n    Game.windows.inventory.execute(\"open\", \"misc\");\n  });\n\n  win.register(\"open\", function (filter) {\n    var tableBody = document.querySelector(\"tbody#inventoryWindowTable\");\n    while (tableBody.hasChildNodes()) {\n      tableBody.removeChild(tableBody.lastChild);\n    }\n\n    inventoryWindowAll.style.color = \"black\";\n    inventoryWindowWeapon.style.color = \"black\";\n    inventoryWindowArmor.style.color = \"black\";\n    inventoryWindowPotion.style.color = \"black\";\n    inventoryWindowMaterial.style.color = \"black\";\n    inventoryWindowBook.style.color = \"black\";\n    inventoryWindowMisc.style.color = \"black\";\n\n    if (filter == null) {\n      inventoryWindowAll.style.color = \"red\";\n    } else if (filter.match(/sword/)) {\n      inventoryWindowWeapon.style.color = \"red\";\n    } else if (filter.match(/head/)) {\n      inventoryWindowArmor.style.color = \"red\";\n    } else if (filter.match(/potion/)) {\n      inventoryWindowPotion.style.color = \"red\";\n    } else if (filter.match(/material/)) {\n      inventoryWindowMaterial.style.color = \"red\";\n    } else if (filter.match(/book/)) {\n      inventoryWindowBook.style.color = \"red\";\n    } else if (filter.match(/misc/)) {\n      inventoryWindowMisc.style.color = \"red\";\n    }\n\n    inventoryWindowGold.textContent = Game.hero.data.gold + \"G\";\n\n    var ids = Object.keys(Game.hero.data.items);\n    ids.sort();\n    ids.forEach(function (itemId) {\n      var itemCount = Game.hero.data.items[itemId];\n      var item = Game.items[itemId];\n      var equipment = null;\n\n      Sprite.each(Game.hero.data.equipment, function (element, key) {\n        if (element == item.id)\n          equipment = key;\n      });\n\n      if (filter && filter.indexOf(item.data.type) == -1)\n        return;\n\n      var line = document.createElement(\"tr\");\n\n      var icon = document.createElement(\"td\");\n      icon.appendChild(item.icon);\n      line.appendChild(icon);\n\n      var name = document.createElement(\"td\");\n      name.textContent = item.data.name;\n      if (equipment)\n        name.style.color = \"red\";\n      line.appendChild(name);\n\n      var count = document.createElement(\"td\");\n      count.textContent = itemCount;\n      count.style.textAlign = \"center\";\n      line.appendChild(count);\n\n      var description = document.createElement(\"td\");\n      description.textContent = item.data.description;\n      line.appendChild(description);\n\n      var manage = document.createElement(\"td\");\n      var manageButton = document.createElement(\"button\");\n      manageButton.textContent = \"操作\";\n      manage.appendChild(manageButton);\n      manageButton.addEventListener(\"click\", function () {\n        var options = {};\n        if (item.data.type.match(/potion/)) {\n          options[\"使用\"] = \"use\";\n          options[\"快捷键\"] = \"shortcut\";\n        } else if (item.data.type.match(/sword|spear|bow|head|body|feet|neck|ring/)) {\n          if (equipment)\n            options[\"卸下\"] = \"takeoff\";\n          else\n            options[\"装备\"] = \"puton\";\n        } else if (item.data.type.match(/book/)) {\n          options[\"阅读\"] = \"read\";\n        }\n\n        options[\"丢弃\"] = \"drop\";\n\n        Game.choice(options, function (choice) {\n          console.log(choice);\n          switch (choice) {\n            case \"puton\":\n              Game.hero.data.equipment[item.data.type] = item.id;\n              return Game.windows.inventory.execute(\"open\", filter);\n              break;\n            case \"takeoff\":\n              if (item.data.type.match(/sword|spear|bow/))\n                Game.hero.data.equipment.weapon = null;\n              else\n                Game.hero.data.equipment[item.data.type] = null;\n              return Game.windows.inventory.execute(\"open\", filter);\n              break;\n            case \"use\":\n              break;\n            case \"read\":\n              break;\n            case \"drop\":\n              if (equipment)\n                Game.hero.data.equipment[equipment] = null;\n              var dead = Game.items.bag.clone();\n              dead.x = Game.hero.x;\n              dead.y = Game.hero.y;\n              dead.draw(Game.layers.itemLayer);\n              dead.inner = {};\n              dead.inner[item.id] = itemCount;\n              Game.area.bags[Sprite.uuid()] = dead;\n              delete Game.hero.data.items[item.id];\n              return Game.windows.inventory.execute(\"open\", filter);\n              break;\n            case \"shortcut\":\n              Game.choice({\n                1:0,\n                2:1,\n                3:2,\n                4:3,\n                5:4,\n                6:5,\n                7:6,\n                8:7\n              }, function (choice) {\n                if (typeof choice == \"number\" && choice >= 0) {\n                  Game.hero.data.bar[choice] = {\n                    id: item.id,\n                    type: \"item\"\n                  };\n                  Game.windows.interface.execute(\"refresh\");\n                }\n              });\n              break;\n          }\n        });\n      });\n      line.appendChild(manage);\n\n      tableBody.appendChild(line);\n    });\n\n    Game.windows.inventory.show();\n  });\n\n}());\n"]}