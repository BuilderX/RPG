{"version":3,"sources":["src/GameItem.js"],"names":[],"mappings":"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","file":"src/GameItem.js","sourcesContent":["/*\n\nA-RPG Game, Built using Node.js + JavaScript + ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.ItemClass = class ItemClass extends Sprite.Event {\n\n    static load (id, callback) {\n      var itemLoader = new Sprite.Loader();\n      itemLoader.add(`/item/${id}.json`);\n      itemLoader.start();\n      itemLoader.on(\"complete\", (event) => {\n        var itemData = event.data[0];\n        var itemObj = new ItemClass(itemData);\n        Game.items[id] = itemObj;\n        itemObj.on(\"complete\", () => {\n          if (typeof callback == \"function\") {\n            callback();\n          }\n        });\n      });\n    }\n\n    constructor (itemData) {\n      super();\n\n      this.data = itemData;\n      this.id = this.data.id;\n      this.inner = null;\n\n      var loader = new Sprite.Loader();\n      loader.add(`/item/${this.data.image}`);\n      loader.start();\n      loader.on(\"complete\", (event) => {\n        var image = event.data[0];\n\n        this.icon = image;\n\n        this.bitmap = new Sprite.Bitmap(image);\n        this.bitmap.center.x = image.width / 2;\n        this.bitmap.center.y = image.height / 2;\n        this.bitmap.name = this.id;\n\n        // 发送完成事件，第二个参数代表一次性事件\n        this.emit(\"complete\", true);\n      });\n    }\n\n    get x () {\n      return this.bitmap.x;\n    }\n\n    get y () {\n      return this.bitmap.y;\n    }\n\n    set x (v) {\n      this.bitmap.x = v;\n    }\n\n    set y (v) {\n      this.bitmap.y = v;\n    }\n\n    pickup () {\n      if (this.inner) {\n        Game.ui.pickupWindow(this);\n      }\n    }\n\n    clone (callback) {\n      var self = this;\n\n      var itemObj = new ItemClass(this.data);\n      return itemObj;\n    }\n\n    erase (layer) {\n      layer.removeChild(this.bitmap);\n    }\n\n    draw (layer) {\n      layer.appendChild(this.bitmap);\n    }\n\n  };\n\n})();\n"]}