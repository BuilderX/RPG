{"version":3,"sources":["src/GameWindowTrade.js"],"names":[],"mappings":"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","file":"src/GameWindowTrade.js","sourcesContent":["/*\n\nA-RPG Game, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n(function () {\n  \"use strict\";\n\n  var win = Game.windows.trade = new Game.Window(\"tradeWindow\");\n\n  win.html(`\n    <div class=\"window-box\">\n      <button id=\"tradeWindowClose\">关闭</button>\n      <table style=\"width: 740px; height: 360px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n        <tbody>\n          <tr>\n            <td style=\"vertical-align: top;\">\n              <div style=\"width: 350px; overflow-y: auto;\">\n                <table style=\"width: 100%;\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\n                  <thead>\n                    <tr>\n                      <td style=\"width: 40px;\"></td>\n                      <td></td>\n                      <td style=\"width: 30px;\"></td>\n                      <td style=\"width: 60px;\"></td>\n                    </tr>\n                  </thead>\n                  <tbody id=\"tradeWindowTable\">\n                  </tbody>\n                </table>\n              </div>\n            </td>\n            <td style=\"vertical-align: top;\">\n              <div style=\"width: 350px; overflow-y: auto;\">\n                <table style=\"width: 100%;\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\n                  <thead>\n                    <tr>\n                      <td style=\"width: 40px;\"></td>\n                      <td></td>\n                      <td style=\"width: 30px;\"></td>\n                      <td style=\"width: 30px;\"></td>\n                      <td style=\"width: 60px;\"></td>\n                    </tr>\n                  </thead>\n                  <tbody id=\"tradeWindowHero\">\n                  </tbody>\n                </table>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  `);\n\n  win.css(`\n    #tradeWindowClose {\n      width: 60px;\n      height: 40px;\n      font-size: 16px;\n    }\n\n    #tradeWindowTable button, #tradeWindowHero button {\n      width: 60px;\n      height: 40px;\n      font-size: 16px;\n    }\n  `);\n\n  document.querySelector(\"button#tradeWindowClose\").addEventListener(\"click\", function () {\n    Game.windows.trade.hide();\n  });\n\n  win.register(\"trade\", function (items) {\n    var tradeTable = document.getElementById(\"tradeWindowTable\");\n    var tradeHeroTable = document.getElementById(\"tradeWindowHero\");\n\n    items.forEach(function (itemId) {\n      var line = document.createElement(\"tr\");\n\n      var icon = document.createElement(\"td\");\n      icon.appendChild(Game.items[itemId].icon.cloneNode());\n      line.appendChild(icon);\n\n      var name = document.createElement(\"td\");\n      name.textContent = Game.items[itemId].data.name;\n      line.appendChild(name);\n\n      var value = document.createElement(\"td\");\n      value.textContent = Game.items[itemId].data.value + \"G\";\n      value.style.textAlign = \"center\";\n      value.style.color = \"gold\";\n      line.appendChild(value);\n\n      var buy = document.createElement(\"td\");\n      var buyButton = document.createElement(\"button\");\n      buyButton.textContent = \"买入\";\n      buy.appendChild(buyButton);\n      line.appendChild(buy);\n\n      tradeTable.appendChild(line);\n    });\n\n    Sprite.Util.each(Game.hero.data.items, function (itemCount, itemId) {\n      var line = document.createElement(\"tr\");\n\n      var icon = document.createElement(\"td\");\n      icon.appendChild(Game.items[itemId].icon.cloneNode());\n      line.appendChild(icon);\n\n      var name = document.createElement(\"td\");\n      name.textContent = Game.items[itemId].data.name;\n      line.appendChild(name);\n\n      var count = document.createElement(\"td\");\n      count.textContent = itemCount;\n      count.style.textAlign = \"center\";\n      line.appendChild(count);\n\n      var value = document.createElement(\"td\");\n      value.textContent = Game.items[itemId].data.value + \"G\";\n      value.style.textAlign = \"center\";\n      value.style.color = \"gold\";\n      line.appendChild(value);\n\n      var sell = document.createElement(\"td\");\n      var sellButton = document.createElement(\"button\");\n      sellButton.textContent = \"卖出\";\n      sell.appendChild(sellButton);\n      line.appendChild(sell);\n\n      tradeHeroTable.appendChild(line);\n    });\n\n    Game.windows.trade.show();\n  });\n\n}());\n"]}