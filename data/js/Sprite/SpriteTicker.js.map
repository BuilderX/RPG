{"version":3,"sources":["src/Sprite/SpriteTicker.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,CAAC,YAAY;AACZ,cAAY,CAAC;;AAEZ,MAAI,WAAW,GAAG,CAAC,CAAC;;MAEd,YAAY;cAAZ,YAAY;;AACJ,aADR,YAAY,GACD;4BADX,YAAY;;AAEd,iCAFE,YAAY,6CAEN;AACR,UAAI,CAAC,IAAI,EAAE,CAAC;KACb;;iBAJG,YAAY;;aAMX,gBAAG;;;AACN,mBAAW,EAAE,CAAC;AACd,YAAI,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,WAAW,CAAC,CAAC;AACtC,cAAM,CAAC,qBAAqB,CAAC,YAAM;AACjC,gBAAK,IAAI,EAAE,CAAC;SACb,CAAC,CAAC;OACJ;;;aAEK,eAAC,KAAK,EAAE,QAAQ,EAAE;;;AACtB,YAAI,KAAK,GAAG,CAAC,CAAC;AACd,YAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,YAAM;AAC7B,eAAK,EAAE,CAAC;AACR,cAAI,KAAK,IAAI,KAAK,EAAE;AAClB,mBAAK,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AACrB,gBAAI,QAAQ,EAAE;AACZ,sBAAQ,EAAE,CAAC;aACZ;WACF;SACF,CAAC,CAAC;OACJ;;;aAEM,gBAAC,KAAK,EAAE,QAAQ,EAAE;;;AACvB,YAAI,KAAK,GAAG,CAAC,CAAC;AACd,YAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,YAAM;AAC7B,eAAK,EAAE,CAAC;AACR,cAAI,KAAK,IAAI,KAAK,EAAE;AAClB,gBAAI,QAAQ,EAAE;AACZ,sBAAQ,CAAC,IAAI,CAAC,CAAC;aAChB;AACD,mBAAK,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;WACtB,MAAM;AACL,gBAAI,QAAQ,EAAE;AACZ,sBAAQ,CAAC,KAAK,CAAC,CAAC;aACjB;WACF;SACF,CAAC,CAAC;OACJ;;;WA1CG,YAAY;KAAS,MAAM,CAAC,KAAK;;AA4CtC,GAAC;;AAEF,QAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,YAAY,EAAE,CAAC,CAAC;CAE7C,CAAA,EAAG,CAAC","file":"src/Sprite/SpriteTicker.js","sourcesContent":["/*\n\n2D Game Sprite Library, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n/**\n * @fileoverview Sprite.Ticker\n * @author mail@qhduan.com (QH Duan)\n */\n\n(function () {\n \"use strict\";\n\n  let tickerCount = 0;\n\n  class SpriteTicker extends Sprite.Event {\n    constructor () {\n      super();\n      this.tick();\n    }\n\n    tick () {\n      tickerCount++;\n      this.emit(\"tick\", false, tickerCount);\n      window.requestAnimationFrame(() => {\n        this.tick();\n      });\n    }\n\n    after (times, callback) {\n      let count = 0;\n      let id = this.on(\"tick\", () => {\n        count++;\n        if (count >= times) {\n          this.off(\"tick\", id);\n          if (callback) {\n            callback();\n          }\n        }\n      });\n    }\n\n    whiles (times, callback) {\n      let count = 0;\n      let id = this.on(\"tick\", () => {\n        count++;\n        if (count >= times) {\n          if (callback) {\n            callback(true);\n          }\n          this.off(\"tick\", id);\n        } else {\n          if (callback) {\n            callback(false);\n          }\n        }\n      });\n    }\n\n  };\n\n  Sprite.assign(\"Ticker\", new SpriteTicker());\n\n})();\n"]}