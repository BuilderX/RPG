{"version":3,"sources":["src/Sprite/SpriteEvent.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,CAAC,UAAU,MAAM,EAAE;AACjB,cAAY,CAAC;;;AAGb,QAAM,CAAC,KAAK;;;;;AAIE,aAJO,KAAK,GAIT;4BAJI,KAAK;;AAKtB,UAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AACrB,UAAI,CAAC,KAAK,GAAG,EAAE,CAAC;AAChB,UAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACrB;;iBARkB,KAAK;;;;aAmBf,kBAAC,KAAK,EAAE;AACf,YAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EACxB,OAAO,IAAI,CAAC;AACd,eAAO,KAAK,CAAC;OACd;;;;;;;;aAME,YAAC,KAAK,EAAE,QAAQ,EAAE;AACnB,YAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;AACrB,kBAAQ,CAAC;AACP,gBAAI,EAAE,KAAK;AACX,kBAAM,EAAE,IAAI;AACZ,gBAAI,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;WACxB,CAAC,CAAC;AACH,iBAAO;SACR;;AAED,YAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EACzB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;;AAE9B,YAAI,EAAE,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;;AAEvB,YAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC;AACtC,eAAO,EAAE,CAAC;OACX;;;;;;;;aAMG,aAAC,KAAK,EAAE,EAAE,EAAE;AACd,YAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE;AACxD,iBAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AAClC,iBAAO,IAAI,CAAC;SACb;AACD,eAAO,KAAK,CAAC;OACd;;;;;;;;;aAOI,cAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE;AACvB,YAAI,IAAI,EAAE;AACR,cAAI,OAAO,IAAI,IAAI,WAAW,EAAE;AAC9B,gBAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;WAC1B,MAAM;AACL,gBAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;WAC1B;SACF;;AAED,YAAI,GAAG,GAAG,IAAI,CAAC;;AAEf,YAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;;AAE1B,eAAK,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,EAAE;AACtC,gBAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;AAC9B,kBAAI,EAAE,KAAK;AACX,oBAAM,EAAE,IAAI;AACZ,kBAAI,EAAE,IAAI;aACX,CAAC,KAAK,KAAK,EAAE;AACZ,iBAAG,GAAG,KAAK,CAAC;aACb;WACF;SACF;;AAED,YAAI,IAAI,CAAC,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE;AAC9B,cAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;SACtC;OACF;;;WAlFU,eAAG;AACZ,eAAO,IAAI,CAAC,OAAO,CAAC;OACrB;WAEU,aAAC,KAAK,EAAE;AACjB,YAAI,CAAC,OAAO,GAAG,KAAK,CAAC;OACtB;;;WAhBkB,KAAK;MA6FzB,CAAC;CAEH,CAAA,CAAE,MAAM,CAAC,CAAC","file":"src/Sprite/SpriteEvent.js","sourcesContent":["/*\n\n2D Game Sprite Library, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n/// @file SpriteEvent.js\n/// @namespace Sprite\n/// class Sprite.Event\n\n(function (Sprite) {\n  \"use strict\";\n\n  /// @class Sprite.Event\n  Sprite.Event = class Event {\n\n    /// @function Sprite.Event.constructor\n    /// construct a Sprite.Event\n    constructor () {\n      this._listeners = {};\n      this._once = {};\n      this._parent = null;\n    }\n\n    get parent () {\n      return this._parent;\n    }\n\n    set parent (value) {\n      this._parent = value;\n    }\n\n    /// @function Sprite.Event.hasEvent\n    hasEvent (event) {\n      if (this._listeners[event])\n        return true;\n      return false;\n    }\n\n    /// @function Sprite.Event.on\n    /// book a listener of event in this object\n    /// @param event, the event to book\n    /// @param listener, the listener to book\n    on (event, listener) {\n      if (this._once[event]) {\n        listener({\n          type: event,\n          target: this,\n          data: this._once[event]\n        });\n        return;\n      }\n\n      if (!this._listeners[event])\n        this._listeners[event] = {};\n\n      var id = Sprite.uuid();\n\n      this._listeners[event][id] = listener;\n      return id;\n    }\n\n    /// @function Sprite.Event.off\n    /// release a event listener\n    /// @param event, the event to release\n    /// @param id, the id on the book\n    off (event, id) {\n      if (this._listeners[event] && this._listeners[event][id]) {\n        delete this._listeners[event][id];\n        return true;\n      }\n      return false;\n    }\n\n    /// @function Sprite.Event.emit\n    /// emit a event\n    /// @param event, the event you want emit\n    /// @param once, is it an once event? eg. oncomplete onload maybe an once event\n    /// @param data, optional, the data you want send to listener\n    emit (event, once, data) {\n      if (once) {\n        if (typeof data != \"undefined\") {\n          this._once[event] = data;\n        } else {\n          this._once[event] = true;\n        }\n      }\n\n      var pop = true;\n\n      if (this._listeners[event]) {\n\n        for (let key in this._listeners[event]) {\n          if (this._listeners[event][key]({\n            type: event,\n            target: this,\n            data: data\n          }) === false) {\n            pop = false;\n          }\n        }\n      }\n\n      if (this.parent && pop == true) {\n        this.parent.emit(event, false, data);\n      }\n    }\n  };\n\n})(Sprite);\n"]}