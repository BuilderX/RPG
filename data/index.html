<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta name="keywords" content="Fantasy RPG, RPG, Game, Elliorwis">
    <meta name="description" content="Fantasy RPG Game Elliorwis">
    <meta name="author" content="mail@qhduan.com">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">


    <link rel="icon" type="image/png" href="icon32.png" />

    <title>艾利韦斯</title>
    <meta name="application-name" content="Elliorwis">
    <link rel="stylesheet" href="game.css">
  </head>
  <body>

    <script>

      /*
      window.onerror = function (msg, url, line, col, error) {
        // Note that col & error are new to the HTML 5 spec and may not be
        // supported in every browser.  It worked for me in Chrome.
        var extra = !col ? '' : '\ncolumn: ' + col;
        extra += !error ? '' : '\nerror: ' + error;

        // You can view the information in an alert to see things working like this:
        alert("Error: " + msg + "\nurl: " + url + "\nline: " + line + extra);

        // TODO: Report this error via ajax so you can keep track
        //       of what pages have JS issues

        var suppressErrorAlert = true;
        // If you return true, then error alerts (like in older versions of
        // Internet Explorer) will be suppressed.
        return suppressErrorAlert;
      };
      */

      (function CheckSupport () {
        (function CheckCanvasSupport () {
          var c = document.createElement("canvas");
          if (c.getContext("2d")) {
            console.log("canvas 2d supported");
            var w = document.createElement("canvas");
            if (w.getContext("webgl") || w.getContext("experimental-webgl")) {
              console.log("webgl supported");
            } else {
              console.log("webgl not supported");
            }
          } else {
            alert("canvas 2d 不支持，无法运行！");
            throw new Error("canvas 2d not supported");
          }
        })();
        (function CheckLocalStorageSupport () {
          if (window.localStorage && window.localStorage.getItem && window.localStorage.setItem) {
            console.log("localStorage supported");
          } else {
            alert("localStorage 不支持，无法运行！");
            throw new Error("localStorage not supported");
          }
        })();
        (function () {
          if (window.ArrayBuffer) {
            console.log("ArrayBuffer supported");
          } else {
            alert("ArrayBuffer 不支持，无法运行！");
            throw new Error("ArrayBuffer not supported");
          }
        })();
        (function () {
          if (window.Blob) {
            console.log("Blob supported");
          } else {
            alert("Blob 不支持，无法运行！");
            throw new Error("Blob not supported");
          }
        })();
      })();

      function ImportJavascript (urls) {
        var all = "";
        urls.forEach(function (u) {
          all += "<script src='" + u + "'><\/script>\n";
        });
        document.write(all);
      }

      var development = [
        "js/browser-polyfill.js",

        "js/Sprite/Sprite.js",
        "js/Sprite/SpriteCanvas.js",
        "js/Sprite/SpriteWebgl.js",
        "js/Sprite/SpriteEvent.js",
        "js/Sprite/SpriteTween.js",
        "js/Sprite/SpriteLoad.js",
        "js/Sprite/SpriteTicker.js",
        "js/Sprite/SpriteDisplay.js",
        "js/Sprite/SpriteContainer.js",
        "js/Sprite/SpriteStage.js",
        "js/Sprite/SpriteText.js",
        "js/Sprite/SpriteFrame.js",
        "js/Sprite/SpriteSheet.js",
        "js/Sprite/SpriteInput.js",
        "js/Sprite/SpriteShape.js",
        "js/Sprite/SpriteBitmap.js",

        "js/Game/Game.js",

        "js/Game/GameWindow.js",
        "js/Game/GameWindowArchive.js",
        "js/Game/GameWindowBuy.js",
        "js/Game/GameWindowChoice.js",
        "js/Game/GameWindowConfirm.js",
        "js/Game/GameWindowDialogue.js",
        "js/Game/GameWindowInterface.js",
        "js/Game/GameWindowInventory.js",
        "js/Game/GameWindowLoading.js",
        "js/Game/GameWindowMain.js",
        "js/Game/GameWindowMap.js",
        "js/Game/GameWindowOver.js",
        "js/Game/GameWindowPickup.js",
        "js/Game/GameWindowQuest.js",
        "js/Game/GameWindowRegister.js",
        "js/Game/GameWindowSell.js",
        "js/Game/GameWindowSetting.js",
        "js/Game/GameWindowSkill.js",
        "js/Game/GameWindowStatus.js",
        "js/Game/GameWindowSysmenu.js",

        "js/Game/GameAstar.js",
        "js/Game/GameAI.js",
        "js/Game/GameCollision.js",
        "js/Game/GameUI.js",
        "js/Game/GameArea.js",
        "js/Game/GameMap.js",
        "js/Game/GameQuest.js",
        "js/Game/GameItem.js",
        "js/Game/GameSkill.js",
        "js/Game/GameActor.js",
        "js/Game/GameActorAlly.js",
        "js/Game/GameActorHero.js",
        "js/Game/GameActorMonster.js",
        "js/Game/GameActorNPC.js",
        "js/Game/GameActorPet.js",
        "js/Game/GameDrawHero.js",
        "js/Game/GameInput.js",
        "js/Game/GameRegister.js",
        "js/Game/GameArchive.js"
      ];

      var product = [
        "js/all.min.js"
      ];

      if (document.URL.match(/dev/i)) {
        ImportJavascript(development);
        document.title = "艾利韦斯开发";
      } else if (document.URL.match(/prod/i)) {
        ImportJavascript(product);
        document.title = "艾利韦斯";
      } else {
        if (document.URL.match(/localhost|127\.0\.0\.1/)) {
          ImportJavascript(development);
          document.title = "艾利韦斯开发";
        } else {
          ImportJavascript(product);
          document.title = "艾利韦斯";
        }
      }

    </script>

  </body>
</html>
