{"version":3,"sources":["public/src/actor.js"],"names":[],"mappings":"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","file":"public/src/actor.js","sourcesContent":["/*\n\nOnline A-RPG Game, Built using Node.js + createjs\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.oninit(function () {\n\n    createjs.Ticker.on(\"tick\", function () {\n\n      // 当有人物正在播放animation时（paused == false）则刷新Game.stage\n\n      for (var i = 0; i < Game.actorLayer.children.length; i++) {\n        if (Game.actorLayer.children[i].paused == false) {\n          Game.update();\n          break;\n        }\n      }\n      for (var i = 0; i < Game.heroLayer.children.length; i++) {\n        if (Game.heroLayer.children[i].paused == false) {\n          Game.update();\n          break;\n        }\n      }\n      for (var i = 0; i < Game.playerLayer.children.length; i++) {\n        if (Game.playerLayer.children[i].paused == false) {\n          Game.update();\n          break;\n        }\n      }\n\n    });\n\n  });\n\n  /*\n    角色类，包括涉及到hero和npc\n    属性：\n      this.animation 当前精灵动作\n      this.sprite 精灵\n  */\n  Game.ActorClass = class ActorClass extends Game.EventClass {\n    constructor (actorData) {\n      super();\n\n      this.data = actorData;\n      this.id = this.data.id;\n\n      this.currentHitpoint = this.data.hitpoint;\n      this.currentManapoint = this.data.manapoint;\n\n      // 名字\n      this.text = new createjs.Text(this.data.name, \"12px Arial\", \"white\");\n      this.text.regY = this.text.getMeasuredHeight() / 2;\n      this.text.regX = this.text.getMeasuredWidth() / 2;\n      this.text.x = 0;\n      this.text.y = 0;\n\n      // 血条外面的黑框\n      this.hpbarBox = new createjs.Shape();\n      this.hpbarBox.graphics\n        .beginStroke(\"black\")\n        .drawRect(0, 0, 30, 3);\n      this.hpbarBox.regX = 15;\n      this.hpbarBox.regY = 2;\n      this.hpbarBox.x = 0;\n      this.hpbarBox.y = 10;\n      // 魔法条外面的黑框\n      this.mpbarBox = new createjs.Shape();\n      this.mpbarBox.graphics\n        .beginStroke(\"black\")\n        .drawRect(0, 0, 30, 3);\n      this.mpbarBox.regX = 15;\n      this.mpbarBox.regY = 2;\n      this.mpbarBox.x = 0;\n      this.mpbarBox.y = 14;\n      // 血条\n      this.hpbar = new createjs.Shape();\n      this.hpbar.regX = 15;\n      this.hpbar.regY = 2;\n      this.hpbar.x = 0;\n      this.hpbar.y = 10;\n      // 根据血量不同设定不同颜色\n      var hpcolor = \"green\";\n      if ((this.currentHitpoint / this.data.hitpoint) < 0.25)\n        hpcolor = \"red\";\n      else if ((this.currentHitpoint / this.data.hitpoint) < 0.5)\n        hpcolor = \"yellow\";\n\n      this.hpbar.graphics\n        .clear()\n        .beginFill(hpcolor)\n        .drawRect(0, 0, parseInt((this.currentHitpoint / this.data.hitpoint) * 30), 3);\n\n      // 魔法条\n      this.mpbar = new createjs.Shape();\n      this.mpbar.regX = 15;\n      this.mpbar.regY = 2;\n      this.mpbar.x = 0;\n      this.mpbar.y = 14;\n      this.mpbar.graphics\n        .clear()\n        .beginFill(\"blue\")\n        .drawRect(0, 0, parseInt((this.currentManapoint / this.data.manapoint) * 30), 3);\n\n      // 一个上面四个魔法条、血条的聚合，统一管理放入这个Container\n      this.infoBox = new createjs.Container();\n\n      if (this.data.type == \"npc\") {\n        this.text.y += 10;\n        this.infoBox.addChild(this.text);\n      } else {\n        this.infoBox.addChild(this.text, this.hpbarBox, this.mpbarBox, this.hpbar, this.mpbar);\n      }\n\n      var image = null;\n\n      if (this.data.image instanceof Image) {\n        image = this.data.image;\n      } else if (Game.resources.hasOwnProperty(this.data.image)) {\n        image = Game.resources[this.data.image];\n      } else {\n        console.log(\"ActorClass Invalid Image\");\n      }\n\n      var sheet = new createjs.SpriteSheet({\n        images: [image],\n        frames: {\n          width: this.data.tilewidth,\n          height: this.data.tileheight,\n          regX: parseInt(this.data.tilewidth / 2), // regX和regY把角色中间设定为中间\n          regY: parseInt(this.data.tileheight / 2)\n        },\n        animations: this.data.animations\n      });\n      //this.sprite = new createjs.Sprite(sheet);\n\n      this.sprite = new createjs.Sprite(sheet, \"facedown\");\n\n      this.sprite.x = 0;\n      this.sprite.y = 0;\n\n      if (this.data.spells) {\n        for (var key in this.data.spells) {\n          this.data.spells[key] = new Game.SpellClass(this.data.spells[key]);\n        }\n      }\n\n      // 发送完成事件，第二个参数代表一次性事件\n      super.emit(\"complete\", true);\n    }\n\n    get x () {\n      return this.sprite.x;\n    }\n\n    get y () {\n      return this.sprite.y;\n    }\n\n    set x (v) {\n      this.sprite.x = v;\n      Game.update();\n    }\n\n    set y (v) {\n      this.sprite.y = v;\n      Game.update();\n    }\n/*\n    on (event, listener) {\n      if (this[event])\n        return listener(this);\n\n      if (!this.listeners)\n        this.listeners = {};\n\n      if (!this.listeners[event])\n        this.listeners[event] = {};\n\n      var id = uuid.v4();\n      this.listeners[event][id] = listener;\n    }\n\n    off  (event, id) {\n      if (this.listeners[event] && this.listeners[event][id]) {\n        delete this.listeners[event][id];\n      }\n    }\n\n    emit (event, data) {\n      if (this.listeners && this.listeners[event]) {\n        for (let key in this.listeners[event]) {\n          this.listeners[event][key](data);\n        }\n      }\n    }\n */\n    clone  (callback) {\n      var actorObj = new ActorClass(this.data);\n      actorObj.oncomplete(callback);\n    }\n\n    use () {\n      if (this.data.use) {\n        if (this.data.use.type == \"talk\") {\n          var dialogueText = new createjs.Text(this.data.use.content);\n          var w = dialogueText.getMeasuredWidth();\n          var h = dialogueText.getMeasuredHeight();\n          var dialogueBox = new createjs.Shape();\n          dialogueBox.graphics\n          .beginStroke(\"black\")\n          .beginFill(\"white\")\n          .drawRoundRect(0, 0, w + 10, h + 10, 5);\n\n          dialogueBox.graphics\n          .beginFill(\"white\")\n          .moveTo(w + 5, h + 8)\n          .lineTo(w, h + 15)\n          .lineTo(w - 5, h + 8)\n          .beginStroke(\"white\")\n          .lineTo(w + 5, h + 8);\n\n          var dialogueContainer = new createjs.Container();\n          dialogueContainer.addChild(dialogueBox, dialogueText);\n          dialogueText.x = 5;\n          dialogueText.y = 5;\n          dialogueContainer.x = this.x;\n          dialogueContainer.y = this.y - this.sprite.spriteSheet.getFrame(0).regY;\n          dialogueContainer.regX = w - 5;\n          dialogueContainer.regY = h + 8;\n\n          Game.dialogueLayer.addChild(dialogueContainer);\n          setTimeout(() => {\n            Game.dialogueLayer.removeChild(dialogueContainer);\n            Game.update();\n          }, 5000);\n          Game.update();\n        }\n      }\n    }\n\n    distance (x, y) {\n      var d = 0;\n      d += Math.pow(this.x - x, 2);\n      d += Math.pow(this.y - y, 2);\n      return parseInt(Math.sqrt(d));\n    }\n\n    decreaseHitpoint (hp) {\n      this.currentHitpoint -= hp;\n\n      if (this.currentHitpoint <= 0) {\n\n        // item0001是物品掉落之后出现的小布袋\n        Game.items.item0001.clone((dead) => {\n          dead.draw(Game.itemLayer, this.sprite.x, this.sprite.y);\n        });\n\n        Game.actorLayer.removeChild(this.infoBox);\n        Game.actorLayer.removeChild(this.sprite);\n\n        delete Game.area.actors[this.id];\n\n      } else {\n        var hpcolor = \"green\";\n        if ((this.currentHitpoint / this.data.hitpoint) < 0.25)\n          hpcolor = \"red\";\n        else if ((this.currentHitpoint / this.data.hitpoint) < 0.5)\n          hpcolor = \"yellow\";\n\n        this.hpbar.graphics\n          .clear()\n          .beginFill(hpcolor)\n          .drawRect(0, 0, parseInt((this.currentHitpoint / this.data.hitpoint) * 30), 3);\n      }\n\n\n      Game.update();\n    }\n\n    decreaseManapoint (mp) {\n      var self = this;\n\n      this.currentManapoint -= mp;\n\n      this.mpbar.graphics\n        .clear()\n        .beginFill(\"blue\")\n        .drawRect(0, 0, parseInt((this.currentManapoint / this.data.manapoint) * 30), 3);\n\n      Game.update();\n    }\n\n    damage (hp, mp) {\n      var self = this;\n\n      if (typeof hp == \"number\" && !isNaN(hp) && hp > 0)\n        this.decreaseHitpoint(hp);\n      if (typeof mp == \"number\" && !isNaN(mp) && mp > 0)\n        this.decreaseManapoint(mp);\n    }\n\n    play (animation, priority) {\n      var self = this;\n\n      var direction = animation.match(/down|left|right|up/)[0];\n\n      // 新动画默认优先级为0\n      if (typeof priority == \"undefined\")\n        priority = 0;\n\n      // 无动画或者停止状态，现有优先级为-1（最低级）\n      if (typeof this.animationPriority == \"undefined\" || this.sprite.paused == true)\n        this.animationPriority = -1;\n\n      if (this.data.animations.hasOwnProperty(animation)\n      && priority >= this.animationPriority\n      && animation != this.sprite.currentAnimation) {\n        this.animationPriority = priority;\n        this.sprite.gotoAndPlay(animation);\n      }\n    }\n\n    stop () {\n      var self = this;\n\n      if (!this.sprite.currentAnimation) return;\n\n      if ((this.sprite.paused && !this.sprite.currentAnimation.match(/face/))\n        || this.sprite.currentAnimation.match(/walk|run/)) {\n        switch (this.sprite.currentAnimation.match(/up|down|left|right/)[0]) {\n          case \"up\":\n            this.sprite.gotoAndStop(\"faceup\");\n            break;\n          case \"down\":\n            this.sprite.gotoAndStop(\"facedown\");\n            break;\n          case \"left\":\n            this.sprite.gotoAndStop(\"faceleft\");\n            break;\n          case \"right\":\n            this.sprite.gotoAndStop(\"faceright\");\n            break;\n        }\n      }\n    }\n\n    fire (num, direction) {\n      var self = this;\n\n      // 同一时间只能施展一个spell\n      if (this.attacking)\n        return 0;\n\n      var spell = this.data.spellbar[num];\n      if (!spell)\n        return 0;\n\n      // 只有当这个spell的cooldown结\n      var now = new Date().getTime();\n      if ( typeof this.lastAttack == \"number\"\n        && typeof this.lastAttackCooldown == \"number\"\n        && (now - this.lastAttack) < this.lastAttackCooldown)\n        return 0;\n\n      this.lastAttack = now;\n      this.lastAttackCooldown = this.data.spells[spell].data.cooldown;\n      this.attacking = true;\n\n      if (!direction) {\n        direction = this.sprite.currentAnimation.match(/up|left|down|right/)[0];\n      }\n\n      this.data.spells[spell].fire(self, \"attack\" + direction, (hittedActorIds) => {\n        this.attacking = false;\n        if (hittedActorIds && hittedActorIds.length) {\n          Game.io.hit(this.data.spells[spell].id, hittedActorIds);\n        }\n      });\n\n      if (this.id == Game.hero.id) {\n        Game.io.sync(\"attack\", {\n          num: num,\n          direction: direction\n        });\n      }\n\n      return this.data.spells[spell].data.cooldown;\n    }\n\n    gotoXY (x, y, speed, collisionTest, callback) {\n      var self = this;\n\n      if (this.gotoXYListener) {\n        createjs.Ticker.off(\"tick\", this.gotoXYListener);\n        this.gotoXYListener = null;\n      }\n\n      x -= this.sprite.x;\n      y -= this.sprite.y;\n\n      var state = \"walk\";\n\n      var limit = speed;\n\n      this.gotoXYListener = createjs.Ticker.on(\"tick\", () => toXY());\n\n      var toXY = () => {\n\n        if (x == 0 && y == 0) {\n          if (this.gotoXYListener) {\n            createjs.Ticker.off(\"tick\", this.gotoXYListener);\n            this.gotoXYListener = null;\n          }\n          this.stop();\n          if (callback) callback();\n        } else if (Math.abs(x) > limit && Math.abs(y) > limit) {\n          var skew = speed / 1.4;\n          var direction = \"\";\n          if (y < 0) {\n            direction = \"up\"\n            y += skew;\n          } else {\n            direction = \"down\";\n            y -= skew;\n          }\n          if (x < 0) {\n            direction += \"left\";\n            x += skew;\n          } else {\n            direction += \"right\";\n            x -= skew;\n          }\n          this.go(state, direction, skew, collisionTest);\n        } else if (Math.abs(x) > limit) {\n          if (x > 0) {\n            this.go(state, \"right\", speed, collisionTest);\n            x -= speed;\n          } else {\n            this.go(state, \"left\", speed, collisionTest);\n            x += speed;\n          }\n        } else if (Math.abs(y) > limit) {\n          if (y > 0) {\n            this.go(state, \"down\", speed, collisionTest);\n            y -= speed;\n          } else {\n            this.go(state, \"up\", speed, collisionTest);\n            y += speed;\n          }\n        } else if (Math.abs(y) != 0) {\n          if (y > 0) {\n            this.go(state, \"down\", y, collisionTest);\n            y = 0;\n          } else {\n            this.go(state, \"up\", -y, collisionTest);\n            y = 0;\n          }\n        } else if (Math.abs(x) != 0) {\n          if (x > 0) {\n            this.go(state, \"right\", x, collisionTest);\n            x = 0;\n          } else {\n            this.go(state, \"left\", -x, collisionTest);\n            x = 0;\n          }\n        }\n      }\n\n    }\n\n    face (direction) {\n      var self = this;\n\n      var animation = \"face\" + direction;\n      if (this.animation != animation) {\n        this.sprite.gotoAndStop(animation);\n        Game.update();\n      }\n    }\n\n\n\n\n    // 这个函数是测试某个方向能否走，能移动则移动\n    // direction的值有up，down，left，right四种可能\n    // 建立这个函数是因为一次行走虽然是一次，但是也可以潮四个角方向走，实际就要执行两次CheckDirection\n    CheckDirection (direction, step, collisionTest) {\n\n      var oldX = this.sprite.x;\n      var oldY = this.sprite.y;\n\n      switch (direction) {\n        case \"up\":\n          this.sprite.y += -step;\n          break;\n        case \"down\":\n          this.sprite.y += step;\n          break;\n        case \"left\":\n          this.sprite.x += -step;\n          break;\n        case \"right\":\n          this.sprite.x += step;\n          break;\n      }\n\n      this.sprite.x = parseInt(this.sprite.x);\n      this.sprite.y = parseInt(this.sprite.y);\n\n      var t = Game.area.map.tile(this.sprite.x, this.sprite.y);\n\n      var tested = {};\n\n      // 参数t中记录了某个方格的方位xy，测试这个方格是否和玩家有冲突\n      var CheckCollision = (t) => {\n        if (t.x < 0 || t.y < 0 || t.x >= Game.area.map.data.width || t.y >= Game.area.map.data.height)\n          return true;\n\n        var i = t.x + \"-\" + t.y;\n        if (tested.hasOwnProperty(i))\n          return tested[i];\n\n        if (Game.area.map.blockedMap[t.y] && Game.area.map.blockedMap[t.y][t.x]) {\n          if (Game.actorCollision(this.sprite, Game.area.map.blockedMap[t.y][t.x])) {\n            tested[i] = true;\n            return true;\n          }\n        }\n        tested[i] = false;\n        return false;\n      };\n\n      var collision = false;\n\n      if (collisionTest) {\n        if (collision == false) collision = CheckCollision(t);\n\n        if (collision == false) collision = CheckCollision({x: t.x, y: t.y + 1});\n        if (collision == false) collision = CheckCollision({x: t.x, y: t.y - 1});\n        if (collision == false) collision = CheckCollision({x: t.x - 1, y: t.y});\n        if (collision == false) collision = CheckCollision({x: t.x + 1, y: t.y});\n\n        if (collision == false) collision = CheckCollision({x: t.x + 1, y: t.y - 1});\n        if (collision == false) collision = CheckCollision({x: t.x + 1, y: t.y + 1});\n        if (collision == false) collision = CheckCollision({x: t.x - 1, y: t.y - 1});\n        if (collision == false) collision = CheckCollision({x: t.x - 1, y: t.y + 1});\n      }\n\n      // 碰撞了\n      if (collision) {\n        this.sprite.x = oldX;\n        this.sprite.y = oldY;\n        return false;\n      } else {\n        this.infoBox.x = this.sprite.x;\n        this.infoBox.y = this.sprite.y - this.sprite.spriteSheet.getFrame(0).regY - 20;\n\n        return true;\n      }\n    }\n\n    go (state, direction, step, collisionTest) {\n      // 如果正在战斗动画，则不走\n      if (this.sprite.paused == false && this.sprite.currentAnimation.match(/spellcast|thrust|slash|shoot/)) {\n        return false;\n      }\n\n      if (this.data.weapons) {\n        if (this.bowSprite.paused == false || this.daggerSprite.paused == false || this.spearSprite.paused == false || this.woodwandSprite.paused == false)\n          return false;\n      }\n\n      if (typeof collisionTest == \"undefined\") {\n        collisionTest = true;\n      }\n\n      // 八个方向的检测\n      // 以四个角度方向为例，如果玩家希望走 右上，如果右走不了，只会会走上；上走不了，只会走右；右和上都走不了，则停止\n      // 就算走不了，也改变人物的面部朝向\n      switch (direction) {\n        case \"upleft\":\n          if (this.CheckDirection(\"up\", step, collisionTest) | this.CheckDirection(\"left\", step, collisionTest)) {\n            this.play(state + \"up\", 1);\n          } else {\n            this.play(\"faceup\", 0);\n          }\n          break;\n        case \"upright\":\n          if (this.CheckDirection(\"up\", step, collisionTest) | this.CheckDirection(\"right\", step, collisionTest)) {\n            this.play(state + \"up\", 1);\n          } else {\n            this.play(\"faceup\", 0);\n          }\n          break;\n        case \"downleft\":\n          if (this.CheckDirection(\"down\", step, collisionTest) | this.CheckDirection(\"left\", step, collisionTest)) {\n            this.play(state + \"down\", 1);\n          } else {\n            this.play(\"facedown\", 0);\n          }\n          break;\n        case \"downright\":\n          if (this.CheckDirection(\"down\", step, collisionTest) | this.CheckDirection(\"right\", step, collisionTest)) {\n            this.play(state + \"down\", 1);\n          } else {\n            this.play(\"facedown\", 0);\n          }\n          break;\n        case \"up\":\n          if (this.CheckDirection(\"up\", step, collisionTest)) {\n            this.play(state + \"up\", 1);\n          } else {\n            this.play(\"faceup\", 0);\n          }\n          break;\n        case \"down\":\n          if (this.CheckDirection(\"down\", step, collisionTest)) {\n            this.play(state + \"down\", 1);\n          } else {\n            this.play(\"facedown\", 0);\n          }\n          break;\n        case \"left\":\n          if (this.CheckDirection(\"left\", step, collisionTest)) {\n            this.play(state + \"left\", 1);\n          } else {\n            this.play(\"faceleft\", 0);\n          }\n          break;\n        case \"right\":\n          if (this.CheckDirection(\"right\", step, collisionTest)) {\n            this.play(state + \"right\", 1);\n          } else {\n            this.play(\"faceright\", 0);\n          }\n          break;\n      }\n\n      if (this.id == Game.hero.id) {\n        Game.io.sync(\"move\", {\n          x: this.sprite.x,\n          y: this.sprite.y,\n          speed: step\n        });\n      }\n    }\n\n    remove (layer) {\n      layer.removeChild(this.sprite);\n      layer.removeChild(this.infoBox);\n      Game.update();\n    }\n\n    draw (layer) {\n      var x = this.data.x;\n      var y = this.data.y;\n\n      if (typeof x != \"number\" || typeof y != \"number\") {\n        x = Game.area.map.data.entry.x;\n        y = Game.area.map.data.entry.y;\n      }\n\n      this.infoBox.x = x;\n      this.infoBox.y = y - this.sprite.spriteSheet.getFrame(0).regY - 20;\n\n      this.sprite.x = x;\n      this.sprite.y = y;\n\n      layer.addChild(this.sprite);\n      layer.addChild(this.infoBox);\n\n      Game.update()\n    }\n\n    focus () {\n      var self = this;\n\n      this.infoBox.x = this.sprite.x;\n      this.infoBox.y = this.sprite.y - this.sprite.spriteSheet.getFrame(0).regY - 20\n\n      Game.stage.regX = parseInt(this.sprite.x - Game.config.width / 2);\n      Game.stage.regY = parseInt(this.sprite.y - Game.config.height / 2);\n    }\n\n  } // ActorClass\n\n})();\n"]}