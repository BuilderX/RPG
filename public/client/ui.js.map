{"version":3,"sources":["public/src/ui.js"],"names":[],"mappings":"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","file":"public/src/ui.js","sourcesContent":["/*\n\nOnline A-RPG Game, Built using Node.js + createjs\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  class BoxClass {\n    constructor (x, y) {\n      var box = new createjs.Shape();\n      this.box = box;\n\n      box.graphics\n      .beginFill(\"gray\")\n      .drawRect(0, 0, 50, 50);\n      box.regX = 25;\n      box.regY = 25;\n      box.x = x;\n      box.y = y;\n    }\n\n    get x () {\n      return this.box.x;\n    }\n\n    set x (v) {\n      this.box.x = v;\n    }\n\n    get y () {\n      return this.box.y;\n    }\n\n    set y (v) {\n      this.box.y = v;\n    }\n\n    set color (v) {\n      this.box.graphics\n      .clear()\n      .beginFill(v)\n      .drawRect(0, 0, 50, 50);\n      Game.update();\n    }\n\n    on () {\n      this.box.on.apply(this.box, arguments);\n    }\n\n    off () {\n      this.box.off.apply(this.box, arguments);\n    }\n  }\n\n\n  class IconClass {\n    constructor (url, x, y) {\n      var icon = new createjs.Bitmap(Game.resources[url]);\n      this.icon = icon;\n\n      icon.regX = icon.image.width / 2;\n      icon.regY = icon.image.height / 2;\n      icon.x = x;\n      icon.y = y;\n    }\n\n    get x () {\n      return this.icon.x;\n    }\n\n    set x (v) {\n      this.icon.x = v;\n    }\n\n    get y () {\n      return this.icon.y;\n    }\n\n    set y (v) {\n      this.icon.y = v;\n    }\n\n    on (event, callback) {\n      this.icon.on.apply(this.icon, arguments);\n    }\n\n    off () {\n      this.icon.off.apply(this.icon, arguments);\n    }\n  }\n\n\n  class ButtonClass {\n    constructor (x, y) {\n      var button = new createjs.Shape();\n      this.button = button;\n\n      button.graphics\n      .clear()\n      .beginFill(\"gray\")\n      .drawRect(0, 0, 50, 50);\n      button.regX = 25;\n      button.regY = 25;\n      button.x = x;\n      button.y = y;\n      button.shadow = new createjs.Shadow(\"black\", 2, 2, 2);\n    }\n\n    get x () {\n      return this.button.x;\n    }\n\n    set x (v) {\n      this.button.x = v;\n    }\n\n    get y () {\n      return this.button.y;\n    }\n\n    set y (v) {\n      this.button.y = v;\n    }\n\n    set color (v) {\n      this.button.graphics\n      .clear()\n      .beginFill(v)\n      .drawRect(0, 0, 50, 50);\n      Game.update();\n    }\n\n    on () {\n      this.button.on.apply(this.button, arguments);\n    }\n\n    off () {\n      this.button.off.apply(this.button, arguments);\n    }\n  }\n\n\n  Game.oninit(function () {\n    Game.stage.on(\"drawstart\", function () {\n      if (Game.uiLayer.numChildren) {\n        Game.uiLayer.children.forEach(function (element) {\n          element.x = parseInt(Game.hero.sprite.x);\n          element.y = parseInt(Game.hero.sprite.y);\n        });\n\n        if (Game.ui.redPoint) {\n          var heroX = parseInt(Game.hero.sprite.x / Game.area.map.width * Game.area.map.minimap.image.width);\n          var heroY = parseInt(Game.hero.sprite.y / Game.area.map.height * Game.area.map.minimap.image.height);\n          Game.ui.redPoint.x = heroX + 187;\n          Game.ui.redPoint.y = heroY + 12;\n        }\n\n      }\n    });\n  });\n\n  Game.ui = {};\n\n  Game.ui.showMessage = function (data) {\n    console.log(\"message\", data);\n  };\n\n  Game.ui.clickSpell = function (num) {\n    if (Game.hero && Game.hero.fire) {\n      var cooldown = Game.hero.fire(num);\n      if (cooldown > 0) {\n\n        var spellIcon = Game.ui.spellBar[num];\n        spellIcon.color = \"green\";\n\n        cooldown -= 100;\n\n        createjs.Tween.get(spellIcon.box).to({alpha: 0}, cooldown).call(function () {\n          spellIcon.color = \"gray\";\n          spellIcon.box.alpha = 1;\n          Game.update();\n        }).on(\"change\", function () {\n          Game.update();\n        });\n\n      }\n    }\n  };\n\n  var lastItemSelectIndex = -1;\n  var lastItemSelectType = null;\n\n  var indexToEquipment = {\n    \"0\": \"head\",\n    \"1\": \"neck\",\n    \"2\": \"body\",\n    \"3\": \"feet\",\n    \"4\": \"righthand\",\n    \"5\": \"lefthand\",\n    \"6\": \"leftring\",\n    \"7\": \"rightring\"\n  }\n\n  function ItemChanged () {\n    var items = [];\n    items.length = Game.hero.data.items.length;\n    for (var i = 0; i < items.length; i++) {\n      if (Game.hero.data.items[i])\n        items[i] = Game.hero.data.items[i].id;\n    }\n\n    var equipment = {};\n\n    for (var key in Game.hero.data.equipment) {\n      if (Game.hero.data.equipment[key])\n        equipment[key] = Game.hero.data.equipment[key].id;\n      else\n        equipment[key] = null;\n    }\n\n    Game.io.updateHero({\n      items: items,\n      equipment: equipment\n    });\n  }\n\n  function ItemSelect (type, index) {\n    var itemObj = null;\n\n    if (type == \"equipment\") {\n      itemObj = Game.hero.data.equipment[indexToEquipment[index]];\n      if (!itemObj) return;\n    }\n\n    if (type == \"item\") {\n      itemObj = Game.hero.data.items[index];\n      if (!itemObj) return;\n    }\n\n    // 分割，每行最多22个字符宽度\n    var text = Game.dialogue.textSplit(itemObj.data.description, 22);\n\n    if (Game.ui.itemText) {\n      Game.ui.itemWindow.removeChild(Game.ui.itemText);\n      Game.ui.itemText = null;\n    }\n\n    var itemText = new createjs.Text(text);\n    itemText.x = 770;\n    itemText.y = 40;\n    Game.ui.itemWindow.addChild(itemText);\n    Game.ui.itemText = itemText;\n\n    lastItemSelectType = type;\n    lastItemSelectIndex = index;\n\n    Game.ui.armorBox.forEach(function (element) {\n      element.color = \"gray\";\n    });\n\n    Game.ui.itemBox.forEach(function (element) {\n      element.color = \"gray\";\n    });\n\n    if (type == \"equipment\") {\n      Game.ui.armorBox[index].color = \"green\";\n    } else if (type == \"item\") {\n      Game.ui.itemBox[index].color = \"green\";\n    }\n    Game.update();\n  }\n/*\n  ItemSelect = function (type, index) {\n    if (lastItemSelectType == null) {\n\n      var itemObj = null;\n\n      if (type == \"equipment\") {\n        itemObj = Game.hero.data.equipment[indexToEquipment[index]];\n        if (!itemObj) return;\n      }\n\n      if (type == \"item\") {\n        itemObj = Game.hero.data.items[index];\n        if (!itemObj) return;\n      }\n\n      // 分割，每行最多22个字符宽度\n      var text = Game.dialogue.textSplit(itemObj.data.description, 22);\n\n      if (Game.ui.itemText) {\n        Game.ui.itemWindow.removeChild(Game.ui.itemText);\n        Game.ui.itemText = null;\n      }\n\n      var itemText = new createjs.Text(text);\n      itemText.x = 770;\n      itemText.y = 40;\n      Game.ui.itemWindow.addChild(itemText);\n      Game.ui.itemText = itemText;\n\n      lastItemSelectType = type;\n      lastItemSelectIndex = index;\n\n      if (type == \"equipment\") {\n        Game.ui.armorBox[index].color = \"green\";\n      } else if (type == \"item\") {\n        Game.ui.itemBox[index].color = \"green\";\n      }\n      Game.update();\n    } else {\n\n      if (lastItemSelectType == \"equipment\" && type == \"equipment\") {\n\n        Game.ui.armorBox[lastItemSelectIndex].color = \"gray\";\n\n        if (lastItemSelectIndex != index) {\n          lastItemSelectIndex = -1;\n          lastItemSelectType = null;\n\n          return ItemSelect(type, index);\n        }\n      }\n\n      if (lastItemSelectType == \"item\" && type == \"item\") {\n        if (lastItemSelectIndex == index) {\n          Game.ui.itemBox[index].color = \"gray\";\n        } else {\n          var t = Game.hero.data.items[lastItemSelectIndex];\n          Game.hero.data.items[lastItemSelectIndex] = Game.hero.data.items[index];\n          Game.hero.data.items[index] = t;\n\n          ItemChanged();\n\n          Game.uiLayer.removeChild(Game.ui.itemWindow);\n          Game.ui.itemWindow = null;\n          Game.ui.openItem();\n        }\n      }\n\n      if (lastItemSelectType == \"equipment\" && type == \"item\") {\n        if (Game.hero.data.items[index]) {\n          Game.ui.armorBox[lastItemSelectIndex].color = \"gray\";\n        } else {\n          Game.hero.data.items[index] = Game.hero.data.equipment[indexToEquipment[lastItemSelectIndex]];\n          Game.hero.data.equipment[indexToEquipment[lastItemSelectIndex]] = null;\n\n          ItemChanged();\n\n          Game.uiLayer.removeChild(Game.ui.itemWindow);\n          Game.ui.itemWindow = null;\n          Game.ui.openItem();\n        }\n      }\n\n      if (lastItemSelectType == \"item\" && type == \"equipment\") {\n        var CheckFit = function (itemIndex, equipmentIndex) {\n          var itemType = Game.hero.data.items[itemIndex].data.equip;\n          var equipmentType = indexToEquipment[equipmentIndex];\n          if (itemType == equipmentType)\n            return true;\n          if (itemType == \"onehand\" && (equipmentType == \"righthand\" || equipmentType == \"lefthand\"))\n            return true;\n          if (itemType == \"twohand\" && equipmentType == \"righthand\")\n            return true;\n          return false;\n        }\n\n        if (CheckFit(lastItemSelectIndex, index)) {\n          var t = Game.hero.data.equipment[indexToEquipment[index]];\n          Game.hero.data.equipment[indexToEquipment[index]] = Game.hero.data.items[lastItemSelectIndex];\n          Game.hero.data.items[lastItemSelectIndex] = t;\n\n          ItemChanged();\n\n          Game.uiLayer.removeChild(Game.ui.itemWindow);\n          Game.ui.itemWindow = null;\n          Game.ui.openItem();\n        } else {\n          Game.ui.itemBox[lastItemSelectIndex].color = \"gray\";\n        }\n      }\n\n      lastItemSelectIndex = -1;\n      lastItemSelectType = null;\n    }\n  };\n*/\n  function ItemExchange (lastItemSelectType, lastItemSelectIndex, type, index) {\n\n    if (lastItemSelectType == \"equipment\" && type == \"equipment\") {\n\n      Game.ui.armorBox[lastItemSelectIndex].color = \"gray\";\n\n      if (lastItemSelectIndex != index) {\n        lastItemSelectIndex = -1;\n        lastItemSelectType = null;\n\n        return ItemSelect(type, index);\n      }\n    }\n\n    if (lastItemSelectType == \"item\" && type == \"item\") {\n      if (lastItemSelectIndex == index) {\n        Game.ui.itemBox[index].color = \"gray\";\n      } else {\n        var t = Game.hero.data.items[lastItemSelectIndex];\n        Game.hero.data.items[lastItemSelectIndex] = Game.hero.data.items[index];\n        Game.hero.data.items[index] = t;\n\n        ItemChanged();\n\n        Game.uiLayer.removeChild(Game.ui.itemWindow);\n        Game.ui.itemWindow = null;\n        Game.ui.openItem();\n      }\n    }\n\n    if (lastItemSelectType == \"equipment\" && type == \"item\") {\n      if (Game.hero.data.items[index]) {\n        Game.ui.armorBox[lastItemSelectIndex].color = \"gray\";\n      } else {\n        Game.hero.data.items[index] = Game.hero.data.equipment[indexToEquipment[lastItemSelectIndex]];\n        Game.hero.data.equipment[indexToEquipment[lastItemSelectIndex]] = null;\n\n        ItemChanged();\n\n        Game.uiLayer.removeChild(Game.ui.itemWindow);\n        Game.ui.itemWindow = null;\n        Game.ui.openItem();\n      }\n    }\n\n    if (lastItemSelectType == \"item\" && type == \"equipment\") {\n      var CheckFit = function (itemIndex, equipmentIndex) {\n        var itemType = Game.hero.data.items[itemIndex].data.equip;\n        var equipmentType = indexToEquipment[equipmentIndex];\n        if (itemType == equipmentType)\n          return true;\n        if (itemType == \"onehand\" && (equipmentType == \"righthand\" || equipmentType == \"lefthand\"))\n          return true;\n        if (itemType == \"twohand\" && equipmentType == \"righthand\")\n          return true;\n        return false;\n      }\n\n      if (CheckFit(lastItemSelectIndex, index)) {\n        var t = Game.hero.data.equipment[indexToEquipment[index]];\n        Game.hero.data.equipment[indexToEquipment[index]] = Game.hero.data.items[lastItemSelectIndex];\n        Game.hero.data.items[lastItemSelectIndex] = t;\n\n        ItemChanged();\n\n        Game.uiLayer.removeChild(Game.ui.itemWindow);\n        Game.ui.itemWindow = null;\n        Game.ui.openItem();\n      } else {\n        Game.ui.itemBox[lastItemSelectIndex].color = \"gray\";\n      }\n    }\n\n    lastItemSelectIndex = -1;\n    lastItemSelectType = null;\n  }\n\n  Game.ui.openItem = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.itemWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.itemWindow);\n      Game.ui.itemWindow = null;\n      Game.ui.initBottomBar();\n      lastItemSelectIndex = -1;\n      lastItemSelectType = null;\n      return;\n    }\n\n    var background = new createjs.Shape();\n    background.graphics\n    .beginStroke(\"black\")\n    .beginFill(\"grey\")\n    .drawRoundRect(0, 0, 475, 450, 5);\n    background.x = 480;\n    background.y = 5;\n     background.alpha = 0.6;\n\n    var armorBox = [];\n    var armorBoxWidth = 4;\n    var armorBoxHeight = 2;\n    armorBox.length = armorBoxWidth * armorBoxHeight;\n\n    for (var i = 0; i < armorBoxHeight; i++) {\n      for (var j = 0; j < armorBoxWidth; j++) {\n        (function (i, j) {\n          var index = i * armorBoxWidth + j;\n          var armorIcon = armorBox[index] = new BoxClass(540 + j * 60, 50 + i * 60);\n\n          armorIcon.on(\"click\", function () {\n            ItemSelect(\"equipment\", index);\n          });\n        })(i, j);\n      }\n    }\n\n    Game.ui.armorBox = armorBox;\n\n    var itemBox = [];\n    var itemBoxWidth = 6;\n    var itemBoxHeight = 4;\n    itemBox.length = itemBoxWidth * itemBoxHeight;\n\n    for (var i = 0; i < itemBoxHeight; i++) {\n      for (var j = 0; j < itemBoxWidth; j++) {\n        (function (i, j) {\n          var index = i * itemBoxWidth + j;\n          var itemIcon = itemBox[index] = new BoxClass(540 + j * 60, 170 + i * 60);\n\n          itemIcon.on(\"click\", function () {\n            ItemSelect(\"item\", index);\n          });\n        })(i, j);\n      }\n    }\n\n    Game.ui.itemBox = itemBox;\n\n    var itemUseButton = new ButtonClass(900, 170);\n    var itemDropButton = new ButtonClass(900, 230);\n    var itemPrevButton = new ButtonClass(900, 290);\n    var itemNextButton = new ButtonClass(900, 350);\n    var useIcon = new IconClass(\"/image/use.png\", itemUseButton.x, itemUseButton.y);\n    var dropIcon = new IconClass(\"/image/drop.png\", itemDropButton.x, itemDropButton.y);\n    var prevIcon = new IconClass(\"/image/up.png\", itemPrevButton.x, itemPrevButton.y);\n    var nextIcon = new IconClass(\"/image/down.png\", itemNextButton.x, itemNextButton.y);\n\n    var itemGoldBox = new createjs.Text(\"10000000G\");\n    itemGoldBox.color = \"gold\";\n    itemGoldBox.x = 510;\n    itemGoldBox.y = 410;\n\n    var itemText = new createjs.Shape();\n    itemText.graphics\n    .beginFill(\"gray\")\n    .drawRect(0, 0, 170, 110);\n    itemText.x = 755;\n    itemText.y = 25;\n\n    // 装备栏的8个空\n\n    var headIcon = new IconClass(\"/image/head.png\", armorBox[0].x, armorBox[0].y);\n    var neckIcon = new IconClass(\"/image/neck.png\", armorBox[1].x, armorBox[1].y);\n    var bodyIcon = new IconClass(\"/image/body.png\", armorBox[2].x, armorBox[2].y);\n    var feetIcon = new IconClass(\"/image/feet.png\", armorBox[3].x, armorBox[3].y);\n    var righthandIcon = new IconClass(\"/image/righthand.png\", armorBox[4].x, armorBox[4].y);\n    var lefthandIcon = new IconClass(\"/image/lefthand.png\", armorBox[5].x, armorBox[5].y);\n    var leftringIcon = new IconClass(\"/image/ring.png\", armorBox[6].x, armorBox[6].y);\n    var rightringIcon = new IconClass(\"/image/ring.png\", armorBox[7].x, armorBox[7].y);\n\n\n    var itemWindow = new createjs.Container();\n    itemWindow.regX = 480;\n    itemWindow.regY = 270;\n\n    itemWindow.addChild(background);\n    itemWindow.addChild(itemGoldBox);\n    itemWindow.addChild(itemText);\n\n    itemWindow.addChild(itemUseButton.button);\n    itemWindow.addChild(itemDropButton.button);\n    itemWindow.addChild(itemPrevButton.button);\n    itemWindow.addChild(itemNextButton.button);\n\n    itemWindow.addChild(useIcon.icon);\n    itemWindow.addChild(dropIcon.icon);\n    itemWindow.addChild(prevIcon.icon);\n    itemWindow.addChild(nextIcon.icon);\n\n    armorBox.forEach(function (element) {\n     itemWindow.addChild(element.box);\n    });\n\n    itemBox.forEach(function (element) {\n     itemWindow.addChild(element.box);\n    });\n\n    itemWindow.addChild(headIcon.icon);\n    itemWindow.addChild(neckIcon.icon);\n    itemWindow.addChild(bodyIcon.icon);\n    itemWindow.addChild(feetIcon.icon);\n    itemWindow.addChild(righthandIcon.icon);\n    itemWindow.addChild(lefthandIcon.icon);\n    itemWindow.addChild(leftringIcon.icon);\n    itemWindow.addChild(rightringIcon.icon);\n\n    function CopyIcon (item, icon) {\n      var t = item.bitmap.clone();\n      t.x = icon.x;\n      t.y = icon.y;\n      itemWindow.addChild(t);\n\n      var X = icon.x;\n      var Y = icon.y;\n\n      icon.on(\"mousedown\", function (event) {\n        icon.offset = {\n          x: icon.x - event.stageX / Game.stage.scaleX,\n          y: icon.y - event.stageY / Game.stage.scaleY\n        };\n        t.offset = icon.offset;\n        Game.update();\n      });\n\n      icon.on(\"pressmove\", function (event) {\n        icon.x = event.stageX / Game.stage.scaleX + icon.offset.x;\n        icon.y = event.stageY / Game.stage.scaleY + icon.offset.y;\n        t.x = icon.x;\n        t.y = icon.y;\n        Game.update();\n      });\n\n      icon.on(\"pressup\", function (event) {\n        var x = event.stageX / Game.stage.scaleX + icon.offset.x;\n        var y = event.stageY / Game.stage.scaleY + icon.offset.y;\n\n        var iconType = null;\n        var iconIndex = -1;\n\n        var minDistance = 9999;\n        var minType = null;\n        var minIndex = -1;\n\n        itemBox.forEach(function (element, index) {\n          if (element == icon) {\n            iconType = \"item\";\n            iconIndex = index;\n            return;\n          }\n          var d = 0;\n          d += Math.pow(element.x - icon.x, 2);\n          d += Math.pow(element.y - icon.y, 2);\n          d = Math.sqrt(d);\n          if (d < minDistance) {\n            minDistance = d;\n            minType = \"item\";\n            minIndex = index;\n          }\n        });\n\n        armorBox.forEach(function (element, index) {\n          if (element == icon) {\n            iconType = \"equipment\";\n            iconIndex = index;\n            return;\n          }\n          var d = 0;\n          d += Math.pow(element.x - icon.x, 2);\n          d += Math.pow(element.y - icon.y, 2);\n          d = Math.sqrt(d);\n          if (d < minDistance) {\n            minDistance = d;\n            minType = \"equipment\";\n            minIndex = index;\n          }\n        });\n\n        icon.x = X;\n        icon.y = Y;\n        t.x = icon.x;\n        t.y = icon.y;\n\n        if (iconType && minType && minDistance < 20) {\n          ItemExchange(iconType, iconIndex, minType, minIndex);\n          //console.log(minType, minDistance, minIndex);\n        }\n\n        Game.update();\n\n      });\n\n    }\n\n    if (heroObj.data.equipment.head)\n      CopyIcon(heroObj.data.equipment.head, armorBox[0]);\n    if (heroObj.data.equipment.neck)\n      CopyIcon(heroObj.data.equipment.neck, armorBox[1]);\n    if (heroObj.data.equipment.body)\n      CopyIcon(heroObj.data.equipment.body, armorBox[2]);\n    if (heroObj.data.equipment.feet)\n      CopyIcon(heroObj.data.equipment.feet, armorBox[3]);\n    if (heroObj.data.equipment.righthand)\n      CopyIcon(heroObj.data.equipment.righthand, armorBox[4]);\n    if (heroObj.data.equipment.lefthand)\n      CopyIcon(heroObj.data.equipment.lefthand, armorBox[5]);\n    if (heroObj.data.equipment.leftring)\n      CopyIcon(heroObj.data.equipment.leftring, armorBox[6]);\n    if (heroObj.data.equipment.rightring)\n      CopyIcon(heroObj.data.equipment.rightring, armorBox[7]);\n\n    heroObj.data.items.forEach(function (element, index) {\n      if (element)\n        CopyIcon(element, itemBox[index]);\n    });\n\n    Game.uiLayer.addChild(itemWindow);\n    Game.ui.itemWindow = itemWindow;\n\n    Game.ui.initBottomBar();\n  };\n\n\n\n  Game.ui.openSkill = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.skillWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.skillWindow);\n      Game.ui.skillWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    var background = new createjs.Shape();\n    background.graphics\n    .beginStroke(\"black\")\n    .beginFill(\"grey\")\n    .drawRoundRect(0, 0, 470, 450, 5);\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n    var skillWindow = new createjs.Container();\n    skillWindow.regX = 480;\n    skillWindow.regY = 270;\n\n    skillWindow.addChild(background);\n\n    Game.uiLayer.addChild(skillWindow);\n    Game.ui.skillWindow = skillWindow;\n\n    // 再次open，即关闭\n    Game.ui.openInformation();\n  };\n\n  var lastSpellSelectIndex = -1;\n  var lastSpellSelectType = null;\n\n  Game.ui.spellSelect = function (type, index) {\n    if (lastSpellSelectType == null) {\n\n      var spellId = \"\";\n\n      if (type == \"book\") {\n        spellId = Object.keys(Game.hero.data.spells)[index];\n        if (!spellId) return;\n      }\n\n      if (type == \"bar\") {\n        spellId = Game.hero.data.spellbar[index];\n        if (!spellId) return;\n      }\n\n      // 分割，每行最多40个字符宽度\n      var text = Game.dialogue.textSplit(Game.hero.data.spells[spellId].data.description, 40);\n\n      if (Game.ui.spellText) {\n        Game.ui.spellWindow.removeChild(Game.ui.spellText);\n        Game.ui.spellText = null;\n      }\n\n      var spellText = new createjs.Text(text);\n      spellText.x = 50;\n      spellText.y = 340;\n      Game.ui.spellWindow.addChild(spellText);\n      Game.ui.spellText = spellText;\n\n      lastSpellSelectType = type;\n      lastSpellSelectIndex = index;\n      if (type == \"bar\") {\n        Game.ui.spellBar[index].color = \"green\";\n      } else if (type == \"book\") {\n        Game.ui.spellBook[index].color = \"green\";\n      }\n      Game.update();\n    } else {\n      if (lastSpellSelectType == \"book\" && type == \"bar\") {\n        var spellBookSelect = Object.keys(Game.hero.data.spells)[lastSpellSelectIndex];\n        var spellBarSelect = Game.hero.data.spellbar[index];\n        if (spellBookSelect != spellBarSelect) {\n          if (Game.hero.data.spellbar.indexOf(spellBookSelect) == -1) {\n            Game.hero.data.spellbar[index] = spellBookSelect;\n\n            Game.ui.spellBook[lastSpellSelectIndex].color = \"green\";\n\n            Game.io.updateHero({spellbar: Game.hero.data.spellbar});\n\n            Game.ui.initBottomBar();\n          } else {\n            Game.ui.spellBook[lastSpellSelectIndex].color = \"green\";\n          }\n        } else {\n          Game.ui.spellBook[lastSpellSelectIndex].color = \"gray\";\n        }\n      }\n\n      if (lastSpellSelectType == \"book\" && type == \"book\") {\n        Game.ui.spellBook[lastSpellSelectIndex].color = \"gray\";\n\n        if (lastSpellSelectIndex != index) {\n          lastSpellSelectIndex = -1;\n          lastSpellSelectType = null;\n\n          return Game.ui.spellSelect(type, index);\n        }\n      }\n\n      if (lastSpellSelectType == \"bar\" && type == \"bar\") {\n\n        if (lastSpellSelectIndex == index) {\n          Game.hero.data.spellbar[index] = undefined;\n          Game.ui.initBottomBar();\n        } else {\n          var spellBarSelect1 = Game.hero.data.spellbar[lastSpellSelectIndex];\n          var spellBarSelect2 = Game.hero.data.spellbar[index];\n          var t = spellBarSelect1;\n          Game.hero.data.spellbar[lastSpellSelectIndex] = spellBarSelect2;\n          Game.hero.data.spellbar[index] = t;\n\n          Game.io.updateHero({spellbar: Game.hero.data.spellbar});\n          Game.ui.initBottomBar();\n        }\n\n      }\n\n      lastSpellSelectIndex = -1;\n      lastSpellSelectType = null;\n    }\n  };\n\n  Game.ui.openSpell = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    var background = new createjs.Shape();\n    background.graphics\n    .beginStroke(\"black\")\n    .beginFill(\"grey\")\n    .drawRoundRect(0, 0, 470, 450, 5);\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n\n    var spellBook = [];\n    spellBook.length = heroObj.data.spellcount;\n\n    var spellBookWidth = 7;\n    var spellBookHeight = 7;\n    var spellCount = 0;\n\n    for (var i = 0; i < spellBookHeight; i++) {\n      for (var j = 0; j < spellBookWidth; j++) {\n        (function (i, j) {\n          if (spellCount >= spellBook.length)\n            return;\n          var index = i * spellBookWidth + j;\n          spellBook[index] = new BoxClass(60 + j * 60, 50 + i * 60);\n\n          spellBook[index].on(\"click\", function () {\n            Game.ui.spellSelect(\"book\", index);\n          });\n          spellCount++;\n        })(i, j);\n      }\n    }\n\n    Game.ui.spellBook = spellBook;\n\n    var releaseButton = new ButtonClass(420, 350);\n    var releaseIcon = new IconClass(\"/image/release.png\", releaseButton.x, releaseButton.y);\n\n    var spellText = new createjs.Shape();\n    spellText.graphics\n    .beginFill(\"gray\")\n    .drawRect(0, 0, 350, 110);\n    spellText.x = 35;\n    spellText.y = 325;\n\n    var spellWindow = new createjs.Container();\n    spellWindow.regX = 480;\n    spellWindow.regY = 270;\n\n    spellWindow.addChild(background);\n    spellWindow.addChild(releaseButton.button);\n    spellWindow.addChild(releaseIcon.icon);\n    spellWindow.addChild(spellText);\n\n    spellBook.forEach(function (element) {\n      spellWindow.addChild(element.box);\n    });\n\n    (function AddHeroSpellIcon () {\n      var index = 0;\n      for (var key in Game.hero.data.spells) {\n        (function (element) {\n          var t = element.icon.clone();\n          t.x = Game.ui.spellBook[index].x;\n          t.y = Game.ui.spellBook[index].y;\n          spellWindow.addChild(t);\n          index++;\n        })(Game.hero.data.spells[key]);\n      }\n    })();\n\n    Game.uiLayer.addChild(spellWindow);\n    Game.ui.spellWindow = spellWindow;\n\n    // 再次open信息窗口，即关闭信息窗口\n    Game.ui.openInformation();\n  };\n\n  Game.ui.openMap = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.mapWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.mapWindow);\n      Game.ui.mapWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n     var background = new createjs.Shape();\n     background.graphics\n     .beginStroke(\"black\")\n     .beginFill(\"grey\")\n     .drawRoundRect(0, 0, 950, 450, 5);\n     background.x = 5;\n     background.y = 5;\n     background.alpha = 0.6;\n\n     var mapWindow = new createjs.Container();\n     mapWindow.regX = 480;\n     mapWindow.regY = 270;\n\n     mapWindow.addChild(background);\n\n     // 转换玩家位置为小地图位置，修正小地图位置\n     var heroX = parseInt(Game.hero.sprite.x / Game.area.map.width * Game.area.map.minimap.image.width);\n     var heroY = parseInt(Game.hero.sprite.y / Game.area.map.height * Game.area.map.minimap.image.height);\n     Game.area.map.minimap.x = 480;\n     Game.area.map.minimap.y = 230;\n\n     var redPoint = new createjs.Shape();\n     redPoint.graphics\n     .beginFill(\"red\")\n     .drawRoundRect(0, 0, 4, 4, 3);\n     redPoint.regX = 2;\n     redPoint.regY = 2;\n     redPoint.x = heroX + 185;\n     redPoint.y = heroY + 30;\n\n     mapWindow.addChild(Game.area.map.minimap);\n     mapWindow.addChild(redPoint);\n\n     Game.ui.redPoint = redPoint;\n\n     Game.uiLayer.addChild(mapWindow);\n     Game.ui.mapWindow = mapWindow;\n\n     Game.ui.initBottomBar();\n  };\n\n  Game.ui.openSetting = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.settingWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.settingWindow);\n      Game.ui.settingWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    var background = new createjs.Shape();\n    background.graphics\n    .beginStroke(\"black\")\n    .beginFill(\"grey\")\n    .drawRoundRect(0, 0, 950, 450, 5);\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n    var settingWindow = new createjs.Container();\n    settingWindow.regX = 480;\n    settingWindow.regY = 270;\n\n    settingWindow.addChild(background);\n\n    Game.uiLayer.addChild(settingWindow);\n    Game.ui.settingWindow = settingWindow;\n\n    Game.ui.initBottomBar();\n  };\n\n  Game.ui.openInformation = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.informationWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.informationWindow);\n      Game.ui.informationWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    if (Game.ui.skillWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.skillWindow);\n      Game.ui.skillWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    if (Game.ui.spellWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.spellWindow);\n      Game.ui.spellWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    var background = new createjs.Shape();\n    background.graphics\n    .beginStroke(\"black\")\n    .beginFill(\"grey\")\n    .drawRoundRect(0, 0, 470, 450, 5);\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n    var hitpoint = new createjs.Text(\"生命: \" + heroObj.data.hitpoint);\n    hitpoint.x = 40;\n    hitpoint.y = 40;\n    var manapoint = new createjs.Text(\"精神力: \" + heroObj.data.manapoint);\n    manapoint.x = 40;\n    manapoint.y = 60;\n\n    var strength = new createjs.Text(\"力量: \" + heroObj.data.strength);\n    strength.x = 40;\n    strength.y = 80;\n    var dexterity = new createjs.Text(\"敏捷: \" + heroObj.data.dexterity);\n    dexterity.x = 40;\n    dexterity.y = 100;\n    var intelligence = new createjs.Text(\"体质: \" + heroObj.data.intelligence);\n    intelligence.x = 40;\n    intelligence.y = 120;\n    var constitution = new createjs.Text(\"智力: \" + heroObj.data.constitution);\n    constitution.x = 40;\n    constitution.y = 140;\n\n    var attack = new createjs.Text(\"攻击力: \" + heroObj.data.attack);\n    attack.x = 40;\n    attack.y = 160;\n    var defense = new createjs.Text(\"防御力: \" + heroObj.data.defense);\n    defense.x = 40;\n    defense.y = 180;\n    var magicAttack = new createjs.Text(\"魔法攻击: \" + heroObj.data.magicAttack);\n    magicAttack.x = 40;\n    magicAttack.y = 200;\n    var magicDefense = new createjs.Text(\"魔法防御: \" + heroObj.data.magicDefense);\n    magicDefense.x = 40;\n    magicDefense.y = 220;\n\n    var skillButton = new ButtonClass(60, 400);\n    var skillIcon = new IconClass(\"/image/skill.png\", skillButton.x, skillButton.y);\n    skillButton.on(\"click\", Game.ui.openSkill);\n\n    var spellButton = new ButtonClass(120, 400);\n    var spellIcon = new IconClass(\"/image/spell.png\", spellButton.x, spellButton.y);\n    spellButton.on(\"click\", Game.ui.openSpell);\n\n    var informationWindow = new createjs.Container();\n    informationWindow.regX = 480;\n    informationWindow.regY = 270;\n\n    informationWindow.addChild(background);\n\n    informationWindow.addChild(hitpoint);\n    informationWindow.addChild(manapoint);\n    informationWindow.addChild(strength);\n    informationWindow.addChild(dexterity);\n    informationWindow.addChild(intelligence);\n    informationWindow.addChild(constitution);\n    informationWindow.addChild(attack);\n    informationWindow.addChild(defense);\n    informationWindow.addChild(magicAttack);\n    informationWindow.addChild(magicDefense);\n\n    informationWindow.addChild(skillButton.button);\n    informationWindow.addChild(spellButton.button);\n    informationWindow.addChild(skillIcon.icon);\n    informationWindow.addChild(spellIcon.icon);\n\n    Game.uiLayer.addChild(informationWindow);\n\n    Game.ui.informationWindow = informationWindow;\n\n    Game.ui.initBottomBar();\n  }\n\n  Game.ui.initBottomBar = function () {\n\n    if (Game.ui.toolbar) {\n      Game.uiLayer.removeChild(Game.ui.toolbar);\n      Game.ui.toolbar = null;\n    }\n\n    var background = new createjs.Shape();\n    background.graphics\n    .beginStroke(\"black\")\n    .beginFill(\"grey\")\n    .drawRoundRect(0, 0, 950, 70, 5);\n    background.x = 5;\n    background.y = 465;\n    background.alpha = 0.6;\n\n    var hpbarBox = new createjs.Shape();\n    hpbarBox.graphics\n    .beginStroke(\"black\")\n    .drawRoundRect(0, 0, 110, 20, 3);\n    hpbarBox.x = 15;\n    hpbarBox.y = 475;\n\n    var hpbar = new createjs.Shape();\n    hpbar.graphics\n    .beginFill(\"green\")\n    .drawRoundRect(0, 0, 100, 20, 3);\n    hpbar.x = 15;\n    hpbar.y = 475;\n\n    var mpbarBox = new createjs.Shape();\n    mpbarBox.graphics\n    .beginStroke(\"black\")\n    .drawRoundRect(0, 0, 110, 20, 3);\n    mpbarBox.x = 15;\n    mpbarBox.y = 505;\n\n    var mpbar = new createjs.Shape();\n    mpbar.graphics\n    .beginFill(\"blue\")\n    .drawRoundRect(0, 0, 80, 20, 3);\n    mpbar.x = 15;\n    mpbar.y = 505;\n\n    var spellBar = [];\n    spellBar.length = 9;\n\n    for (var i = 0; i < spellBar.length; i++) {\n      (function (element, index, array) {\n        var spellIcon = spellBar[index] = new BoxClass(180 + index * 60, 500);\n\n        spellIcon.on(\"click\", function () {\n          if (Game.ui.spellWindow) {\n            Game.ui.spellSelect(\"bar\", index);\n          } else {\n            Game.ui.clickSpell(index);\n          }\n        });\n      })(spellBar[i], i, spellBar);\n    }\n\n    Game.ui.spellBar = spellBar;\n\n    // 四个按钮：\n\n    var informationButton = new ButtonClass(740, 500);\n    var informationIcon = new IconClass(\"/image/information.png\", informationButton.x, informationButton.y);\n    informationButton.on(\"click\", Game.ui.openInformation);\n    Game.ui.informationButton = informationButton;\n\n    var itemButton = new ButtonClass(800, 500);\n    var itemIcon = new IconClass(\"/image/item.png\", itemButton.x, itemButton.y);\n    itemButton.on(\"click\", Game.ui.openItem);\n    Game.ui.itemButton = itemButton;\n\n    var mapButton = new ButtonClass(860, 500);\n    var mapIcon = new IconClass(\"/image/map.png\", mapButton.x, mapButton.y);\n    mapButton.on(\"click\", Game.ui.openMap);\n    Game.ui.mapButton = mapButton;\n\n    var settingButton = new ButtonClass(920, 500);\n    var settingIcon = new IconClass(\"/image/setting.png\", settingButton.x, settingButton.y);\n    settingButton.on(\"click\", Game.ui.openSetting);\n    Game.ui.settingButton = settingButton;\n\n\n    var toolbar = new createjs.Container();\n    toolbar.regX = 480;\n    toolbar.regY = 270;\n\n    toolbar.addChild(background);\n    toolbar.addChild(hpbarBox);\n    toolbar.addChild(mpbarBox);\n    toolbar.addChild(hpbar);\n    toolbar.addChild(mpbar);\n\n    toolbar.addChild(informationButton.button);\n    toolbar.addChild(itemButton.button);\n    toolbar.addChild(mapButton.button);\n    toolbar.addChild(settingButton.button);\n\n    toolbar.addChild(informationIcon.icon);\n    toolbar.addChild(itemIcon.icon);\n    toolbar.addChild(mapIcon.icon);\n    toolbar.addChild(settingIcon.icon);\n\n    for (var i = 0; i < spellBar.length; i++) {\n      toolbar.addChild(spellBar[i].box);\n    }\n\n    Game.uiLayer.addChild(toolbar);\n    Game.ui.toolbar = toolbar;\n\n    (function AddHeroSpellBarIcon () {\n      Game.hero.data.spellbar.forEach(function (element, index) {\n        if (!Game.hero.data.spells[element])\n          return;\n        var t = Game.hero.data.spells[element].icon.clone();\n        t.x = Game.ui.spellBar[index].x;\n        t.y = Game.ui.spellBar[index].y;\n        Game.ui.toolbar.addChild(t);\n      });\n    })();\n\n    if (Game.ui.settingWindow) { // 如果开着，就要关\n      Game.ui.settingButton.color = \"green\";\n    }\n\n    if (Game.ui.informationWindow || Game.ui.skillWindow || Game.ui.spellWindow) { // 如果开着，就要关\n      Game.ui.informationButton.color = \"green\";\n    }\n\n    if (Game.ui.mapWindow) { // 如果开着，就要关\n      Game.ui.mapButton.color = \"green\";\n    }\n\n    if (Game.ui.itemWindow) { // 如果开着，就要关\n      Game.ui.itemButton.color = \"green\";\n    }\n\n    Game.update();\n\n  } // Game.ui.InitBottomBar\n\n  Game.oninit(function () {\n\n\n\n    window.addEventListener(\"keydown\", function (event) {\n      event = event || window.event;\n      var keyCode = event.keyCode;\n\n    });\n\n\n\n  });\n\n\n}());\n"]}