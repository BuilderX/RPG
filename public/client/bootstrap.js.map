{"version":3,"sources":["public/src/bootstrap.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,CAAC,YAAY;AACX,cAAY,CAAC;;AAEb,MAAI,CAAC,EAAE,CAAC,IAAI,CAAC,YAAY;AACvB,WAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;GACjC,CAAC,CAAC;;;AAGH,QAAM,CAAC,KAAK,GAAG,SAAS,KAAK,CAAE,KAAK,EAAE;AACpC,QAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC;AACjD,QAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;;AAEzD,QAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE;AACvB,WAAK,CAAC,SAAS,CAAC,CAAC;AACjB,aAAO;KACR;;AAED,QAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE;AAC3B,WAAK,CAAC,QAAQ,CAAC,CAAC;AAChB,aAAO;KACR;;;AAGD,QAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAC,EAAE,UAAU,IAAI,EAAE;AACtE,UAAI,IAAI,CAAC,OAAO,EAAE;AAChB,gBAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;;AAE3D,YAAI,CAAC,MAAM,CAAC,YAAY;AACtB,cAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,UAAU,IAAI,EAAE;AACjD,gBAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEjB,gBAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC7B,mBAAO,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;;AAEhB,iBAAK,IAAI,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE;AAC3B,kBAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACxC;;AAED,iBAAK,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE;AAC1B,kBAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAC5B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAEvC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACxC;;AAED,iBAAK,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,EAAE;AAC1B,kBAAI,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AAC9B,oBAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC5B,oBAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;;AAElB,oBAAI,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;;AAExB,oBAAI,CAAC,MAAM,EAAE,CAAC;AACd,sBAAM;eACP;aACF;WACF,CAAC,CAAC;SACJ,CAAC,CAAC;;AAEH,YAAI,CAAC,IAAI,EAAE,CAAC;OAEb,MAAM;AACL,aAAK,CAAC,IAAI,CAAC,KAAK,IAAI,eAAe,CAAC,CAAC;OACtC;KACF,CAAC,CAAC;GACJ,CAAC;CAEH,CAAA,EAAG,CAAC","file":"public/src/bootstrap.js","sourcesContent":["/*\n\nOnline A-RPG Game, Built using Node.js + createjs\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.io.init(function () {\n    console.log(\"Socket Connected\");\n  });\n\n  // 登录模块\n  window.Login = function Login (event) {\n    var name = document.getElementById(\"name\").value;\n    var password = document.getElementById(\"password\").value;\n\n    if (!name.trim().length) {\n      alert(\"角色名不能为空\");\n      return;\n    }\n\n    if (!password.trim().length) {\n      alert(\"密码不能为空\");\n      return;\n    }\n\n    // 用socket登录\n    Game.io.get(\"/login\", {name: name, password: password}, function (data) {\n      if (data.success) {\n        document.getElementById(\"loginBox\").style.display = \"none\";\n        // 登录成功后\n        Game.oninit(function () {\n          Game.loadArea(data.success.areaId, function (area) {\n            Game.area = area;\n\n            area.map.draw(Game.mapLayer);\n            console.log(11);\n\n            for (var key in area.actors) {\n              area.actors[key].draw(Game.actorLayer);\n            }\n\n            for (var key in area.heros) {\n              if (key == data.success.heroId)\n                area.heros[key].draw(Game.playerLayer);\n              else\n                area.heros[key].draw(Game.heroLayer);\n            }\n\n            for (var key in area.heros) {\n              if (key == data.success.heroId) {\n                Game.hero = area.heros[key];\n                Game.hero.focus();\n\n                Game.ui.initBottomBar();\n\n                Game.update();\n                break;\n              }\n            }\n          });\n        });\n\n        Game.init();\n\n      } else {\n        alert(data.error || \"Unknown Error\");\n      }\n    });\n  };\n\n})();\n"]}