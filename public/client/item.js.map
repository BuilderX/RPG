{"version":3,"sources":["public/src/item.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBA,CAAC,YAAY;AACX,cAAY,CAAC;;AAEb,MAAI,CAAC,SAAS;AACA,aADS,SAAS,CACjB,QAAQ,EAAE;;;4BADF,SAAS;;AAE5B,iCAFmB,SAAS,6CAEpB;;AAER,UAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;AACrB,UAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;;AAEvB,UAAI,KAAK,GAAG,IAAI,CAAC;;AAEjB,UAAI,aAAa,GAAG,SAAhB,aAAa,GAAS;AACxB,cAAK,MAAM,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AACzC,cAAK,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC;AACnC,cAAK,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;AACpC,YAAI,CAAC,KAAK,CAAC,MAAK,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AAChC,YAAI,CAAC,SAAS,CAAC,MAAK,IAAI,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;;;AAGrC,cAAK,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;OAC7B,CAAA;;AAED,UAAI,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;AAC/C,aAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACrC,qBAAa,EAAE,CAAC;OACjB,MAAM;AACL,aAAK,GAAG,IAAI,KAAK,EAAE,CAAC;AACpB,aAAK,CAAC,MAAM,GAAG,aAAa,CAAC;AAC7B,aAAK,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;OAC7B;KACF;;cA5BoB,SAAS;;iBAAT,SAAS;;aA8BxB,eAAC,QAAQ,EAAE;AACf,YAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,YAAI,OAAO,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvC,eAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;OAC9B;;;aAEI,cAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE;AACjB,YAAI,IAAI,GAAG,IAAI,CAAC;;AAEhB,YAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;AAClB,YAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;;AAElB,aAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC5B,YAAI,CAAC,MAAM,EAAE,CAAC;OACf;;;WA7CoB,SAAS;KAAS,IAAI,CAAC,UAAU,CA+CvD,CAAC;CAEH,CAAA,EAAG,CAAC","file":"public/src/item.js","sourcesContent":["/*\n\nOnline A-RPG Game, Built using Node.js + createjs\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.ItemClass = class ItemClass extends Game.EventClass {\n    constructor (itemData) {\n      super();\n\n      this.data = itemData;\n      this.id = this.data.id;\n\n      var image = null;\n\n      var ImageComplete = () => {\n        this.bitmap = new createjs.Bitmap(image);\n        this.bitmap.regX = image.width / 2;\n        this.bitmap.regY = image.height / 2;\n        Game.items[this.data.id] = self;\n        Game.resources[this.data.id] = image;\n\n        // 发送完成事件，第二个参数代表一次性事件\n        this.emit(\"complete\", true);\n      }\n\n      if (Game.resources.hasOwnProperty(this.data.id)) {\n        image = Game.resources[this.data.id];\n        ImageComplete();\n      } else {\n        image = new Image();\n        image.onload = ImageComplete;\n        image.src = this.data.image;\n      }\n    }\n\n    clone (callback) {\n      var self = this;\n\n      var itemObj = new ItemClass(this.data);\n      itemObj.oncomplete(callback);\n    }\n\n    draw (layer, x, y) {\n      var self = this;\n\n      this.bitmap.x = x;\n      this.bitmap.y = y;\n\n      layer.addChild(this.bitmap);\n      Game.update();\n    }\n\n  };\n\n})();\n"]}