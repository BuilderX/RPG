{"version":3,"sources":["public/src/register.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,CAAC,YAAY;AACX,cAAY,CAAC;;AAGb,UAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,SAAS,kyTA2P/C,CAAC;;AAEF,MAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;AACnD,MAAI,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;;;AAGzD,QAAM,CAAC,QAAQ,GAAG,YAAY;AAC5B,YAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AAChC,eAAW,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACpC,QAAI,EAAE,CAAC;GACR,CAAC;;AAEF,QAAM,CAAC,WAAW,GAAG,YAAY;AAC/B,YAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AACjC,eAAW,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;GACpC,CAAC;;AAEF,QAAM,CAAC,SAAS,GAAG,YAAY;AAC7B,QAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;AACpD,QAAI,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC;AAC5D,QAAI,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;;AAExD,QAAI,IAAI,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;AAC3B,WAAK,CAAC,cAAc,CAAC,CAAC;AACtB,aAAO;KACR;;AAED,QAAI,QAAQ,CAAC,IAAI,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;AAC/B,WAAK,CAAC,kBAAkB,CAAC,CAAC;AAC1B,aAAO;KACR;;AAED,QAAI,QAAQ,IAAI,MAAM,EAAE;AACtB,WAAK,CAAC,+BAA+B,CAAC,CAAC;AACvC,aAAO;KACR;;AAED,QAAI,CAAC,EAAE,CAAC,GAAG,CAAC,cAAc,EAAE;AAC1B,UAAI,EAAE,IAAI;AACV,cAAQ,EAAE,QAAQ;AAClB,YAAM,EAAE,UAAU;KACnB,EAAE,UAAU,IAAI,EAAE;AACjB,UAAI,IAAI,CAAC,OAAO,EAAE;AAChB,mBAAW,EAAE,CAAC;OACf,MAAM;AACL,aAAK,CAAC,IAAI,CAAC,KAAK,IAAI,eAAe,CAAC,CAAC;OACtC;KACF,CAAC,CAAC;GACJ,CAAC;;;AAGF,MAAI,UAAU,GAAG;AACf,OAAG,EAAE,MAAM;AACX,QAAI,EAAE,OAAO;AACb,QAAI,EAAE,MAAM;AACZ,QAAI,EAAE,EAAE;AACR,aAAS,EAAE,OAAO;;AAElB,QAAI,EAAE,EAAE;AACR,UAAM,EAAE,EAAE;AACV,SAAK,EAAE,EAAE;AACT,SAAK,EAAE,EAAE;;AAET,cAAU,EAAE,EAAE;AACd,YAAQ,EAAE,EAAE;AACZ,aAAS,EAAE,EAAE;AACb,cAAU,EAAE,EAAE;AACd,aAAS,EAAE,EAAE;GACd,CAAC;;;AAGF,YAAU,CAAC,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC;AAC3B,YAAU,CAAC,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC;AAC5B,YAAU,CAAC,KAAK,IAAI,MAAM,CAAC;AAC3B,YAAU,CAAC,MAAM,IAAI,MAAM,CAAC;AAC5B,YAAU,CAAC,SAAS,GAAG,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC;AAC7C,YAAU,CAAC,UAAU,GAAG,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;;AAE/C,WAAS,IAAI,GAAI;;AAEf,UAAM,CAAC,UAAU,GAAG,UAAU,KAAK,EAAE;AACnC,UAAI,UAAU,CAAC,GAAG,IAAI,MAAM,EAAE;AAC5B,gBAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;AAClE,gBAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;OACpE,MAAM;AACL,gBAAQ,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACjE,gBAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;OACrE;AACD,UAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;AAC/B,UAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;AAClD,UAAI,UAAU,CAAC,IAAI,CAAC,IAAI,KAAK,EAAE;AAC7B,kBAAU,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;AACzB,mBAAW,EAAE,CAAC;OACf;KACF,CAAC;;AAEF,QAAI,WAAW,GAAG,IAAI,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;AAChD,eAAW,EAAE,CAAC;;AAEd,aAAS,WAAW,GAAI;AACtB,UAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,UAAU,GAAG,EAAE;AACvC,mBAAW,CAAC,iBAAiB,EAAE,CAAC;;AAEhC,YAAI,KAAK,GAAG,IAAI,QAAQ,CAAC,WAAW,CAAC;AACnC,gBAAM,EAAE,CAAC,GAAG,CAAC;AACb,gBAAM,EAAE;AACN,iBAAK,EAAE,UAAU,CAAC,SAAS;AAC3B,kBAAM,EAAE,UAAU,CAAC,UAAU;WAC9B;AACD,oBAAU,EAAE;AACV,kBAAM,EAAE,GAAG;AACX,oBAAQ,EAAE,GAAG;AACb,oBAAQ,EAAE,GAAG;AACb,qBAAS,EAAE,GAAG;WACf;SACF,CAAC,CAAC;;AAEH,iBAAS,aAAa,GAAI;AACxB,cAAI,UAAU,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;AACxD,oBAAU,CAAC,CAAC,GAAG,CAAC,CAAC;AACjB,oBAAU,CAAC,CAAC,GAAG,CAAC,CAAC;AACjB,cAAI,UAAU,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;AACxD,oBAAU,CAAC,CAAC,GAAG,EAAE,CAAC;AAClB,oBAAU,CAAC,CAAC,GAAG,CAAC,CAAC;AACjB,cAAI,WAAW,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;AAC1D,qBAAW,CAAC,CAAC,GAAG,GAAG,CAAC;AACpB,qBAAW,CAAC,CAAC,GAAG,CAAC,CAAC;AAClB,cAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AACpD,kBAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;AACjB,kBAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;AACf,qBAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;AACjC,qBAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;AACjC,qBAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AAClC,qBAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAC/B,qBAAW,CAAC,MAAM,EAAE,CAAC;SACtB;;AAED,YAAI,KAAK,CAAC,QAAQ,EAAE;AAClB,uBAAa,EAAE,CAAC;SACjB,MAAM;AACL,eAAK,CAAC,EAAE,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;SACrC;OACF,CAAC,CAAC;KACJ;GAEF,CAAC;CAKH,CAAA,EAAG,CAAC","file":"public/src/register.js","sourcesContent":["/*\n\nOnline A-RPG Game, Built using Node.js + createjs\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n\n  document.getElementById(\"registerBox\").innerHTML = `\n    <h4>预览：</h4>\n    <canvas id=\"preview\" width=\"256\" height=\"64\"></canvas>\n\n    <table>\n      <tr>\n        <td>\n          <div>\n            <span class=\"ui button\">\n            Sex\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"sex\" class=\"\">\n              <option value=\"male\">Male</option>\n              <option value=\"female\">Female</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Body\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"body\" class=\"\">\n              <option value=\"light\">Light</option>\n              <option value=\"dark\">Dark</option>\n              <option value=\"dark2\">Dark 2</option>\n              <option value=\"tanned\">Tanned</option>\n              <option value=\"tanned2\">Tanned 2</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Eyes\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"eyes\" class=\"\">\n              <option value=\"blue\">Blue</option>\n              <option value=\"brown\">Brown</option>\n              <option value=\"gray\">Gray</option>\n              <option value=\"green\">Green</option>\n              <option value=\"orange\">Orange</option>\n              <option value=\"purple\">Purple</option>\n              <option value=\"red\">Red</option>\n              <option value=\"yellow\">Yellow</option>\n            </select>\n          </div>\n        </td><!--左上-->\n        <td>\n\n          <div id=\"customMaleHair\">\n            <span class=\"ui button\">\n            Hair Style\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"hair\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"bedhead\">Bedhead</option>\n              <option value=\"long\">Long</option>\n              <option value=\"longhawk\">Longhawk</option>\n              <option value=\"messy1\">Messy1</option>\n              <option value=\"messy2\">Messy2</option>\n              <option value=\"mohawk\">Mohawk</option>\n              <option value=\"page\">Page</option>\n              <option value=\"parted\">Parted</option>\n              <option value=\"plain\">Plain</option>\n              <option value=\"shorthawk\">Shorthawk</option>\n            </select>\n          </div>\n\n          <div id=\"customFemaleHair\" style=\"display: none;\">\n            <span class=\"ui button\">\n            Hair Style\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"hair\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"bangs\">bangs</option>\n              <option value=\"bangslong\">bangslong</option>\n              <option value=\"bangslong2\">bangslong2</option>\n              <option value=\"bunches\">bunches</option>\n              <option value=\"loose\">loose</option>\n              <option value=\"pixie\">pixie</option>\n              <option value=\"ponytail\">ponytail</option>\n              <option value=\"ponytail2\">ponytail2</option>\n              <option value=\"princess\">princess</option>\n              <option value=\"shoulderl\">shoulderl</option>\n              <option value=\"shoulderr\">shoulderr</option>\n              <option value=\"swoop\">swoop</option>\n              <option value=\"unkempt\">unkempt</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Hair Color\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"haircolor\" class=\"\">\n              <option value=\"black\">Black</option>\n              <option value=\"blonde\">Blonde</option>\n              <option value=\"blonde2\">blonde2</option>\n              <option value=\"blue\">blue</option>\n              <option value=\"blue2\">blue2</option>\n              <option value=\"brown\">brown</option>\n              <option value=\"brown2\">brown2</option>\n              <option value=\"brunette\">brunette</option>\n              <option value=\"brunette2\">brunette2</option>\n              <option value=\"dark-blonde\">dark-blonde</option>\n              <option value=\"gold\">gold</option>\n              <option value=\"gray\">gray</option>\n              <option value=\"gray2\">gray2</option>\n              <option value=\"green\">green</option>\n              <option value=\"green2\">green2</option>\n              <option value=\"light-blonde\">light-blonde</option>\n              <option value=\"light-blonde2\">light-blonde2</option>\n              <option value=\"pink\">pink</option>\n              <option value=\"pink2\">pink2</option>\n              <option value=\"purple\">purple</option>\n              <option value=\"raven\">raven</option>\n              <option value=\"raven2\">raven2</option>\n              <option value=\"redhead\">redhead</option>\n              <option value=\"redhead2\">redhead2</option>\n              <option value=\"ruby-red\">ruby-red</option>\n              <option value=\"white\">white</option>\n              <option value=\"white-blonde\">white-blonde</option>\n              <option value=\"white-blonde2\">white-blonde2</option>\n              <option value=\"white-cyan\">white-cyan</option>\n            </select>\n          </div>\n        </td><!--右上-->\n      </tr>\n      <tr>\n        <td>\n          <div>\n            <span class=\"ui button\">\n            Head\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"head\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"chainhat\">chainhat</option>\n              <option value=\"chain_hood\">chain_hood</option>\n              <option value=\"cloth_hood\">cloth_hood</option>\n              <option value=\"leather_cap\">leather_cap</option>\n              <option value=\"red\">red</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Shirts\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"shirts\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"brown\">brown</option>\n              <option value=\"maroon\">maroon</option>\n              <option value=\"teal\">teal</option>\n              <option value=\"white\">white</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Pants\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"pants\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"magenta\">magenta</option>\n              <option value=\"red\">red</option>\n              <option value=\"teal\">teal</option>\n              <option value=\"white\">white</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Shoes\n            </span>\n            <select onchange=\"SelectHero(event)\"  data-type=\"shoes\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"black\">black</option>\n              <option value=\"brown\">brown</option>\n              <option value=\"maroon\">maroon</option>\n            </select>\n          </div>\n        </td><!--左下-->\n        <td>\n\n          <div>\n            <span class=\"ui button\">\n            Armor Helms\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"armorhelms\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"golden\">golden</option>\n              <option value=\"metal\">metal</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Armor Chest\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"armorchest\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"golden\">golden</option>\n              <option value=\"metal\">metal</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Armor Arm\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"armorarm\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"golden\">golden</option>\n              <option value=\"metal\">metal</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Armor Legs\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"armorlegs\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"golden\">golden</option>\n              <option value=\"metal\">metal</option>\n            </select>\n          </div>\n\n          <div>\n            <span class=\"ui button\">\n            Armor Feet\n            </span>\n            <select onchange=\"SelectHero(event)\" data-type=\"armorfeet\" class=\"\">\n              <option value=\"\">None</option>\n              <option value=\"golden\">golden</option>\n              <option value=\"metal\">metal</option>\n            </select>\n          </div>\n\n        </td><!--右上-->\n      </tr>\n    </table>\n\n    <br>\n    <input id=\"regName\" placeholder=\"角色名\" type=\"text\">\n    <br>\n    <input id=\"regPassword\" placeholder=\"密码\" type=\"password\">\n    <br>\n    <input id=\"regRepeat\" placeholder=\"密码确认\" type=\"password\">\n    <br>\n    <button onclick=\"RegSubmit()\" class=\"button\" type=\"button\">注册</button>\n    <button onclick=\"ReturnLogin()\" class=\"button\" type=\"button\">返回</button>\n  `;\n\n  var loginBox = document.getElementById(\"loginBox\");\n  var registerBox = document.getElementById(\"registerBox\");\n\n  // 注册模块\n  window.Register = function () {\n    loginBox.style.display = \"none\";\n    registerBox.style.display = \"block\";\n    Init();\n  };\n\n  window.ReturnLogin = function () {\n    loginBox.style.display = \"block\";\n    registerBox.style.display = \"none\";\n  };\n\n  window.RegSubmit = function () {\n    var name = document.getElementById(\"regName\").value;\n    var password = document.getElementById(\"regPassword\").value;\n    var repeat = document.getElementById(\"regRepeat\").value;\n\n    if (name.trim().length <= 0) {\n      alert(\"Invalid Name\");\n      return;\n    }\n\n    if (password.trim().length <= 0) {\n      alert(\"Invalid Password\");\n      return;\n    }\n\n    if (password != repeat) {\n      alert(\"Passwor Different from Repeat\");\n      return;\n    }\n\n    Game.io.get(\"/hero/create\", {\n      name: name,\n      password: password,\n      custom: heroCustom\n    }, function (data) {\n      if (data.success) {\n        ReturnLogin();\n      } else {\n        alert(data.error || \"Unknown Error\");\n      }\n    });\n  };\n\n  // 英雄组件数据\n  var heroCustom = {\n    sex: \"male\",\n    body: \"light\",\n    eyes: \"blue\",\n    hair: \"\",\n    haircolor: \"black\",\n\n    head: \"\",\n    shirts: \"\",\n    pants: \"\",\n    shoes: \"\",\n\n    armorchest: \"\",\n    armorarm: \"\",\n    armorlegs: \"\",\n    armorhelms: \"\",\n    armorfeet: \"\"\n  };\n\n  // 13x21\n  heroCustom.width = 64 * 13; // 832;\n  heroCustom.height = 64 * 21; // 1344;\n  heroCustom.width *= 0.8125;\n  heroCustom.height *= 0.9375;\n  heroCustom.tilewidth = heroCustom.width / 13;\n  heroCustom.tileheight = heroCustom.height / 21;\n\n  function Init () {\n\n    window.SelectHero = function (event) {\n      if (heroCustom.sex == \"male\") {\n        document.getElementById(\"customMaleHair\").style.display = \"block\";\n        document.getElementById(\"customFemaleHair\").style.display = \"none\";\n      } else {\n        document.getElementById(\"customMaleHair\").style.display = \"none\";\n        document.getElementById(\"customFemaleHair\").style.display = \"block\";\n      }\n      var value = event.target.value;\n      var type = event.target.getAttribute(\"data-type\");\n      if (heroCustom[type] != value) {\n        heroCustom[type] = value;\n        DisplayHero();\n      }\n    };\n\n    var heroDisplay = new createjs.Stage(\"preview\");\n    DisplayHero();\n\n    function DisplayHero () {\n      Game.drawHero(heroCustom, function (img) {\n        heroDisplay.removeAllChildren();\n\n        var sheet = new createjs.SpriteSheet({\n          images: [img],\n          frames: {\n            width: heroCustom.tilewidth,\n            height: heroCustom.tileheight\n          },\n          animations: {\n            faceup: 104,\n            faceleft: 117,\n            facedown: 130,\n            faceright: 143\n          }\n        });\n\n        function SheetComplete () {\n          var spriteDown = new createjs.Sprite(sheet, \"facedown\");\n          spriteDown.x = 0;\n          spriteDown.y = 0;\n          var spriteLeft = new createjs.Sprite(sheet, \"faceleft\");\n          spriteLeft.x = 64;\n          spriteLeft.y = 0;\n          var spriteRight = new createjs.Sprite(sheet, \"faceright\");\n          spriteRight.x = 128;\n          spriteRight.y = 0;\n          var spriteUp = new createjs.Sprite(sheet, \"faceup\");\n          spriteUp.x = 192;\n          spriteUp.y = 0;\n          heroDisplay.addChild(spriteDown);\n          heroDisplay.addChild(spriteLeft);\n          heroDisplay.addChild(spriteRight);\n          heroDisplay.addChild(spriteUp);\n          heroDisplay.update();\n        }\n\n        if (sheet.complete) {\n          SheetComplete();\n        } else {\n          sheet.on(\"complete\", SheetComplete);\n        }\n      });\n    }\n\n  };\n\n\n\n\n})();\n"]}