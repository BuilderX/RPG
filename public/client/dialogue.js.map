{"version":3,"sources":["public/src/dialogue.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,CAAC,YAAY;AACX,cAAY,CAAC;;AAEb,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;;AAGnB,MAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,UAAU,IAAI,EAAE,OAAO,EAAE;;AAEjD,QAAI,MAAM,GAAG,EAAE,CAAC;AAChB,QAAI,UAAU,GAAG,CAAC,CAAC;AACnB,QAAI,UAAU,GAAG,CAAC,CAAC;AACnB,SAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,UAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,GAAG;AAC1B,kBAAU,IAAI,CAAC,CAAC,KAEhB,UAAU,IAAI,CAAC,CAAC;AAClB,UAAI,UAAU,GAAG,OAAO,EAAE;AACxB,kBAAU,GAAG,CAAC,CAAC;AACf,cAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3C,kBAAU,GAAG,CAAC,CAAC;OAChB;KACF;AACD,QAAI,UAAU,GAAG,IAAI,CAAC,MAAM,EAAE;AAC5B,YAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;KACzC;;AAED,WAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;GAC5B,CAAA;CAGF,CAAA,EAAG,CAAC","file":"public/src/dialogue.js","sourcesContent":["/*\n\nOnline A-RPG Game, Built using Node.js + createjs\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.dialogue = {};\n\n  // Textplit函数用来把文字分行，因为easeljs的lineWidth的wrap机制不支持中文\n  Game.dialogue.textSplit = function (text, lineMax) {\n    //var lineMax = 78; // 一行最多的字符数（中文和中文标点算两个字符）\n    var result = [];\n    var realLength = 0;\n    var breakPoint = 0;\n    for (var i = 0; i < text.length; i++) {\n      if (text.charCodeAt(i) > 128) // 大于128，则不是ascii字符，假定为是中文\n        realLength += 2;\n      else\n        realLength += 1;\n      if (realLength > lineMax) {\n        realLength = 0;\n        result.push(text.substring(breakPoint, i));\n        breakPoint = i;\n      }\n    }\n    if (breakPoint < text.length) {\n      result.push(text.substring(breakPoint));\n    }\n\n    return result.join(\"\\n\\n\");\n  }\n\n\n})();\n"]}