{"version":3,"sources":["public/src/ui.js"],"names":[],"mappings":"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","file":"public/src/ui.js","sourcesContent":["/*\n\nA-RPG Game, Built using Node.js + JavaScript + ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Sprite.Ticker.on(\"tick\", function () {\n    if (Game.uiLayer && Game.hero) {\n      Game.uiLayer.center.x = -Game.hero.x;\n      Game.uiLayer.center.y = -Game.hero.y;\n    }\n  });\n\n  class BoxClass {\n    constructor (x, y, width, height) {\n      var box = new Sprite.Shape();\n      this.box = box;\n      this.defaultColor = \"gray\";\n\n      if (typeof width == \"undefined\")\n        width = 50;\n      if (typeof height == \"undefined\")\n        height = 50;\n\n      this.width = width;\n      this.height = height;\n\n      box.rect({\n        x: 0,\n        y: 0,\n        width: width,\n        height: height,\n        fill: this.defaultColor\n      });\n\n      box.center.x = Math.floor(width / 2);\n      box.center.y = Math.floor(height / 2);\n      box.x = x;\n      box.y = y;\n    }\n\n    drawOn (container) {\n      container.appendChild(this.box);\n      Game.update();\n    }\n\n    get x () {\n      return this.box.x;\n    }\n\n    set x (v) {\n      this.box.x = v;\n      Game.update();\n    }\n\n    get y () {\n      return this.box.y;\n    }\n\n    set y (v) {\n      this.box.y = v;\n      Game.update();\n    }\n\n    get visible () {\n      return this.box.visible;\n    }\n\n    set visible (v) {\n      this.box.visible = v;\n      Game.update();\n    }\n\n    get color () {\n      return this.defaultColor;\n    }\n\n    set color (v) {\n      this.defaultColor = v;\n      this.box.clear().rect({\n        x: 0,\n        y: 0,\n        width: 50,\n        height: 50,\n        fill: v,\n      });\n      Game.update();\n    }\n\n    distance (x, y) {\n      var d = 0;\n      d += Math.pow(this.box.x - x, 2);\n      d += Math.pow(this.box.y - y, 2);\n      return Math.sqrt(d);\n    }\n\n    on () {\n      this.box.on.apply(this.box, arguments);\n    }\n\n    off () {\n      this.box.off.apply(this.box, arguments);\n    }\n  }\n\n  class TextClass {\n    constructor (text, x, y, width, height) {\n      this.text = text;\n      this.textObj = new Sprite.Text({\n        text: text,\n        maxWidth: width,\n        fontSize: 20\n      });\n      this.textObj.x = x;\n      this.textObj.y = y;\n\n      var box = new Sprite.Shape();\n      box.rect({\n        x: 0,\n        y: 0,\n        width: width,\n        height: height,\n        fill: \"gray\",\n      });\n      box.x = x;\n      box.y = y;\n      box.alpha = 0.01\n      this.box = box;\n    }\n\n    drawOn (container) {\n      container.appendChild(this.box);\n      container.appendChild(this.textObj);\n      Game.update();\n    }\n\n    get x () {\n      return this.box.x;\n    }\n\n    set x (v) {\n      this.box.x = v;\n      this.textObj.x = v;\n      Game.update();\n    }\n\n    get y () {\n      return this.box.y;\n    }\n\n    set y (v) {\n      this.box.y = v;\n      this.textObj.y = v;\n      Game.update();\n    }\n\n    on () {\n      this.box.on.apply(this.box, arguments);\n    }\n\n    off () {\n      this.box.off.apply(this.box, arguments);\n    }\n  }\n\n  class BoxBitmapClass extends BoxClass {\n    constructor (bitmap, x, y) {\n      super(x, y);\n\n      if (bitmap instanceof Sprite.Bitmap) {\n        this.bitmap = bitmap.clone();\n      } else if (bitmap instanceof Image) {\n        this.bitmap = new Sprite.Bitmap(bitmap);\n        this.bitmap.center.x = Math.floor(this.bitmap.width/2);\n        this.bitmap.center.y = Math.floor(this.bitmap.height/2);\n      } else if (typeof bitmap == \"string\" && Game.resources.hasOwnProperty(bitmap)) {\n        this.bitmap = new Sprite.Bitmap(Game.resources[bitmap]);\n        this.bitmap.center.x = Math.floor(this.bitmap.width/2);\n        this.bitmap.center.y = Math.floor(this.bitmap.height/2);\n      } else {\n        console.log(bitmap, typeof bitmap);\n        throw new TypeError(\"BoxBitmapClass Invalid Arguments\");\n      }\n\n      this.bitmap.x = x;\n      this.bitmap.y = y;\n    }\n\n    drawOn (container) {\n      container.appendChild(this.box);\n      container.appendChild(this.bitmap);\n      Game.update();\n    }\n\n    get x () {\n      return this.box.x;\n    }\n\n    set x (v) {\n      this.box.x = v;\n      this.bitmap.x = v;\n      Game.update();\n    }\n\n    get y () {\n      return this.box.y;\n    }\n\n    set y (v) {\n      this.box.y = v;\n      this.bitmap.y = v;\n      Game.update();\n    }\n  }\n\n  class BoxBitmapButtonClass extends BoxBitmapClass {\n    constructor (bitmap, x, y) {\n      super(bitmap, x, y);\n      //this.box.shadow = new Sprite.Shadow(\"black\", 1, 1, 1);\n    }\n  }\n\n  class BoxButtonClass extends BoxClass {\n    constructor (x, y) {\n      super(x, y);\n      //this.box.shadow = new Sprite.Shadow(\"black\", 1, 1, 1);\n    }\n  }\n\n  class BoxTextButtonClass extends BoxClass {\n    constructor (text, x, y, width, height) {\n      super(x, y, width, height);\n      //this.box.shadow = new Sprite.Shadow(\"black\", 1, 1, 1);\n      var text = new Sprite.Text(text, 200, \"white\", 25, \"Arial\");\n      text.center.x = Math.floor(text.width / 2);\n      text.center.y = Math.floor(text.height / 2);\n      text.x = x;\n      text.y = y;\n      this.text = text;\n    }\n\n    drawOn (container) {\n      container.appendChild(this.box);\n      container.appendChild(this.text);\n      Game.update;\n    }\n\n    get x () {\n      return this.box.x;\n    }\n\n    set x (v) {\n      this.text.x = v;\n      this.box.x = v;\n      Game.update();\n    }\n\n    get y () {\n      return this.box.y;\n    }\n\n    set y (v) {\n      this.text.y = v;\n      this.box.y = v;\n      Game.update();\n    }\n  }\n\n  // 调整窗口跟随玩家\n  /*\n  Game.oninit(function () {\n    Game.stage.on(\"drawstart\", function () {\n      if (Game.uiLayer.numChildren) {\n        Game.uiLayer.children.forEach(function (element) {\n          element.x = parseInt(Game.hero.x);\n          element.y = parseInt(Game.hero.y);\n        });\n\n        if (Game.ui.redPoint) {\n          var heroX = parseInt(Game.hero.x / Game.area.map.width * Game.area.map.minimap.width);\n          var heroY = parseInt(Game.hero.y / Game.area.map.height * Game.area.map.minimap.height);\n          Game.ui.redPoint.x = heroX + 160;\n          Game.ui.redPoint.y = heroY + 12;\n        }\n\n      }\n    });\n  });\n  */\n\n\n  Game.ui = {};\n\n  Game.ui.clickSpell = function (num) {\n    if (Game.hero && Game.hero.fire) {\n      var cooldown = Game.hero.fire(num);\n      if (cooldown > 0) {\n\n        var spellIcon = Game.ui.spellBarIcon[num];\n        //spellIcon.color = \"green\";\n\n        cooldown -= 100;\n\n        /*\n        Sprite.Tween.get(spellIcon.box).to({alpha: 0}, cooldown).call(function () {\n          spellIcon.color = \"gray\";\n          spellIcon.box.alpha = 1;\n          Game.update();\n        }).on(\"change\", function () {\n          Game.update();\n        });\n        */\n\n      }\n    }\n  };\n\n  var indexToEquipment = {\n    \"0\": \"head\",\n    \"1\": \"neck\",\n    \"2\": \"body\",\n    \"3\": \"feet\",\n    \"4\": \"righthand\",\n    \"5\": \"lefthand\",\n    \"6\": \"leftring\",\n    \"7\": \"rightring\"\n  }\n\n  function ItemChanged () {\n    var items = [];\n    items.length = Game.hero.items.length;\n    for (var i = 0; i < items.length; i++) {\n      if (Game.hero.items[i])\n        items[i] = {\n          id: Game.hero.items[i].id,\n          count: Game.hero.items[i].count\n        };\n    }\n\n    var equipment = {};\n\n    for (var key in Game.hero.equipment) {\n      if (Game.hero.equipment[key])\n        equipment[key] = Game.hero.equipment[key].id;\n      else\n        equipment[key] = null;\n    }\n\n    Game.io.updateHero({\n      items: items,\n      equipment: equipment\n    });\n  }\n\n  // 物品选择，弹出物品信息\n  function ItemSelect (type, index) {\n    var itemObj = null;\n\n    if (type == \"equipment\") {\n      itemObj = Game.hero.equipment[indexToEquipment[index]];\n      if (!itemObj) return;\n    }\n\n    if (type == \"item\") {\n      if (!Game.hero.items[index]) return;\n      itemObj = Game.hero.items[index].item;\n      if (!itemObj) return;\n    }\n\n    // 分割，每行最多22个字符宽度\n    var text = itemObj.data.description;\n\n    var buffnerf = [];\n    if (itemObj.data.buff) {\n      for (let key in itemObj.data.buff) {\n        var sign = \"+\";\n        if (itemObj.data.buff[key] < 0) sign = \"-\";\n        buffnerf.push(key + \": \" + sign + itemObj.data.buff[key] + \";\");\n      }\n    }\n    if (itemObj.data.nerf) {\n      for (let key in itemObj.data.nerf) {\n        var sign = \"+\";\n        if (itemObj.data.buff[key] < 0) sign = \"-\";\n        buffnerf.push(key + \": \" + sign + itemObj.data.nerf[key] + \";\");\n      }\n    }\n\n    if (buffnerf.length) {\n      text += \"\\n\" + buffnerf.join(\"   \");\n    }\n\n    if (Game.ui.itemText) {\n      Game.ui.itemWindow.removeChild(Game.ui.itemText);\n      Game.ui.itemText = null;\n    }\n\n\n    var itemText = Game.ui.itemText = new Sprite.Text({\n      text: text,\n      fontSize: 18,\n      maxWidth: 360,\n    });\n    itemText.x = 420;\n    itemText.y = 290;\n    Game.ui.itemWindow.appendChild(itemText);\n\n    Game.update();\n  }\n\n  // 物品改变，装备，卸下装备，物品调整顺序等\n  function ItemExchange (lastType, lastIndex, type, index) {\n\n    if (lastType == \"equipment\" && type == \"equipment\") {\n\n      Game.ui.armorBox[lastIndex].color = \"gray\";\n\n      if (lastIndex != index) {\n        lastIndex = -1;\n        lastType = null;\n\n        return ItemSelect(type, index);\n      }\n    }\n\n    if (lastType == \"item\" && type == \"item\") {\n      if (lastIndex == index) {\n        Game.ui.itemBox[index].color = \"gray\";\n      } else {\n        var t = Game.hero.items[lastIndex];\n        Game.hero.items[lastIndex] = Game.hero.items[index];\n        Game.hero.items[index] = t;\n\n        ItemChanged();\n\n        Game.uiLayer.removeChild(Game.ui.itemWindow);\n        Game.ui.itemWindow = null;\n        Game.ui.openItem();\n      }\n    }\n\n    if (lastType == \"equipment\" && type == \"item\") {\n      if (Game.hero.items[index]) {\n        Game.ui.armorBox[lastIndex].color = \"gray\";\n      } else {\n        if (!Game.hero.items[index])\n          Game.hero.items[index] = {};\n        Game.hero.items[index].id = Game.hero.equipment[indexToEquipment[lastIndex]].id;\n        Game.hero.items[index].item = Game.hero.equipment[indexToEquipment[lastIndex]];\n        Game.hero.items[index].count = 1;\n        Game.hero.equipment[indexToEquipment[lastIndex]] = null;\n\n        ItemChanged();\n\n        Game.uiLayer.removeChild(Game.ui.itemWindow);\n        Game.ui.itemWindow = null;\n        Game.ui.openItem();\n        Game.ui.openArmor();\n      }\n    }\n\n    if (lastType == \"item\" && type == \"equipment\") {\n      var CheckFit = function (itemIndex, equipmentIndex) {\n        var itemType = Game.hero.items[itemIndex].item.data.equip;\n        var equipmentType = indexToEquipment[equipmentIndex];\n        if (itemType == equipmentType)\n          return true;\n        if (itemType == \"onehand\" && (equipmentType == \"righthand\" || equipmentType == \"lefthand\"))\n          return true;\n        if (itemType == \"twohand\" && equipmentType == \"righthand\")\n          return true;\n        return false;\n      }\n\n      if (CheckFit(lastIndex, index)) {\n        var t = Game.hero.equipment[indexToEquipment[index]];\n        Game.hero.equipment[indexToEquipment[index]] = Game.hero.items[lastIndex].item;\n        if (t) {\n          Game.hero.items[lastIndex] = {\n            id: t.id,\n            item: t,\n            count: 1\n          };\n        } else {\n          Game.hero.items[lastIndex] = null;\n        }\n\n        ItemChanged();\n\n        Game.uiLayer.removeChild(Game.ui.itemWindow);\n        Game.ui.itemWindow = null;\n        Game.ui.openItem();\n        Game.ui.openArmor();\n      } else {\n        Game.ui.itemBox[lastIndex].color = \"gray\";\n      }\n    }\n\n  }\n\n  function ItemIconCopy (item, box, type, index) {\n    var t = new BoxBitmapClass(item.bitmap, box.x, box.y);\n\n    if (type == \"item\")\n      t.drawOn(Game.ui.itemWindow);\n    else if (type == \"equipment\")\n      t.drawOn(Game.ui.armorWindow);\n    else\n      throw new TypeError(\"invalid\");\n\n    var X = t.x;\n    var Y = t.y;\n\n    t.on(\"click\", function () {\n      ItemSelect(type, index);\n    });\n\n    var offset = {};\n\n    t.on(\"pressdown\", function (event) {\n      offset.x = t.x - event.x / Game.stage.scale.x;\n      offset.y = t.y - event.y / Game.stage.scale.y;\n      console.log(event, offset);\n    });\n\n    t.on(\"pressmove\", function (event) {\n      t.x = event.x / Game.stage.scale.x + offset.x;\n      t.y = event.y / Game.stage.scale.y + offset.y;\n    });\n\n    t.on(\"pressup\", function (event) {\n      var x = event.x / Game.stage.scale.x + offset.x;\n      var y = event.y / Game.stage.scale.y + offset.y;\n\n      var lastType = null;\n      var lastIndex = -1;\n\n      var minDistance = 9999;\n      var minType = null;\n      var minIndex = -1;\n\n      if (Game.ui.itemBox) {\n        Game.ui.itemBox.forEach(function (element, index) {\n          if (element == box) {\n            lastType = \"item\";\n            lastIndex = index;\n            return;\n          } else if (t.distance(element.x, element.y) < minDistance) {\n            minDistance = t.distance(element.x, element.y);\n            minType = \"item\";\n            minIndex = index;\n          }\n        });\n      }\n\n      if (Game.ui.armorBox) {\n        Game.ui.armorBox.forEach(function (element, index) {\n          if (element == box) {\n            lastType = \"equipment\";\n            lastIndex = index;\n            return;\n          } else if (t.distance(element.x, element.y) < minDistance) {\n            minDistance = t.distance(element.x, element.y);\n            minType = \"equipment\";\n            minIndex = index;\n          }\n        });\n      }\n\n      t.x = X;\n      t.y = Y;\n\n      if (lastType && minType && minDistance < 30) {\n        ItemExchange(lastType, lastIndex, minType, minIndex);\n      }\n\n    });\n\n  }\n\n  function SpellIconCopy (spell, box, type, index) {\n    var t = new BoxBitmapClass(spell, box.x, box.y);\n\n    if (Game.ui.spellBarIcon) {\n      Game.ui.spellBarIcon[index] = t;\n    }\n\n    if (type == \"book\") {\n      t.drawOn(Game.ui.spellWindow);\n    } else if (type == \"bar\") {\n      t.drawOn(Game.ui.spellBarWindow);\n    }\n\n    var X = t.x;\n    var Y = t.y;\n\n    t.on(\"click\", function () {\n      if (Game.ui.spellWindow) {\n        SpellSelect(\"book\", index);\n      } else if (type == \"bar\") {\n        Game.ui.clickSpell(index);\n      }\n    });\n\n    var offset = {\n      x: 0,\n      y: 0,\n    };\n\n    t.on(\"pressdown\", function (event) {\n      if (!Game.ui.spellWindow) return;\n      offset.x = t.x - event.x / Game.stage.scale.x,\n      offset.y = t.y - event.y / Game.stage.scale.y\n    });\n\n    t.on(\"pressmove\", function (event) {\n      if (!Game.ui.spellWindow) return;\n      t.x = event.x / Game.stage.scale.x + offset.x;\n      t.y = event.y / Game.stage.scale.y + offset.y;\n    });\n\n    t.on(\"pressup\", function (event) {\n      if (!Game.ui.spellWindow) return;\n      var x = event.x / Game.stage.scale.x + offset.x;\n      var y = event.y / Game.stage.scale.y + offset.y;\n\n      var lastType = null;\n      var lastIndex = -1;\n\n      var minDistance = 9999;\n      var minType = null;\n      var minIndex = -1;\n\n      if (Game.ui.spellBar) {\n        Game.ui.spellBar.forEach(function (element, index) {\n          if (element == box) {\n            lastType = \"bar\";\n            lastIndex = index;\n            return;\n          } else if (t.distance(element.x, element.y) < minDistance) {\n            minDistance = t.distance(element.x, element.y);\n            minType = \"bar\";\n            minIndex = index;\n          }\n        });\n      }\n\n      if (Game.ui.spellBook) {\n        Game.ui.spellBook.forEach(function (element, index) {\n          if (element == box) {\n            lastType = \"book\";\n            lastIndex = index;\n            return;\n          } else if (t.distance(element.x, element.y) < minDistance) {\n            minDistance = t.distance(element.x, element.y);\n            minType = \"book\";\n            minIndex = index;\n          }\n        });\n      }\n\n      if (lastType && minType && minDistance < 30) {\n        SpellExchange(lastType, lastIndex, minType, minIndex);\n      } else if (lastType == \"bar\" && minDistance > 100) {\n        Game.hero.data.spellbar[lastIndex] = null;\n        Game.io.updateHero({spellbar: Game.hero.data.spellbar});\n        Game.ui.openSpellbar();\n      }\n\n      t.x = X;\n      t.y = Y;\n    });\n  }\n\n  // 打开物品栏（玩家口袋）\n  Game.ui.openItem = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.itemWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.itemWindow);\n      Game.ui.itemWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 390,\n      height: 370,\n    });\n\n    background.x = 405;\n    background.y = 5;\n    background.alpha = 0.8;\n\n    var itemBox = [];\n    var itemBoxWidth = 5;\n    var itemBoxHeight = 4;\n    itemBox.length = itemBoxWidth * itemBoxHeight;\n\n    for (var i = 0; i < itemBoxHeight; i++) {\n      for (var j = 0; j < itemBoxWidth; j++) {\n        (function (i, j) {\n          var index = i * itemBoxWidth + j;\n          itemBox[index] = new BoxClass(440 + j * 60, 40 + i * 60);\n        })(i, j);\n      }\n    }\n\n    Game.ui.itemBox = itemBox;\n\n    var itemUseButton = new BoxBitmapButtonClass(\"/image/use.png\", 760, 40);\n    var itemDropButton = new BoxBitmapButtonClass(\"/image/drop.png\", 760, 100);\n    var itemPrevButton = new BoxBitmapButtonClass(\"/image/up.png\", 760, 160);\n    var itemNextButton = new BoxBitmapButtonClass(\"/image/down.png\", 760, 220);\n\n    var itemGoldBox = new Sprite.Text({\n      text: \"资金：10000000G\",\n      fontSize: 24,\n      color: \"gold\",\n    });\n    itemGoldBox.x = 415;\n    itemGoldBox.y = 250;\n\n    var itemText = new Sprite.Shape();\n    itemText.rect({\n      fill: \"gray\",\n      x: 0,\n      y: 0,\n      width: 370,\n      height: 80,\n    });\n\n    itemText.x = 415;\n    itemText.y = 285;\n\n    var itemWindow = Game.ui.itemWindow = new Sprite.Container();\n    itemWindow.center.x = 400;\n    itemWindow.center.y = 225;\n\n    itemWindow.appendChild(background);\n    itemWindow.appendChild(itemGoldBox);\n    itemWindow.appendChild(itemText);\n    itemUseButton.drawOn(itemWindow);\n    itemDropButton.drawOn(itemWindow);\n    itemPrevButton.drawOn(itemWindow);\n    itemNextButton.drawOn(itemWindow);\n\n    itemBox.forEach(function (element) {\n      element.drawOn(itemWindow);\n    });\n\n    heroObj.items.forEach(function (element, index) {\n      if (element) {\n        ItemIconCopy(element.item, itemBox[index], \"item\", index);\n      }\n    });\n\n    Game.uiLayer.appendChild(itemWindow);\n\n    Game.ui.initBottomBar();\n  };\n\n  // 打开技能栏\n  Game.ui.openSkill = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.skillWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.skillWindow);\n      Game.ui.skillWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 390,\n      height: 370,\n    });\n\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n    var skillWindow = new Sprite.Container();\n    skillWindow.center.x = 400;\n    skillWindow.center.y = 225;\n\n    skillWindow.appendChild(background);\n\n    Game.uiLayer.appendChild(skillWindow);\n    Game.ui.skillWindow = skillWindow;\n\n    // 再次open，即关闭\n    Game.ui.openInformation();\n  };\n\n  // 在招式窗口打开时，点击一个技能，则弹出技能介绍\n  function SpellSelect (type, index) {\n\n    var spellId = \"\";\n\n    if (type == \"book\") {\n      spellId = Object.keys(Game.hero.spells)[index];\n      if (!spellId) return;\n    }\n\n    if (type == \"bar\") {\n      spellId = Game.hero.data.spellbar[index];\n      if (!spellId) return;\n    }\n\n    // 分割，每行最多40个字符宽度\n    var text = Game.dialogue.textSplit(Game.hero.spells[spellId].data.description, 330);\n\n    if (Game.ui.spellText) {\n      Game.ui.spellWindow.removeChild(Game.ui.spellText);\n      Game.ui.spellText = null;\n    }\n\n\n    var spellText = Game.ui.spellText = new Sprite.Text({\n      text: text,\n      fontSize: 18,\n      maxWidth: 360,\n    });\n    spellText.x = 20;\n    spellText.y = 290;\n    Game.ui.spellWindow.appendChild(spellText);\n\n    Game.update();\n  }\n\n  // 在招式栏和招式书之间交换技能快捷方式\n  function SpellExchange (lastType, lastIndex, type, index) {\n\n    if (lastType == \"book\" && type == \"bar\") {\n      var bookSelect = Object.keys(Game.hero.spells)[lastIndex];\n      var barSelect = Game.hero.data.spellbar[index];\n      if (bookSelect != barSelect) {\n        Game.hero.data.spellbar[index] = bookSelect;\n        Game.io.updateHero({spellbar: Game.hero.data.spellbar});\n        Game.ui.openSpellbar();\n      }\n    }\n\n    if (lastType == \"bar\" && type == \"bar\") {\n\n      if (lastIndex == index) {\n        Game.hero.data.spellbar[index] = undefined;\n        Game.ui.initBottomBar();\n      } else {\n        var barSelect1 = Game.hero.data.spellbar[lastIndex];\n        var barSelect2 = Game.hero.data.spellbar[index];\n        var t = barSelect1;\n        Game.hero.data.spellbar[lastIndex] = barSelect2;\n        Game.hero.data.spellbar[index] = t;\n        Game.io.updateHero({spellbar: Game.hero.data.spellbar});\n        Game.ui.openSpellbar();\n      }\n\n    }\n  }\n\n  Game.ui.openSpell = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 390,\n      height: 370,\n    });\n\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n\n    var spellBook = Game.ui.spellBook = [];\n    spellBook.length = heroObj.data.spellcount;\n\n    var spellBookWidth = 6;\n    var spellBookHeight = 7;\n    var spellCount = 0;\n\n    for (var i = 0; i < spellBookHeight; i++) {\n      for (var j = 0; j < spellBookWidth; j++) {\n        (function (i, j) {\n          if (spellCount >= spellBook.length)\n            return;\n          var index = i * spellBookWidth + j;\n          spellBook[index] = new BoxClass(50 + j * 60, 50 + i * 60);\n          spellCount++;\n        })(i, j);\n      }\n    }\n\n    var spellText = new Sprite.Shape();\n    spellText.rect({\n      x: 0,\n      y: 0,\n      width: 370,\n      height: 80,\n      fill: \"gray\",\n    });\n    spellText.x = 15;\n    spellText.y = 285;\n\n    var spellWindow = Game.ui.spellWindow = new Sprite.Container();\n    spellWindow.center.x = 400;\n    spellWindow.center.y = 225;\n\n    spellWindow.appendChild(background);\n    spellWindow.appendChild(spellText);\n\n    spellBook.forEach(function (element) {\n      element.drawOn(spellWindow);\n      spellWindow.appendChild(element.box.clone());\n    });\n\n    (function AddHeroSpellIcon () {\n      var index = 0;\n      for (var key in Game.hero.spells) {\n        (function (element, index) {\n          SpellIconCopy(element.icon, Game.ui.spellBook[index], \"book\", index);\n        })(Game.hero.spells[key], index);\n        index++;\n      }\n    })();\n\n    Game.uiLayer.appendChild(spellWindow);\n\n    // 再次open信息窗口，即关闭信息窗口\n    Game.ui.openInformation();\n  };\n\n  Game.ui.openMap = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.mapWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.mapWindow);\n      Game.ui.mapWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 790,\n      height: 370,\n    });\n\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n    var mapWindow = new Sprite.Container();\n    mapWindow.center.x = 400;\n    mapWindow.center.y = 225;\n\n    mapWindow.appendChild(background);\n\n    // 转换玩家位置为小地图位置，修正小地图位置\n    var heroX = parseInt(Game.hero.x / Game.area.map.width * Game.area.map.minimap.width);\n    var heroY = parseInt(Game.hero.y / Game.area.map.height * Game.area.map.minimap.height);\n    Game.area.map.minimap.x = 400;\n    Game.area.map.minimap.y = 190;\n\n    var redPoint = new Sprite.Shape();\n    redPoint.circle({\n      cx: 2,\n      cy: 2,\n      r: 2,\n      fill: \"red\",\n    });\n    redPoint.center.x = 2;\n    redPoint.center.y = 2;\n\n    mapWindow.appendChild(Game.area.map.minimap);\n    mapWindow.appendChild(redPoint);\n\n    Game.ui.redPoint = redPoint;\n\n    Game.uiLayer.appendChild(mapWindow);\n    Game.ui.mapWindow = mapWindow;\n\n    Game.ui.initBottomBar();\n  };\n\n  Game.ui.openSetting = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.settingWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.settingWindow);\n      Game.ui.settingWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 790,\n      height: 370,\n    });\n\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.6;\n\n    var enterTalk = new BoxTextButtonClass(\"发送聊天\", 200, 60, 360, 50);\n    enterTalk.on(\"click\", Game.dialogue.talk);\n\n    var talkHistory = new BoxTextButtonClass(\"历史记录\", 600, 60, 360, 50);\n\n    var fullScreen = new BoxTextButtonClass(\"全屏切换\", 200, 120, 360, 50);\n    fullScreen.on(\"click\", function () {\n      // 下面的部分是兼容不同浏览器的全屏和取消全屏\n      if (\n        !document.fullscreenElement &&    // alternative standard method\n        !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement &&\n        !document.msFullscreenElement )\n      {  // current working methods\n        if (document.documentElement.requestFullscreen) {\n          document.documentElement.requestFullscreen();\n        } else if (document.documentElement.msRequestFullscreen) {\n          document.documentElement.msRequestFullscreen();\n        } else if (document.documentElement.mozRequestFullScreen) {\n          document.documentElement.mozRequestFullScreen();\n        } else if (document.documentElement.webkitRequestFullscreen) {\n          document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        }\n      } else {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        }\n      }\n    });\n\n    var settingWindow = new Sprite.Container();\n    settingWindow.center.x = 400;\n    settingWindow.center.y = 225;\n\n    settingWindow.appendChild(background);\n    enterTalk.drawOn(settingWindow);\n    talkHistory.drawOn(settingWindow);\n    fullScreen.drawOn(settingWindow);\n\n    Game.uiLayer.appendChild(settingWindow);\n    Game.ui.settingWindow = settingWindow;\n\n    Game.ui.initBottomBar();\n  };\n\n  Game.ui.openArmor = function (refresh) {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.informationWindow && Game.ui.armorWindow) {\n      Game.ui.informationWindow.removeChild(Game.ui.armorWindow);\n    }\n\n    var armorWindow = Game.ui.armorWindow = new Sprite.Container();\n\n    // 装备\n    var armorBox = Game.ui.armorBox =  [];\n    var armorBoxWidth = 4;\n    var armorBoxHeight = 2;\n    armorBox.length = armorBoxWidth * armorBoxHeight;\n\n    var armorImageList = [\n      \"/image/head.png\",\n      \"/image/neck.png\",\n      \"/image/body.png\",\n      \"/image/feet.png\",\n      \"/image/righthand.png\",\n      \"/image/lefthand.png\",\n      \"/image/ring.png\",\n      \"/image/ring.png\"\n    ];\n\n    for (var i = 0; i < armorBoxHeight; i++) {\n      for (var j = 0; j < armorBoxWidth; j++) {\n        (function (i, j) {\n          var index = i * armorBoxWidth + j;\n          armorBox[index] = new BoxBitmapClass(armorImageList[index], 180 + j * 60, 40 + i * 60);\n        })(i, j);\n      }\n    }\n\n    var headIcon = new BoxBitmapClass(\"/image/head.png\", armorBox[0].x, armorBox[0].y);\n    var neckIcon = new BoxBitmapClass(\"/image/neck.png\", armorBox[1].x, armorBox[1].y);\n    var bodyIcon = new BoxBitmapClass(\"/image/body.png\", armorBox[2].x, armorBox[2].y);\n    var feetIcon = new BoxBitmapClass(\"/image/feet.png\", armorBox[3].x, armorBox[3].y);\n    var righthandIcon = new BoxBitmapClass(\"/image/righthand.png\", armorBox[4].x, armorBox[4].y);\n    var lefthandIcon = new BoxBitmapClass(\"/image/lefthand.png\", armorBox[5].x, armorBox[5].y);\n    var leftringIcon = new BoxBitmapClass(\"/image/ring.png\", armorBox[6].x, armorBox[6].y);\n    var rightringIcon = new BoxBitmapClass(\"/image/ring.png\", armorBox[7].x, armorBox[7].y);\n\n    armorBox.forEach(function (element) {\n      element.drawOn(armorWindow);\n    });\n\n    headIcon.drawOn(armorWindow);\n    neckIcon.drawOn(armorWindow);\n    bodyIcon.drawOn(armorWindow);\n    feetIcon.drawOn(armorWindow);\n    righthandIcon.drawOn(armorWindow);\n    lefthandIcon.drawOn(armorWindow);\n    leftringIcon.drawOn(armorWindow);\n    rightringIcon.drawOn(armorWindow);\n\n    if (heroObj.equipment.head)\n      ItemIconCopy(heroObj.equipment.head, armorBox[0], \"equipment\", 0);\n    if (heroObj.equipment.neck)\n      ItemIconCopy(heroObj.equipment.neck, armorBox[1], \"equipment\", 1);\n    if (heroObj.equipment.body)\n      ItemIconCopy(heroObj.equipment.body, armorBox[2], \"equipment\", 2);\n    if (heroObj.equipment.feet)\n      ItemIconCopy(heroObj.equipment.feet, armorBox[3], \"equipment\", 3);\n    if (heroObj.equipment.righthand)\n      ItemIconCopy(heroObj.equipment.righthand, armorBox[4], \"equipment\", 4);\n    if (heroObj.equipment.lefthand)\n      ItemIconCopy(heroObj.equipment.lefthand, armorBox[5], \"equipment\", 5);\n    if (heroObj.equipment.leftring)\n      ItemIconCopy(heroObj.equipment.leftring, armorBox[6], \"equipment\", 6);\n    if (heroObj.equipment.rightring)\n      ItemIconCopy(heroObj.equipment.rightring, armorBox[7], \"equipment\", 7);\n\n    if (Game.ui.informationWindow)\n      Game.ui.informationWindow.appendChild(armorWindow);\n  };\n\n  function AttributeSelect (text) {\n    if (Game.ui.attributeText) {\n      Game.ui.informationWindow.removeChild(Game.ui.attributeText);\n      Game.ui.attributeText = null;\n    }\n\n    var attributeText = Game.ui.attributeText = new Sprite.Text({\n      text: text,\n      maxWidth: 360,\n      fontSize: 18,\n    });\n    attributeText.x = 20;\n    attributeText.y = 290;\n    Game.ui.informationWindow.appendChild(Game.ui.attributeText);\n\n    Game.update();\n  }\n\n  Game.ui.openAttribute = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    var level = new TextClass(\"LEVEL: \" + heroObj.data.level, 15, 15, 130, 25);\n    level.on(\"click\", function () {\n      AttributeSelect(\"这是你的人物等级\");\n    });\n\n    var hitpoint = new TextClass(\"HP: \" + heroObj.data.hp + \"/\" + heroObj.data._hp, 15, 45, 130, 25);\n    hitpoint.on(\"click\", function () {\n      AttributeSelect(\"这是你的生命值，当生命值降到0的时候会死呢\");\n    });\n\n    var manapoint = new TextClass(\"SP: \" + heroObj.data.sp + \"/\" + heroObj.data._sp, 15, 75, 130, 25);\n    manapoint.on(\"click\", function () {\n      AttributeSelect(\"施展能力需要精神力，精神力代表自己身体与精神的原动力\");\n    });\n\n    var strength = new TextClass(\"STR: \" + heroObj.data.str, 15, 105, 130, 25);\n    strength.on(\"click\", function () {\n      AttributeSelect(\"力量会影响你的普通攻击伤害\");\n    });\n\n    var dexterity = new TextClass(\"DEX: \" + heroObj.data.dex, 15, 135, 130, 25);\n    dexterity.on(\"click\", function () {\n      AttributeSelect(\"敏捷会影响你的防御率\");\n    });\n\n    var constitution = new TextClass(\"CON: \" + heroObj.data.int, 15, 165, 130, 25);\n    constitution.on(\"click\", function () {\n      AttributeSelect(\"体质影响你的生命值\");\n    });\n\n    var intelligence = new TextClass(\"INT: \" + heroObj.data.con, 15, 195, 130, 25);\n    intelligence.on(\"click\", function () {\n      AttributeSelect(\"智力影响你的魔法攻击力与魔法防御力\");\n    });\n\n    var charisma = new TextClass(\"CHA: \" + heroObj.data.cha, 15, 225, 130, 25);\n    charisma.on(\"click\", function () {\n      AttributeSelect(\"魅力影响人物的魅力 = = \");\n    });\n\n    var exp = new TextClass(\"EXP: \" + heroObj.data.exp + \" / 1000\", 15, 255, 270, 25);\n    exp.on(\"click\", function () {\n      AttributeSelect(\"经验值嘛\");\n    });\n\n    var attack = new TextClass(\"ATK: \" + heroObj.data.atk, 155, 135, 130, 25);\n    attack.on(\"click\", function () {\n      AttributeSelect(\"普通攻击的攻击力\");\n    });\n\n    var defense = new TextClass(\"DEF: \" + heroObj.data.def, 155, 165, 130, 25);\n    defense.on(\"click\", function () {\n      AttributeSelect(\"对普通攻击的伤害减免能力\");\n    });\n\n    var magicAttack = new TextClass(\"MATK: \" + heroObj.data.matk, 155, 195, 130, 25);\n    magicAttack.on(\"click\", function () {\n      AttributeSelect(\"魔法攻击的攻击力\");\n    });\n\n    var magicDefense = new TextClass(\"MDEF: \" + heroObj.data.mdef, 155, 225, 130, 25);\n    magicDefense.on(\"click\", function () {\n      AttributeSelect(\"防御魔法攻击的能力\");\n    });\n\n    if (Game.ui.informationWindow && Game.ui.statusWindow) {\n      Game.ui.informationWindow.removeChild(Game.ui.statusWindow);\n    }\n\n    var statusWindow = Game.ui.statusWindow = new Sprite.Container();\n\n    level.drawOn(statusWindow);\n    exp.drawOn(statusWindow);\n    hitpoint.drawOn(statusWindow);\n    manapoint.drawOn(statusWindow);\n    strength.drawOn(statusWindow);\n    dexterity.drawOn(statusWindow);\n    intelligence.drawOn(statusWindow);\n    constitution.drawOn(statusWindow);\n    charisma.drawOn(statusWindow);\n    attack.drawOn(statusWindow);\n    defense.drawOn(statusWindow);\n    magicAttack.drawOn(statusWindow);\n    magicDefense.drawOn(statusWindow);\n\n    if (Game.ui.informationWindow) {\n      Game.ui.informationWindow.appendChild(Game.ui.statusWindow);\n      Game.update();\n    }\n  }\n\n  Game.ui.openInformation = function () {\n    var heroObj = Game.hero;\n    if (!heroObj) return;\n\n    if (Game.ui.informationWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.informationWindow);\n      Game.ui.informationWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    if (Game.ui.skillWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.skillWindow);\n      Game.ui.skillWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n    if (Game.ui.spellWindow) { // 如果开着，就要关\n      Game.uiLayer.removeChild(Game.ui.spellWindow);\n      Game.ui.spellWindow = null;\n      Game.ui.initBottomBar();\n      return;\n    }\n\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 390,\n      height: 370,\n    });\n\n    background.x = 5;\n    background.y = 5;\n    background.alpha = 0.8;\n\n    var attributeText = new Sprite.Shape();\n    attributeText.rect({\n      x: 0,\n      y: 0,\n      width: 370,\n      height: 80,\n      fill: \"gray\",\n    });\n    attributeText.x = 15;\n    attributeText.y = 285;\n\n    var skillButton = new BoxBitmapButtonClass(\"/image/skill.png\", 360, 190);\n    skillButton.on(\"click\", Game.ui.openSkill);\n\n    var spellButton = new BoxBitmapButtonClass(\"/image/spell.png\", 360, 250);\n    spellButton.on(\"click\", Game.ui.openSpell);\n\n    var informationWindow = Game.ui.informationWindow = new Sprite.Container();\n    informationWindow.center.x = 400;\n    informationWindow.center.y = 225;\n\n    informationWindow.appendChild(background);\n    informationWindow.appendChild(attributeText);\n\n    skillButton.drawOn(informationWindow);\n    spellButton.drawOn(informationWindow);\n\n    Game.uiLayer.appendChild(informationWindow);\n\n    Game.ui.openAttribute();\n    Game.ui.openArmor();\n\n    Game.ui.initBottomBar();\n  }\n\n  Game.ui.openSpellbar = function () {\n\n    if (Game.ui.spellBarWindow) {\n      Game.ui.toolbar.removeChild(Game.ui.spellBarWindow);\n      Game.ui.spellBarWindow = null;\n    }\n\n    var spellBarWindow = Game.ui.spellBarWindow = new Sprite.Container();\n\n    var spellBar = Game.ui.spellBar = [];\n    spellBar.length = 7;\n\n    for (var i = 0; i < spellBar.length; i++) {\n      (function (element, index, array) {\n        spellBar[index] = new BoxClass(145 + index * 60, 415);\n      })(spellBar[i], i, spellBar);\n    }\n\n    for (var i = 0; i < spellBar.length; i++) {\n      spellBar[i].drawOn(spellBarWindow);\n    }\n\n    var spellBarIcon = Game.ui.spellBarIcon = [];\n\n    Game.hero.data.spellbar.forEach(function (element, index) {\n      if (!Game.hero.spells[element])\n        return;\n\n      SpellIconCopy(Game.hero.spells[element].icon, Game.ui.spellBar[index], \"bar\", index);\n    });\n\n    if (Game.ui.toolbar) {\n      Game.ui.toolbar.appendChild(spellBarWindow);\n      Game.update();\n    }\n  };\n\n  Game.ui.initBottomBar = function () {\n\n    if (Game.ui.toolbar) {\n      Game.uiLayer.removeChild(Game.ui.toolbar);\n      Game.ui.toolbar = null;\n    }\n\n\n    var background = new Sprite.Shape();\n    background.rect({\n      stroke: \"black\",\n      fill: \"grey\",\n      x: 0,\n      y: 0,\n      width: 790,\n      height: 60,\n    });\n\n    background.x = 5;\n    background.y = 385;\n    background.alpha = 0.6;\n\n    var barMax = 80;\n\n    var hpbarBox = new Sprite.Shape();\n    hpbarBox.rect({\n      x: 0,\n      y: 0,\n      width: barMax,\n      height: 20,\n      stroke: \"black\",\n    });\n    hpbarBox.x = 10;\n    hpbarBox.y = 392;\n\n    var hpbar = new Sprite.Shape();\n    hpbar.rect({\n      x: 0,\n      y: 0,\n      width: parseInt(Game.hero.data.hp / Game.hero.data._hp * barMax),\n      height: 20,\n      fill: \"green\",\n    });\n    hpbar.x = hpbarBox.x;\n    hpbar.y = hpbarBox.y;\n\n    var mpbarBox = new Sprite.Shape();\n    hpbarBox.rect({\n      x: 0,\n      y: 0,\n      width: barMax,\n      height: 20,\n      stroke: \"black\",\n    });\n    mpbarBox.x = 10;\n    mpbarBox.y = 418;\n\n    var mpbar = new Sprite.Shape();\n    mpbar.rect({\n      x: 0,\n      y: 0,\n      width: parseInt(Game.hero.data.sp / Game.hero.data._sp * barMax),\n      height: 20,\n      fill: \"blue\",\n    });\n    mpbar.x = mpbarBox.x;\n    mpbar.y = mpbarBox.y;\n\n    // use 按钮\n\n    var useButton = Game.ui.useButton = new BoxClass(770, 30);\n    if (!Game.hintFlag)\n      useButton.visible = false;\n    useButton.on(\"click\", function () {\n      if (Game.hintObject && Game.hintObject.use)\n        Game.hintObject.use();\n    });\n\n    // 四个按钮：\n\n    var informationButton = Game.ui.informationButton = new BoxBitmapButtonClass(\"/image/information.png\", 585, 415);\n    informationButton.on(\"click\", Game.ui.openInformation);\n\n    var itemButton = Game.ui.itemButton = new BoxBitmapButtonClass(\"/image/item.png\", 645, 415);\n    itemButton.on(\"click\", Game.ui.openItem);\n\n    var mapButton = Game.ui.mapButton = new BoxBitmapButtonClass(\"/image/map.png\", 705, 415);\n    mapButton.on(\"click\", Game.ui.openMap);\n\n    var settingButton = Game.ui.settingButton = new BoxBitmapButtonClass(\"/image/setting.png\", 765, 415);\n    settingButton.on(\"click\", Game.ui.openSetting);\n\n    var toolbar = new Sprite.Container();\n    toolbar.center.x = 400;\n    toolbar.center.y = 225;\n\n    toolbar.appendChild(background);\n    toolbar.appendChild(hpbarBox);\n    toolbar.appendChild(mpbarBox);\n    toolbar.appendChild(hpbar);\n    toolbar.appendChild(mpbar);\n\n    useButton.drawOn(toolbar);\n    informationButton.drawOn(toolbar);\n    itemButton.drawOn(toolbar);\n    mapButton.drawOn(toolbar);\n    settingButton.drawOn(toolbar);\n\n    // 让底部栏总在最下面\n    Game.uiLayer.appendChildAt(0, toolbar);\n    Game.ui.toolbar = toolbar;\n\n    if (Game.ui.settingWindow) { // 如果开着，就要关\n      Game.ui.settingButton.color = \"green\";\n    }\n\n    if (Game.ui.informationWindow || Game.ui.skillWindow || Game.ui.spellWindow) { // 如果开着，就要关\n      Game.ui.informationButton.color = \"green\";\n    }\n\n    if (Game.ui.mapWindow) { // 如果开着，就要关\n      Game.ui.mapButton.color = \"green\";\n    }\n\n    if (Game.ui.itemWindow) { // 如果开着，就要关\n      Game.ui.itemButton.color = \"green\";\n    }\n\n    if (Game.ui.spellBarWindow) {\n      toolbar.appendChild(Game.ui.spellBarWindow);\n    } else {\n      Game.ui.openSpellbar();\n    }\n\n    Game.update();\n\n  } // Game.ui.InitBottomBar\n\n\n}());\n"]}