{"version":3,"sources":["src/GameUI.js"],"names":[],"mappings":"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","file":"src/GameUI.js","sourcesContent":["/*\n\nA-RPG Game, Built using Node.js + JavaScript + ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.ui = {};\n\n  Game.ui.confirmHandle = null;\n  Game.ui.confirm = function (message, callback) {\n    document.getElementById(\"confirmMessage\").textContent = message;\n    Game.ui.confirmHandle = callback;\n    document.getElementById(\"confirmWindow\").style.display = \"block\";\n  };\n  document.getElementById(\"confirmYes\").addEventListener(\"click\", function () {\n    document.getElementById(\"confirmWindow\").style.display = \"none\";\n    if (typeof Game.ui.confirmHandle == \"function\")\n      Game.ui.confirmHandle(true);\n  });\n  document.getElementById(\"confirmNo\").addEventListener(\"click\", function () {\n    document.getElementById(\"confirmWindow\").style.display = \"none\";\n    if (typeof Game.ui.confirmHandle == \"function\")\n      Game.ui.confirmHandle(false);\n  });\n\n  Game.ui.choiceHandle = null;\n  Game.ui.choiceOptions = null;\n  Game.ui.choice = function (options, callback) {\n    Game.ui.choiceHandle = callback;\n    Game.ui.choiceOptions = options;\n    document.getElementById(\"choiceWindow\").style.display = \"block\";\n    var index = 0;\n    for (var key in options) {\n      document.getElementById(`choice${index}`).textContent = key;\n      document.getElementById(`choice${index}`).style.display = \"block\";\n      index++;\n    }\n    for (var i = index; i < 16; i++) {\n      document.getElementById(`choice${i}`).style.display = \"none\";\n    }\n  };\n  document.getElementById(\"choiceNo\").addEventListener(\"click\", function () {\n    document.getElementById(\"choiceWindow\").style.display = \"none\";\n    if (typeof Game.ui.choiceHandle == \"function\")\n      Game.ui.choiceHandle(null);\n  });\n  for (var i = 0; i < 16; i++) {\n    (function (index) {\n      document.getElementById(`choice${index}`).addEventListener(\"click\", function () {\n        var key = Object.keys(Game.ui.choiceOptions)[index];\n        document.getElementById(\"choiceWindow\").style.display = \"none\";\n        if (typeof Game.ui.choiceHandle == \"function\")\n          Game.ui.choiceHandle(Game.ui.choiceOptions[key]);\n      });\n    })(i);\n  }\n\n  Game.ui.shortcut = function () {\n    Game.ui.choice({\n      1:0,\n      2:1,\n      3:2,\n      4:3,\n      5:4,\n      6:5,\n      7:6,\n      8:7\n    }, function (choice) {\n      if (typeof choice == \"number\" && choice >= 0) {\n        Game.hero.data.bar[choice] = null;\n        Game.ui.bar();\n        Game.ShowWindow(\"uiWindow\");\n      }\n    });\n  };\n\n  Game.ui.pickupWindow = function (itemObj) {\n    if (!itemObj.inner || Object.keys(itemObj.inner).length <= 0) {\n      for (var key in Game.area.bags) {\n        if (Game.area.bags[key] == itemObj) {\n          delete Game.area.bags[key];\n          itemObj.erase(Game.itemLayer);\n        }\n      }\n      Game.ShowWindow(\"uiWindow\");\n      return;\n    }\n\n    var tableBody = document.getElementById(\"pickupTableBody\");\n    while (tableBody.hasChildNodes()) {\n      tableBody.removeChild(tableBody.lastChild);\n    }\n\n    Sprite.Util.each(itemObj.inner, function (itemCount, itemId, inner) {\n      var item = Game.items[itemId];\n\n      var line = document.createElement(\"tr\");\n\n      var icon = document.createElement(\"td\");\n      line.appendChild(icon);\n\n      var name = document.createElement(\"td\");\n      line.appendChild(name);\n\n      var count = document.createElement(\"td\");\n      line.appendChild(count);\n\n      var description = document.createElement(\"td\");\n      line.appendChild(description);\n\n      var pickup = document.createElement(\"td\");\n      line.appendChild(pickup);\n\n      icon.appendChild(item.icon);\n      name.textContent = item.data.name;\n      count.textContent = itemCount;\n      description.textContent = item.data.description;\n\n      var pickupButton = document.createElement(\"button\");\n      pickupButton.textContent = \"捡取\";\n      pickupButton.addEventListener(\"click\", function () {\n        if (Game.hero.data.items[itemId]) {\n          Game.hero.data.items[itemId] += itemCount;\n        } else {\n          Game.hero.data.items[itemId] = itemCount;\n        }\n        delete inner[itemId];\n        Game.ui.pickupWindow(itemObj);\n      });\n      pickup.appendChild(pickupButton);\n\n      tableBody.appendChild(line);\n    });\n\n    Game.ShowWindow(\"pickupWindow\");\n  };\n\n  Game.ui.itemWindow = function (filter) {\n    var tableBody = document.getElementById(\"itemTableBody\");\n    while (tableBody.hasChildNodes()) {\n      tableBody.removeChild(tableBody.lastChild);\n    }\n\n    var ids = Object.keys(Game.hero.data.items);\n    ids.sort();\n    ids.forEach(function (itemId) {\n      var itemCount = Game.hero.data.items[itemId];\n      var item = Game.items[itemId];\n      var equipment = null;\n\n      Sprite.Util.each(Game.hero.data.equipment, function (element, key) {\n        if (element == item.id)\n          equipment = key;\n      });\n\n      if (filter && filter.indexOf(item.data.type) == -1)\n        return;\n\n      var line = document.createElement(\"tr\");\n\n      var icon = document.createElement(\"td\");\n      icon.appendChild(item.icon);\n      line.appendChild(icon);\n\n      var name = document.createElement(\"td\");\n      name.textContent = item.data.name;\n      if (equipment)\n        name.style.color = \"red\";\n      line.appendChild(name);\n\n      var count = document.createElement(\"td\");\n      count.textContent = itemCount;\n      line.appendChild(count);\n\n      var description = document.createElement(\"td\");\n      description.textContent = item.data.description;\n      line.appendChild(description);\n\n      var manage = document.createElement(\"td\");\n      var manageButton = document.createElement(\"button\");\n      manageButton.textContent = \"操作\";\n      manage.appendChild(manageButton);\n      manageButton.addEventListener(\"click\", function () {\n        var options = {};\n        if (item.data.type.match(/potion/)) {\n          options[\"使用\"] = \"use\";\n          options[\"快捷键\"] = \"shortcut\";\n        } else if (item.data.type.match(/sword|spear|bow|head|body|feet|neck|ring/)) {\n          if (equipment)\n            options[\"卸下\"] = \"takeoff\";\n          else\n            options[\"装备\"] = \"puton\";\n        } else if (item.data.type.match(/book/)) {\n          options[\"阅读\"] = \"read\";\n        }\n\n        options[\"丢弃\"] = \"drop\";\n\n        Game.ui.choice(options, function (choice) {\n          console.log(choice);\n          switch (choice) {\n            case \"puton\":\n              Game.hero.data.equipment[item.data.type] = item.id;\n              return Game.ui.itemWindow(filter);\n              break;\n            case \"takeoff\":\n              if (item.data.type.match(/sword|spear|bow/))\n                Game.hero.data.equipment.weapon = null;\n              else\n                Game.hero.data.equipment[item.data.type] = null;\n              return Game.ui.itemWindow(filter);\n              break;\n            case \"use\":\n              break;\n            case \"read\":\n              break;\n            case \"drop\":\n              if (equipment)\n                Game.hero.data.equipment[equipment] = null;\n              var dead = Game.items.bag.clone();\n              dead.x = Game.hero.x;\n              dead.y = Game.hero.y;\n              dead.draw(Game.itemLayer);\n              dead.inner = {};\n              dead.inner[item.id] = itemCount;\n              Game.area.bags[Sprite.Util.id()] = dead;\n              delete Game.hero.data.items[item.id];\n              return Game.ui.itemWindow(filter);\n              break;\n            case \"shortcut\":\n              Game.ui.choice({\n                1:0,\n                2:1,\n                3:2,\n                4:3,\n                5:4,\n                6:5,\n                7:6,\n                8:7\n              }, function (choice) {\n                if (typeof choice == \"number\" && choice >= 0) {\n                  Game.hero.data.bar[choice] = {\n                    id: item.id,\n                    type: \"item\"\n                  };\n                  Game.ui.bar();\n                }\n              });\n              break;\n          }\n        });\n      });\n      line.appendChild(manage);\n\n      tableBody.appendChild(line);\n    });\n\n    Game.ShowWindow(\"itemWindow\");\n  };\n\n  Game.ui.skillWindow = function () {\n    var tableBody = document.getElementById(\"skillTableBody\");\n    while (tableBody.hasChildNodes()) {\n      tableBody.removeChild(tableBody.lastChild);\n    }\n\n    for (var i = 0; i < Game.hero.data.skillcount; i++) {\n      (function (index) {\n        var line = document.createElement(\"tr\");\n\n        var icon = document.createElement(\"td\");\n        line.appendChild(icon);\n\n        var name = document.createElement(\"td\");\n        line.appendChild(name);\n\n        var description = document.createElement(\"td\");\n        line.appendChild(description);\n\n        var manage = document.createElement(\"td\");\n        line.appendChild(manage);\n\n        var skillId = Game.hero.data.skills[index];\n        if (skillId) {\n          var skill = Game.hero.skills[skillId];\n          icon.appendChild(skill.icon);\n          name.textContent = skill.data.name;\n          description.textContent = skill.data.description;\n\n          var manageButton = document.createElement(\"button\");\n          manageButton.textContent = \"操作\";\n          manage.appendChild(manageButton);\n          manageButton.addEventListener(\"click\", function () {\n            Game.ui.choice({\n              \"快捷栏\": \"shortcut\",\n              \"升级\": \"levelup\",\n              \"遗忘\": \"remove\"\n            }, function (choice) {\n              switch(choice) {\n                case \"shortcut\":\n                  Game.ui.choice({\n                    1:0,\n                    2:1,\n                    3:2,\n                    4:3,\n                    5:4,\n                    6:5,\n                    7:6,\n                    8:7\n                  }, function (choice) {\n                    if (typeof choice == \"number\" && choice >= 0) {\n                      Game.hero.data.bar[choice] = {\n                        id: skillId,\n                        type: \"skill\"\n                      };\n                      Game.ui.bar();\n                    }\n                  });\n                  break;\n                case \"levelup\":\n                  if (skill.data.next && skill.data.exp && Game.hero.data.exp > skill.data.exp) {\n                    // level up\n                  }\n                  break;\n                case \"remove\":\n                  Game.ui.confirm(`真的要遗忘 ${skill.data.name} 技能吗？`, function (yes) {\n                    if (yes) {\n                      Game.hero.data.bar.forEach(function (element, index, array) {\n                        if (element && element.id == skillId) {\n                          array[index] = null;\n                        }\n                      });\n                      Game.hero.data.skills.splice(index, 1);\n                      Game.ui.bar();\n                      Game.ui.skillWindow();\n                    }\n                  });\n                  break;\n              }\n            });\n          });\n        } else {\n          name.textContent = \"空\";\n        }\n\n        tableBody.appendChild(line);\n      })(i);\n    }\n\n    Game.ShowWindow(\"skillWindow\");\n  };\n\n  Game.ui.statusWindow = function () {\n    document.getElementById(\"heroName\").textContent = `名字：${Game.hero.data.name}`;\n    document.getElementById(\"heroHP\").textContent = `生命力：${Game.hero.data.hp}/${Game.hero.data.$hp}`;\n    document.getElementById(\"heroSP\").textContent = `精神力：${Game.hero.data.sp}/${Game.hero.data.$sp}`;\n    document.getElementById(\"heroLevel\").textContent = `等级：${Game.hero.data.level}`;\n    document.getElementById(\"heroEXP\").textContent = `经验：${Game.hero.data.exp}`;\n    document.getElementById(\"heroSTR\").textContent = `力量：${Game.hero.data.str}`;\n    document.getElementById(\"heroDEX\").textContent = `敏捷：${Game.hero.data.dex}`;\n    document.getElementById(\"heroCON\").textContent = `耐力：${Game.hero.data.con}`;\n    document.getElementById(\"heroINT\").textContent = `智力：${Game.hero.data.int}`;\n    document.getElementById(\"heroCHA\").textContent = `魅力：${Game.hero.data.cha}`;\n    document.getElementById(\"heroATK\").textContent = `攻击：${Game.hero.data.atk}`;\n    document.getElementById(\"heroDEF\").textContent = `防御：${Game.hero.data.def}`;\n    document.getElementById(\"heroMATK\").textContent = `魔法攻击：${Game.hero.data.matk}`;\n    document.getElementById(\"heroMDEF\").textContent = `魔法防御：${Game.hero.data.mdef}`;\n\n    Sprite.Util.each(Game.hero.data.equipment, function (element, key) {\n      if (!element) return;\n      var dom = document.getElementById(`equipment-${key}`);\n      while (dom.hasChildNodes())\n        dom.removeChild(dom.lastChild);\n      dom.appendChild(Game.items[element].icon);\n      var text = document.createElement(\"span\");\n      text.textContent = Game.items[element].data.name;\n      dom.appendChild(text);\n    });\n\n    Game.ShowWindow('statusWindow');\n  };\n\n  Game.ui.archiveWindow = function () {\n    Game.ShowWindow(\"archiveWindow\");\n    var table = document.getElementById(\"archiveTable\");\n\n    while(table.hasChildNodes()) {\n      table.removeChild(table.lastChild);\n    }\n\n    var list = Game.archive.list();\n    list.forEach(function (element) {\n      var div = document.createElement(\"div\");\n      div.classList.add(\"archiveItem\");\n\n      var archive = Game.archive.get(`SAVE_${element}`);\n\n      var removeButton = document.createElement(\"button\");\n      removeButton.style.float = \"right\";\n      removeButton.textContent = \"REMOVE\";\n      div.appendChild(removeButton);\n      removeButton.addEventListener(\"click\", function () {\n        Game.archive.remove(`SAVE_${element}`);\n        Game.ui.archiveWindow();\n      });\n\n      var loadButton = document.createElement(\"button\");\n      loadButton.style.float = \"right\";\n      loadButton.style.marginBottom = \"40px\";\n      loadButton.textContent = \"LOAD\";\n      div.appendChild(loadButton);\n      loadButton.addEventListener(\"click\", function () {\n        Game.archive.load(`SAVE_${element}`);\n      });\n\n      var heroName = document.createElement(\"h4\");\n      heroName.innerHTML = archive.name;\n      div.appendChild(heroName);\n\n      var time = document.createElement(\"h5\");\n      time.innerHTML = archive.date;\n      div.appendChild(time);\n\n      table.appendChild(div);\n    });\n  };\n\n  Game.ui.bar = function () {\n    for (var i = 0; i < 8; i++) {\n      var element = Game.hero.data.bar[i];\n      var container = document.getElementById(`buttonBar-${i}`);\n      while (container.hasChildNodes())\n        container.removeChild(container.lastChild);\n      if (element) {\n        var id = element.id;\n        var type = element.type;\n        if (type == \"skill\") {\n          var skill = Game.hero.skills[id];\n          container.appendChild(skill.icon.cloneNode());\n        } else if (type == \"item\") {\n          var item = Game.items[id];\n          container.appendChild(item.icon.cloneNode());\n        }\n      } else {\n        // empty bar element\n        container.appendChild(document.createElement(\"img\"));\n      }\n    }\n  }\n\n  Game.ui.init = function () {\n    // 设置技能栏\n    for (var i = 0; i < 8; i++) {\n      (function (buttonSkill, index) {\n        buttonSkill.addEventListener(\"click\", function () {\n          var element = Game.hero.data.bar[index];\n          if (element) {\n            if (element.type == \"skill\")\n              Game.hero.fire(element.id);\n            else if (element.type == \"item\") {\n\n            }\n          }\n        });\n      })(document.getElementById(`buttonBar-${i}`), i);\n    }\n\n    Game.ui.bar();\n\n    document.getElementById(\"buttonMenu\").addEventListener(\"click\", function (event) {\n      Game.ShowWindow(\"menuWindow\");\n    });\n  };\n\n}());\n"]}