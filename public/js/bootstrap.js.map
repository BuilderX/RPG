{"version":3,"sources":["public/src/bootstrap.js"],"names":[],"mappings":"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","file":"public/src/bootstrap.js","sourcesContent":["/*\n\nA-RPG Game, Built using Node.js + JavaScript + ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  // 当窗口大小改变时改变游戏窗口大小\n  function CalculateWindowSize () {\n    var width = window.innerWidth;\n    var height = window.innerHeight;\n    var scale = 1;\n    var leftMargin = 0;\n\n    if (Game.config.scale == false) {\n      // 不拉伸游戏窗口，按原始大小计算窗口居中\n      leftMargin = Math.floor((width - Game.config.width) / 2);\n    } else {\n      // 拉伸游戏窗口，首先计算游戏原始大小比例\n      var ratio = Game.config.width / Game.config.height;\n      // width first\n      var w = width;\n      var h = w / ratio;\n      // then height\n      if (h > height) {\n        h = height;\n        w = h * ratio;\n      }\n\n      w = Math.floor(w);\n      h = Math.floor(h);\n      leftMargin = Math.floor((width - w) / 2);\n\n      scale = Math.min(\n        w / Game.config.width,\n        h / Game.config.height\n      );\n    }\n\n    // html窗口拉伸（css中控制了原始大小）\n    var elements = document.getElementsByClassName(\"game-window\");\n    for (let i = 0; i < elements.length; i++) {\n      elements[i].style.transformOrigin = \"0 0\";\n      elements[i].style.transform = `scale(${scale}, ${scale})`;\n      elements[i].style.left = `${leftMargin}px`;\n    }\n    // 游戏画布拉伸\n    if (Game.stage && Game.stage.canvas) {\n      Game.stage.canvas.style.transformOrigin = \"0 0\";\n      Game.stage.canvas.style.transform = `scale(${scale}, ${scale})`;\n      Game.stage.canvas.style.left = `${leftMargin}px`;\n    }\n\n    if (Game.hero) {\n      Game.hero.focus();\n    }\n\n  };\n\n  CalculateWindowSize();\n  window.addEventListener(\"resize\", function () {\n    CalculateWindowSize();\n  });\n\n  window.ShowGameWindow = function (id) {\n    var elements = document.getElementsByClassName(\"game-window\");\n    for (let i = 0; i < elements.length; i++) {\n      elements[i].style.display = \"none\";\n    }\n    if (id && document.getElementById(id)) {\n      document.getElementById(id).style.display = \"block\";\n    }\n  }\n\n  window.ShowGameWindow(\"mainWindow\")\n  Game.init();\n  CalculateWindowSize();\n\n})();\n"]}